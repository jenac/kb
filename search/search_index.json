{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"Welcome to Lihe's Notes graph LR A[Start] --> B{Error?}; B -->|Yes| C[Hmm...]; C --> D[Debug]; D --> B; B ---->|No| E[Yay!];","title":"Welcome to Lihe's Notes"},{"location":"index.html#welcome-to-lihes-notes","text":"graph LR A[Start] --> B{Error?}; B -->|Yes| C[Hmm...]; C --> D[Debug]; D --> B; B ---->|No| E[Yay!];","title":"Welcome to Lihe's Notes"},{"location":"archived/angular/angular_s01.html","text":"Angluar Basics '`' is called ES2015 backtick use VSCode Intellisense Directives *ngIf *ngFor 1 2 < tr * ngFor = 'let product of products' > </ tr > let ... of - iterate objects let ... in - iterate indexes Binding Interpolation 1 {{ production.name }} Property Binding 1 < img [ src ]=' product . url ' [ style . width . px ]=' myWidth ' ></ img > Favor property binding over interpolation, except expression, like 1 {{ 'hello' + user.name }} Event Binding 1 < button ( click )=' someHandler ()' ></ button > Two Way Binding 1 < input [( ngModel )]=' someProp ' > ngModel exists in FormsModule Pipes pipe do transform data In interpolation: 1 {{ name.last | uppercase }} In property binding: 1 <img [title]='product.name | lowercase'> pipe with args: 1 {{ myData | myPipe: 'arg1' : 'arg2' : 'arg3' : ... }} Interfaces 1 2 3 4 5 export interface IProduct { id : string ; name : string ; getDiscount ( percent : number ) : number ; } Class implements interface Encapsulate Component Styles using styles ot styleUrls in @Component Component Lifecycle Hooks lifecycle: create -> render -> create and render children -> process changes (multple interations) ->destroy Most used hooks (defined as interfaces): onInit: used for initial load, ngOnInit() onChanges: handle input properties, ngOnChange() onDestroy: clean up, ngOnDestroy Customize Pipe 1 2 3 4 5 6 7 8 9 @Pipe ({ name : 'removeSpace' }) export class RemoveSpacePipe implements PipeTransform { transfor (...) { ... } } * need declare in appModule * put into shared folder","title":"Angluar Basics"},{"location":"archived/angular/angular_s01.html#angluar-basics","text":"'`' is called ES2015 backtick use VSCode Intellisense","title":"Angluar Basics"},{"location":"archived/angular/angular_s01.html#directives","text":"*ngIf *ngFor 1 2 < tr * ngFor = 'let product of products' > </ tr > let ... of - iterate objects let ... in - iterate indexes","title":"Directives"},{"location":"archived/angular/angular_s01.html#binding","text":"","title":"Binding"},{"location":"archived/angular/angular_s01.html#interpolation","text":"1 {{ production.name }}","title":"Interpolation"},{"location":"archived/angular/angular_s01.html#property-binding","text":"1 < img [ src ]=' product . url ' [ style . width . px ]=' myWidth ' ></ img > Favor property binding over interpolation, except expression, like 1 {{ 'hello' + user.name }}","title":"Property Binding"},{"location":"archived/angular/angular_s01.html#event-binding","text":"1 < button ( click )=' someHandler ()' ></ button >","title":"Event Binding"},{"location":"archived/angular/angular_s01.html#two-way-binding","text":"1 < input [( ngModel )]=' someProp ' > ngModel exists in FormsModule","title":"Two Way Binding"},{"location":"archived/angular/angular_s01.html#pipes","text":"pipe do transform data In interpolation: 1 {{ name.last | uppercase }} In property binding: 1 <img [title]='product.name | lowercase'> pipe with args: 1 {{ myData | myPipe: 'arg1' : 'arg2' : 'arg3' : ... }}","title":"Pipes"},{"location":"archived/angular/angular_s01.html#interfaces","text":"1 2 3 4 5 export interface IProduct { id : string ; name : string ; getDiscount ( percent : number ) : number ; } Class implements interface","title":"Interfaces"},{"location":"archived/angular/angular_s01.html#encapsulate-component-styles","text":"using styles ot styleUrls in @Component","title":"Encapsulate Component Styles"},{"location":"archived/angular/angular_s01.html#component-lifecycle-hooks","text":"lifecycle: create -> render -> create and render children -> process changes (multple interations) ->destroy","title":"Component Lifecycle Hooks"},{"location":"archived/angular/angular_s01.html#most-used-hooks-defined-as-interfaces","text":"onInit: used for initial load, ngOnInit() onChanges: handle input properties, ngOnChange() onDestroy: clean up, ngOnDestroy","title":"Most used hooks (defined as interfaces):"},{"location":"archived/angular/angular_s01.html#customize-pipe","text":"1 2 3 4 5 6 7 8 9 @Pipe ({ name : 'removeSpace' }) export class RemoveSpacePipe implements PipeTransform { transfor (...) { ... } } * need declare in appModule * put into shared folder","title":"Customize Pipe"},{"location":"archived/angular/angular_s02.html","text":"Nested Components @Input() Parent -> Child @Output() Parent <- Child, using event Usage delcare in appModule put selector in parent component input data in parent use property binding @Input example * In Parent: 1 2 3 4 5 6 ... < td > < pm-star [ rating ]=' product . stars ' > </ pm-star > </ td > ... * In Child: 1 2 3 4 export class StarComponent { @Input () rating : number ; ... } Rasing event using @Output * In Child: 1 2 3 4 5 6 7 8 9 export class StarComponent { ... @Output () someName1 : EventEmitter < string > = new EventEmitter < string > (); handleClick () { this . someName1 . emit ( 'the value' ); //string which is the EventEmitter<_> } } 1 2 3 4 ... < div ( click )=' handleClick ()' > </ div > ... In Parent: 1 2 3 4 5 ... < pm-star [ rating ]=' product . stars ' ( someName1 )=' onChildNotify ($ event )' > </ pm-star > ... 1 2 3 4 5 6 export class ParentComponent { ... onChildNotify ( message : string ) : void { ... } } Service and Dependency Injection Building a service create the injectable class 1 2 3 4 5 6 7 import { Injectable } from '@angular/core' ; @Injectable () export class ProductService { getProducts () : IProduct [] { ... } } Register a servcie define provider in appModule (can be used in whole app) or Component (can be used in itself and its children) if defined as provider more than once, it then have multiple instances (not singleton any more) use as singleton is preferred Inject a service use constructor injection 1 2 3 4 ... constructor ( private _productService : ProductService ) { } ... Retrive Data using HTTP Observables and Reactive Extensions manage sync data treat events as collection use reactive extensions(RxJS) no relation with REACT supports Observale operators: map, filter, take, merge ... Promise vs Observables Promise Observable provides a single future value emits multiple values over time not lazy lazy not cancellable cancellable supports operators HttpClient exists in HttpClientModule import it in appModule In appModule: * imports means reference modules outside appModule * declarations means reference class/components inside appModule Example 1 2 3 4 5 6 7 8 9 10 11 @Injectable () export class ProductService { private _url : string = 'some-url' ; constructor ( private _http : HttpClient ) { } getProducts () : Observable < IProduct [] > { return this . _http . get < IProducrt [] > ( this . _url ); } } Exception Handling 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import 'rxjs/add/operator/catch' ; import 'rxjs/add/operator/do' ; ... return this . _http . get < IProduct [] > ( this . _url ) . do ( data => console . log ( data )) . catch ( this . handleError ); ... private handleError ( err : HttpErrorResponse ) { //some code console . log ( err . message ); //or you can re-throw return Observable . throw ( err . message ) ' } ... Subscribe to an Observable 1 2 3 4 5 x . then ( valueFn , errorFn ) //Promise x . subscribe ( valueFn , errorFn ) //Observable x . subscribe ( valueFn , errorFn , completeFn ) //Observable let s = x . subscribe ( valueFn , errorFn , completeFn ) //Observable s . unsubscribe () //unsubscribe a Observable Example 1 2 3 4 5 6 7 8 9 ... ngOnInit () : void { this . _productService . getProducts () . subscribe ( products => this . products = products , error => this . errorMessage = < any > error //since handleError do re-throw; ); } ...","title":"Nested Components"},{"location":"archived/angular/angular_s02.html#nested-components","text":"@Input() Parent -> Child @Output() Parent <- Child, using event","title":"Nested Components"},{"location":"archived/angular/angular_s02.html#usage","text":"delcare in appModule put selector in parent component input data in parent use property binding @Input example * In Parent: 1 2 3 4 5 6 ... < td > < pm-star [ rating ]=' product . stars ' > </ pm-star > </ td > ... * In Child: 1 2 3 4 export class StarComponent { @Input () rating : number ; ... } Rasing event using @Output * In Child: 1 2 3 4 5 6 7 8 9 export class StarComponent { ... @Output () someName1 : EventEmitter < string > = new EventEmitter < string > (); handleClick () { this . someName1 . emit ( 'the value' ); //string which is the EventEmitter<_> } } 1 2 3 4 ... < div ( click )=' handleClick ()' > </ div > ... In Parent: 1 2 3 4 5 ... < pm-star [ rating ]=' product . stars ' ( someName1 )=' onChildNotify ($ event )' > </ pm-star > ... 1 2 3 4 5 6 export class ParentComponent { ... onChildNotify ( message : string ) : void { ... } }","title":"Usage"},{"location":"archived/angular/angular_s02.html#service-and-dependency-injection","text":"","title":"Service and Dependency Injection"},{"location":"archived/angular/angular_s02.html#building-a-service","text":"create the injectable class 1 2 3 4 5 6 7 import { Injectable } from '@angular/core' ; @Injectable () export class ProductService { getProducts () : IProduct [] { ... } }","title":"Building a service"},{"location":"archived/angular/angular_s02.html#register-a-servcie","text":"define provider in appModule (can be used in whole app) or Component (can be used in itself and its children) if defined as provider more than once, it then have multiple instances (not singleton any more) use as singleton is preferred","title":"Register a servcie"},{"location":"archived/angular/angular_s02.html#inject-a-service","text":"use constructor injection 1 2 3 4 ... constructor ( private _productService : ProductService ) { } ...","title":"Inject a service"},{"location":"archived/angular/angular_s02.html#retrive-data-using-http","text":"","title":"Retrive Data using HTTP"},{"location":"archived/angular/angular_s02.html#observables-and-reactive-extensions","text":"manage sync data treat events as collection use reactive extensions(RxJS) no relation with REACT supports Observale operators: map, filter, take, merge ...","title":"Observables and Reactive Extensions"},{"location":"archived/angular/angular_s02.html#promise-vs-observables","text":"Promise Observable provides a single future value emits multiple values over time not lazy lazy not cancellable cancellable supports operators HttpClient exists in HttpClientModule import it in appModule In appModule: * imports means reference modules outside appModule * declarations means reference class/components inside appModule Example 1 2 3 4 5 6 7 8 9 10 11 @Injectable () export class ProductService { private _url : string = 'some-url' ; constructor ( private _http : HttpClient ) { } getProducts () : Observable < IProduct [] > { return this . _http . get < IProducrt [] > ( this . _url ); } }","title":"Promise vs Observables"},{"location":"archived/angular/angular_s02.html#exception-handling","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import 'rxjs/add/operator/catch' ; import 'rxjs/add/operator/do' ; ... return this . _http . get < IProduct [] > ( this . _url ) . do ( data => console . log ( data )) . catch ( this . handleError ); ... private handleError ( err : HttpErrorResponse ) { //some code console . log ( err . message ); //or you can re-throw return Observable . throw ( err . message ) ' } ...","title":"Exception Handling"},{"location":"archived/angular/angular_s02.html#subscribe-to-an-observable","text":"1 2 3 4 5 x . then ( valueFn , errorFn ) //Promise x . subscribe ( valueFn , errorFn ) //Observable x . subscribe ( valueFn , errorFn , completeFn ) //Observable let s = x . subscribe ( valueFn , errorFn , completeFn ) //Observable s . unsubscribe () //unsubscribe a Observable Example 1 2 3 4 5 6 7 8 9 ... ngOnInit () : void { this . _productService . getProducts () . subscribe ( products => this . products = products , error => this . errorMessage = < any > error //since handleError do re-throw; ); } ...","title":"Subscribe to an Observable"},{"location":"archived/angular/angular_s03.html","text":"Navigation and Routers angular-cli generate ng g c products/product-detail.component --flat routerLink www.server.com/products HTML 5 style url, requires web server configure with URL rewriting. www.server.com/#/products Hash style routing Route definintion: 1 2 3 ... { path : 'products' , component : ProductListComponent } ... Dispaly at: 1 < route-outlet ></ route-outlet > 1. import RouteModule in appModule 1 2 3 4 5 6 7 ... imports : [ ... RouterModule . forRoot ([], { useHash : true }), ... ] ... 2. configure route no leading slash on path path example 'products' /products 'product/:id' /product/5 '' default route '**' everything else * order matters * redirectTo for redirect route * routed component does not need selector 3. route in action 1 2 3 4 5 < ul class = 'nav nav-bar' > < li [ routerLink ]=\"['/ welcome ', param1 , param2 , ...]\" > Home </ li > </ ul > 4. place the views 1 < route-outlet ></ route-outlet > Nested Component Routed Component define a selector no selector nest in another component configure routes no route tie route to actions Additional Navigation and Routing Passing params to a route In route config: 1 { path : 'products/:id' , component : ProductDetailComponent } In navigation component: 1 < a [ routerLink ]=\"['/ products ', product . id ]\" ></ a > Reading the param 1 2 3 4 5 6 import { ActivatedRoute } from '@angular/router' ; ... constructor ( private _route : ActivatiedRoute ) { console . log ( this . _route . snapshot . paramMap . get ( ' id )); } ... snapshot: no change expected observable: expected to change, like next button. Activating a route with code 1 2 3 4 5 6 7 8 9 ```typescript import { Router } from '@angular/router'; ... constructor(private _router: Router) {} onBack(): void { this._router.navigate(['products']); } ... ``` Protecting routes with Guards type of Guards description CanActive Guard navigate to a route CanDeactive Guard navigate from a route Resolve Prefetch data before activating a route CanLoad Prevent async routing Create Guard 1 2 3 4 5 6 7 8 import { Injectable } from '@angular/core' ; import { CanActive } from '@angular/router' ; @Injectable export class ProductGuardService implements CanActive { canActive () : boolean { ... } } Register Guard Register in appModule as provider 1 2 3 ... providers : [ ProductGuardService ] ... Use Guard Use in route configuration 1 2 3 ... { path : 'products' , canActive : [ ProductGuardService ], component : ProudctSomeComponent } ... Full example 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 import { Injectable } from '@angular/core' ; import { CanActivate , ActivatedRouteSnapshot , Router } from '@angular/router' ; @Injectable export class ProductGuardService implements CanActive { constructor ( private _router : Router ) {} canActivate ( route : ActivatedRouterSnapshot ) : boolean { let id = + route . url [ 1 ]. path ; if ( isNaN ( id ) || id < 1 ) { //in real world, redirect to error page console . log ( 'invalid id' ); this . _router . navigate ([ 'products' ]); return false ; } return true ; } } Angular Modules What is an angular module? a class with ngModule decoration aggregate and re-import can be lazy loading In a module Imports Exports Providers Declarations Bootstrap Bootstap array 1 2 3 4 ... // start component bootstrap : [ AppComponent ] ... Declarations array 1 2 3 4 ... // components, directives, pipes inside the module declarations : [ some1 , some2 ] ... Exports array export components, directives, pipes for other moudles to use never export services Imports array imports external modules Providers array providers on angualr module are global providers on component only visible to the component and its children Guards need be added to providers BrowserModule only imports in the RootModule(AppModule) RouteModule.forRoot should be used in RootModule(AppModule). It will register router service declare router directive expose configured routes RouteModule.forChild should be used in feature module, it only does 2,3 above. Shared Module Export everything inside for re-use. Also export its imports Can import external module even not in its imports","title":"Navigation and Routers"},{"location":"archived/angular/angular_s03.html#navigation-and-routers","text":"angular-cli generate ng g c products/product-detail.component --flat routerLink www.server.com/products HTML 5 style url, requires web server configure with URL rewriting. www.server.com/#/products Hash style routing Route definintion: 1 2 3 ... { path : 'products' , component : ProductListComponent } ... Dispaly at: 1 < route-outlet ></ route-outlet >","title":"Navigation and Routers"},{"location":"archived/angular/angular_s03.html#1-import-routemodule-in-appmodule","text":"1 2 3 4 5 6 7 ... imports : [ ... RouterModule . forRoot ([], { useHash : true }), ... ] ...","title":"1. import RouteModule in appModule"},{"location":"archived/angular/angular_s03.html#2-configure-route","text":"no leading slash on path path example 'products' /products 'product/:id' /product/5 '' default route '**' everything else * order matters * redirectTo for redirect route * routed component does not need selector","title":"2. configure route"},{"location":"archived/angular/angular_s03.html#3-route-in-action","text":"1 2 3 4 5 < ul class = 'nav nav-bar' > < li [ routerLink ]=\"['/ welcome ', param1 , param2 , ...]\" > Home </ li > </ ul >","title":"3. route in action"},{"location":"archived/angular/angular_s03.html#4-place-the-views","text":"1 < route-outlet ></ route-outlet > Nested Component Routed Component define a selector no selector nest in another component configure routes no route tie route to actions","title":"4. place the views"},{"location":"archived/angular/angular_s03.html#additional-navigation-and-routing","text":"","title":"Additional Navigation and Routing"},{"location":"archived/angular/angular_s03.html#passing-params-to-a-route","text":"In route config: 1 { path : 'products/:id' , component : ProductDetailComponent } In navigation component: 1 < a [ routerLink ]=\"['/ products ', product . id ]\" ></ a > Reading the param 1 2 3 4 5 6 import { ActivatedRoute } from '@angular/router' ; ... constructor ( private _route : ActivatiedRoute ) { console . log ( this . _route . snapshot . paramMap . get ( ' id )); } ... snapshot: no change expected observable: expected to change, like next button.","title":"Passing params to a route"},{"location":"archived/angular/angular_s03.html#activating-a-route-with-code","text":"1 2 3 4 5 6 7 8 9 ```typescript import { Router } from '@angular/router'; ... constructor(private _router: Router) {} onBack(): void { this._router.navigate(['products']); } ... ```","title":"Activating a route with code"},{"location":"archived/angular/angular_s03.html#protecting-routes-with-guards","text":"type of Guards description CanActive Guard navigate to a route CanDeactive Guard navigate from a route Resolve Prefetch data before activating a route CanLoad Prevent async routing Create Guard 1 2 3 4 5 6 7 8 import { Injectable } from '@angular/core' ; import { CanActive } from '@angular/router' ; @Injectable export class ProductGuardService implements CanActive { canActive () : boolean { ... } } Register Guard Register in appModule as provider 1 2 3 ... providers : [ ProductGuardService ] ... Use Guard Use in route configuration 1 2 3 ... { path : 'products' , canActive : [ ProductGuardService ], component : ProudctSomeComponent } ... Full example 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 import { Injectable } from '@angular/core' ; import { CanActivate , ActivatedRouteSnapshot , Router } from '@angular/router' ; @Injectable export class ProductGuardService implements CanActive { constructor ( private _router : Router ) {} canActivate ( route : ActivatedRouterSnapshot ) : boolean { let id = + route . url [ 1 ]. path ; if ( isNaN ( id ) || id < 1 ) { //in real world, redirect to error page console . log ( 'invalid id' ); this . _router . navigate ([ 'products' ]); return false ; } return true ; } }","title":"Protecting routes with Guards"},{"location":"archived/angular/angular_s03.html#angular-modules","text":"","title":"Angular Modules"},{"location":"archived/angular/angular_s03.html#what-is-an-angular-module","text":"a class with ngModule decoration aggregate and re-import can be lazy loading","title":"What is an angular module?"},{"location":"archived/angular/angular_s03.html#in-a-module","text":"Imports Exports Providers Declarations Bootstrap","title":"In a module"},{"location":"archived/angular/angular_s03.html#bootstap-array","text":"1 2 3 4 ... // start component bootstrap : [ AppComponent ] ...","title":"Bootstap array"},{"location":"archived/angular/angular_s03.html#declarations-array","text":"1 2 3 4 ... // components, directives, pipes inside the module declarations : [ some1 , some2 ] ...","title":"Declarations array"},{"location":"archived/angular/angular_s03.html#exports-array","text":"export components, directives, pipes for other moudles to use never export services","title":"Exports array"},{"location":"archived/angular/angular_s03.html#imports-array","text":"imports external modules","title":"Imports array"},{"location":"archived/angular/angular_s03.html#providers-array","text":"providers on angualr module are global providers on component only visible to the component and its children Guards need be added to providers BrowserModule only imports in the RootModule(AppModule) RouteModule.forRoot should be used in RootModule(AppModule). It will register router service declare router directive expose configured routes RouteModule.forChild should be used in feature module, it only does 2,3 above.","title":"Providers array"},{"location":"archived/angular/angular_s03.html#shared-module","text":"Export everything inside for re-use. Also export its imports Can import external module even not in its imports","title":"Shared Module"},{"location":"archived/angular/angular_s04.html","text":"Angular Cli ng v ng help ng new polyfills.ts supports old browser ng new hello-world --prefix hw ng serve ng serve -o //opens default browser ng generate assets command class ng g cl component ng g c directive ng g d enum ng g e guard ng g g interface ng g i module ng g m pipe ng g p service ng g s ng test ng ese ng build ng build --prod minify/uglify tree shaking, remove unused branchs and pieces AOT: ahead of time compiler ng build --base-herf Typesctipt Typescript optional property in interface 1 2 3 4 interface { name : string ; age ? string ; //optional } by default, Typescript class members are public","title":"Angular Cli"},{"location":"archived/angular/angular_s04.html#angular-cli","text":"ng v ng help ng new polyfills.ts supports old browser ng new hello-world --prefix hw ng serve ng serve -o //opens default browser","title":"Angular Cli"},{"location":"archived/angular/angular_s04.html#ng-generate","text":"assets command class ng g cl component ng g c directive ng g d enum ng g e guard ng g g interface ng g i module ng g m pipe ng g p service ng g s ng test ng ese ng build ng build --prod minify/uglify tree shaking, remove unused branchs and pieces AOT: ahead of time compiler ng build --base-herf","title":"ng generate"},{"location":"archived/angular/angular_s04.html#typesctipt","text":"","title":"Typesctipt"},{"location":"archived/angular/angular_s04.html#typescript-optional-property-in-interface","text":"1 2 3 4 interface { name : string ; age ? string ; //optional } by default, Typescript class members are public","title":"Typescript optional property in interface"},{"location":"archived/angular/angular_s05.html","text":"MISC systemjs.config.js index.html --> systemconfig --(packl--)> main.js --> main.ts --(contains)--> platformBrowserDynamic() --(bootstrap)--> AppModule VSCode settings to exclude some files 1 2 3 4 5 6 7 { \"files.exclude\" : { \"**/.git\" : true , \"**/.svn\" : true , \"**/.hg\" : true } }","title":"MISC"},{"location":"archived/angular/angular_s05.html#misc","text":"","title":"MISC"},{"location":"archived/angular/angular_s05.html#systemjsconfigjs","text":"index.html --> systemconfig --(packl--)> main.js --> main.ts --(contains)--> platformBrowserDynamic() --(bootstrap)--> AppModule","title":"systemjs.config.js"},{"location":"archived/angular/angular_s05.html#vscode","text":"settings to exclude some files 1 2 3 4 5 6 7 { \"files.exclude\" : { \"**/.git\" : true , \"**/.svn\" : true , \"**/.hg\" : true } }","title":"VSCode"},{"location":"archived/dotnet/dotnet_s01.html","text":"dotNET QA What\u2019s the advantage of using System.Text.StringBuilder over System.String? StringBuilder is more efficient in the cases, where a lot of manipulation is done to the text. Strings are immutable, so each time it\u2019s being operated on, a new instance is created. Can you store multiple data types in System.Array? No. How can you sort the elements of the array in descending order? By calling Sort() and then Reverse() methods. What\u2019s the .NET datatype that allows the retrieval of data by a unique key? HashTable. What\u2019s class SortedList underneath? A sorted HashTable. Will finally block get executed if the exception had not occurred? Yes. What\u2019s the C# equivalent of C++ catch (\u2026), which was a catch-all statement for any possible exception? A catch block that catches the exception of type System.Exception. You can also omit the parameter data type in this case and just write catch {}. Can multiple catch blocks be executed? No, once the proper catch code fires off, the control is transferred to the finally block (if there are any), and then whatever follows the finally block. Why is it a bad idea to throw your own exceptions? Well, if at that point you know that an error has occurred, then why not write the proper code to handle that error instead of passing a new Exception object to the catch block? Throwing your own exceptions signifies some design flaws in the project. What\u2019s a delegate? A delegate object encapsulates a reference to a method. In C++ they were referred to as function pointers. What\u2019s a multicast delegate? It\u2019s a delegate that points to and eventually fires off several methods. How\u2019s the DLL Hell problem solved in .NET? Assembly versioning allows the application to specify not only the library it needs to run (which was available under Win32), but also the version of the assembly. What are the ways to deploy an assembly? An MSI installer, a CAB archive, and XCOPY command. What\u2019s a satellite assembly? When you write a multilingual or multi-cultural application in .NET, and want to distribute the core application separately from the localized modules, the localized assemblies that modify the core application are called satellite assemblies. What namespaces are necessary to create a localized application? System.Globalization, System.Resources. What\u2019s the difference between // comments, / / comments and /// comments? Single-line, multi-line and XML documentation comments. How do you generate documentation from the C# file commented properly with a command-line compiler? Compile it with a /doc switch. What\u2019s the difference between <c> and <code> XML documentation tag? Single line code example and multiple-line code example. Is XML case-sensitive? Yes, so <Student> and <student> are different elements. What debugging tools come with the .NET SDK? CorDBG \u2013 command-line debugger, and DbgCLR \u2013 graphic debugger. Visual Studio .NET uses the DbgCLR. To use CorDbg, you must compile the original C# file using the /debug switch. What does the This window show in the debugger? It points to the object that\u2019s pointed to by this reference. Object\u2019s instance data is shown. What does assert() do? In debug compilation, assert takes in a Boolean condition as a parameter, and shows the error dialog if the condition is false. The program proceeds without any interruption if the condition is true. What\u2019s the difference between the Debug class and Trace class? Documentation looks the same. Use Debug class for debug builds, use Trace class for both debug and release builds. Why are there five tracing levels in System.Diagnostics.TraceSwitcher? The tracing dumps can be quite verbose and for some applications that are constantly running you run the risk of overloading the machine and the hard drive there. Five levels range from None to Verbose, allowing to fine-tune the tracing activities. Where is the output of TextWriterTraceListener redirected? To the Console or a text file depending on the parameter passed to the constructor. How do you debug an ASP.NET Web application? Attach the aspnet_wp.exe process to the DbgClr debugger. What are three test cases you should go through in unit testing? Positive test cases (correct data, correct output), negative test cases (broken or missing data, proper handling), exception test cases (exceptions are thrown and caught properly). Can you change the value of a variable while debugging a C# application? Yes, if you are debugging via Visual Studio.NET, just go to Immediate window. Explain the three services model (three-tier application). Presentation (UI), business (logic and underlying code) and data (from storage or other sources). What are advantages and disadvantages of Microsoft-provided data provider classes in ADO.NET? SQLServer.NET data provider is high-speed and robust, but requires SQL Server license purchased from Microsoft. OLE-DB.NET is universal for accessing other sources, like Oracle, DB2, Microsoft Access and Informix, but it\u2019s a .NET layer on top of OLE layer, so not the fastest thing in the world. ODBC.NET is a deprecated layer provided for backward compatibility to ODBC engines. What\u2019s the role of the DataReader class in ADO.NET connections? It returns a read-only dataset from the data source when the command is executed. What is the wildcard character in SQL? Let\u2019s say you want to query database with LIKE for all employees whose name starts with La. The wildcard character is %, the proper query with LIKE would involve \u2018La%\u2019. Explain ACID rule of thumb for transactions. Transaction must be * Atomic (it is one unit of work and does not dependent on previous and following transactions), * Consistent (data is either committed or roll back, no \u201cin-between\u201d case where something has been updated and something hasn\u2019t), * Isolated (no transaction sees the intermediate results of the current transaction), * Durable (the values persist if the data had been committed even if the system crashes right after). What connections does Microsoft SQL Server support? Windows Authentication (via Active Directory) and SQL Server authentication (via Microsoft SQL Server username and passwords). Which one is trusted and which one is untrusted? Windows Authentication is trusted because the username and password are checked with the Active Directory, the SQL Server authentication is untrusted, since SQL Server is the only verifier participating in the transaction. Why would you use untrusted verificaion? Web Services might use it, as well as non-Windows applications. What does the parameter Initial Catalog define inside Connection String? The database name to connect to. What\u2019s the data provider name to connect to Access database? Microsoft.Access. What does Dispose method do with the connection object? Deletes it from the memory. What is a pre-requisite for connection pooling? Multiple processes must agree that they will share the same connection, where every parameter is the same, including the security settings. What is the difference between a \"where\" clause and a \"having\" clause? \"Where\" is a kind of restriction statement. You use where clause to restrict all the data from DB.Where clause is using before result retrieving. But Having clause is using after retrieving the data.Having clause is a kind of filtering command. What is the basic form of a SQL statement to read data out of a table? The basic form to read data out of table is \u2018SELECT * FROM table_name; \u2018 An answer: \u2018SELECT * FROM table_name WHERE xyz= \u2018whatever\u2019;\u2019 cannot be called basic form because of WHERE clause. What structure can you implement for the database to speed up table reads? Follow the rules of DB tuning we have to: 1. properly use indexes ( different types of indexes) 1. properly locate different DB objects across different table spaces, files and so on. 1. create a special space (table space) to locate some of the data with special datatype ( for example CLOB, LOB and \u2026) What are the tradeoffs with having indexes? Faster selects, slower updates. Extra storage space to store indexes. Updates are slower because in addition to updating the table you have to update the index. What is a \"join\"? \u2018join\u2019 used to connect two or more tables logically with or without common field. What is \"normalization\"? \"Denormalization\"? Why do you sometimes want to denormalize? Normalizing data means eliminating redundant information from a table and organizing the data so that future changes to the table are easier. Denormalization means allowing redundancy in a table. The main benefit of denormalization is improved performance with simplified data retrieval and manipulation. This is done by reduction in the number of joins needed for data processing. What is a \"constraint\"? A constraint allows you to apply simple referential integrity checks to a table. There are four primary types of constraints that are currently supported by SQL Server: * PRIMARY/UNIQUE - enforces uniqueness of a particular table column. * DEFAULT - specifies a default value for a column in case an insert operation does not provide one. * FOREIGN KEY - validates that every value in a column exists in a column of another table. * CHECK - checks that every value stored in a column is in some specified list. Each type of constraint performs a specific type of action. * Default is not a constraint. * NOT NULL is one more constraint which does not allow values in the specific column to be null. And also it the only constraint which is not a table level constraint. What types of index data structures can you have? An index helps to faster search values in tables. The three most commonly used index-types are: - B-Tree: builds a tree of possible values with a list of row IDs that have the leaf value. Needs a lot of space and is the default index type for most databases. - Bitmap: string of bits for each possible value of the column. Each bit string has one bit for each row. Needs only few space and is very fast.(however, domain of value cannot be large, e.g. SEX(m,f); degree(BS,MS,PHD) - Hash: A hashing algorithm is used to assign a set of characters to represent a text string such as a composite of keys or partial keys, and compresses the underlying data. Takes longer to build and is supported by relatively few databases.","title":"dotNET QA"},{"location":"archived/dotnet/dotnet_s01.html#dotnet-qa","text":"","title":"dotNET QA"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-advantage-of-using-systemtextstringbuilder-over-systemstring","text":"StringBuilder is more efficient in the cases, where a lot of manipulation is done to the text. Strings are immutable, so each time it\u2019s being operated on, a new instance is created.","title":"What\u2019s the advantage of using System.Text.StringBuilder over System.String?"},{"location":"archived/dotnet/dotnet_s01.html#can-you-store-multiple-data-types-in-systemarray","text":"No.","title":"Can you store multiple data types in System.Array?"},{"location":"archived/dotnet/dotnet_s01.html#how-can-you-sort-the-elements-of-the-array-in-descending-order","text":"By calling Sort() and then Reverse() methods.","title":"How can you sort the elements of the array in descending order?"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-net-datatype-that-allows-the-retrieval-of-data-by-a-unique-key","text":"HashTable.","title":"What\u2019s the .NET datatype that allows the retrieval of data by a unique key?"},{"location":"archived/dotnet/dotnet_s01.html#whats-class-sortedlist-underneath","text":"A sorted HashTable.","title":"What\u2019s class SortedList underneath?"},{"location":"archived/dotnet/dotnet_s01.html#will-finally-block-get-executed-if-the-exception-had-not-occurred","text":"Yes.","title":"Will finally block get executed if the exception had not occurred?"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-c-equivalent-of-c-catch-which-was-a-catch-all-statement-for-any-possible-exception","text":"A catch block that catches the exception of type System.Exception. You can also omit the parameter data type in this case and just write catch {}.","title":"What\u2019s the C# equivalent of C++ catch (\u2026), which was a catch-all statement for any possible exception?"},{"location":"archived/dotnet/dotnet_s01.html#can-multiple-catch-blocks-be-executed","text":"No, once the proper catch code fires off, the control is transferred to the finally block (if there are any), and then whatever follows the finally block.","title":"Can multiple catch blocks be executed?"},{"location":"archived/dotnet/dotnet_s01.html#why-is-it-a-bad-idea-to-throw-your-own-exceptions","text":"Well, if at that point you know that an error has occurred, then why not write the proper code to handle that error instead of passing a new Exception object to the catch block? Throwing your own exceptions signifies some design flaws in the project.","title":"Why is it a bad idea to throw your own exceptions?"},{"location":"archived/dotnet/dotnet_s01.html#whats-a-delegate","text":"A delegate object encapsulates a reference to a method. In C++ they were referred to as function pointers.","title":"What\u2019s a delegate?"},{"location":"archived/dotnet/dotnet_s01.html#whats-a-multicast-delegate","text":"It\u2019s a delegate that points to and eventually fires off several methods.","title":"What\u2019s a multicast delegate?"},{"location":"archived/dotnet/dotnet_s01.html#hows-the-dll-hell-problem-solved-in-net","text":"Assembly versioning allows the application to specify not only the library it needs to run (which was available under Win32), but also the version of the assembly.","title":"How\u2019s the DLL Hell problem solved in .NET?"},{"location":"archived/dotnet/dotnet_s01.html#what-are-the-ways-to-deploy-an-assembly","text":"An MSI installer, a CAB archive, and XCOPY command.","title":"What are the ways to deploy an assembly?"},{"location":"archived/dotnet/dotnet_s01.html#whats-a-satellite-assembly","text":"When you write a multilingual or multi-cultural application in .NET, and want to distribute the core application separately from the localized modules, the localized assemblies that modify the core application are called satellite assemblies.","title":"What\u2019s a satellite assembly?"},{"location":"archived/dotnet/dotnet_s01.html#what-namespaces-are-necessary-to-create-a-localized-application","text":"System.Globalization, System.Resources.","title":"What namespaces are necessary to create a localized application?"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-difference-between-comments-comments-and-comments","text":"Single-line, multi-line and XML documentation comments.","title":"What\u2019s the difference between // comments, / / comments and /// comments?"},{"location":"archived/dotnet/dotnet_s01.html#how-do-you-generate-documentation-from-the-c-file-commented-properly-with-a-command-line-compiler","text":"Compile it with a /doc switch.","title":"How do you generate documentation from the C# file commented properly with a command-line compiler?"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-difference-between-c-and-code-xml-documentation-tag","text":"Single line code example and multiple-line code example.","title":"What\u2019s the difference between &lt;c&gt; and &lt;code&gt; XML documentation tag?"},{"location":"archived/dotnet/dotnet_s01.html#is-xml-case-sensitive","text":"Yes, so <Student> and <student> are different elements.","title":"Is XML case-sensitive?"},{"location":"archived/dotnet/dotnet_s01.html#what-debugging-tools-come-with-the-net-sdk","text":"CorDBG \u2013 command-line debugger, and DbgCLR \u2013 graphic debugger. Visual Studio .NET uses the DbgCLR. To use CorDbg, you must compile the original C# file using the /debug switch.","title":"What debugging tools come with the .NET SDK?"},{"location":"archived/dotnet/dotnet_s01.html#what-does-the-this-window-show-in-the-debugger","text":"It points to the object that\u2019s pointed to by this reference. Object\u2019s instance data is shown.","title":"What does the This window show in the debugger?"},{"location":"archived/dotnet/dotnet_s01.html#what-does-assert-do","text":"In debug compilation, assert takes in a Boolean condition as a parameter, and shows the error dialog if the condition is false. The program proceeds without any interruption if the condition is true.","title":"What does assert() do?"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-difference-between-the-debug-class-and-trace-class-documentation-looks-the-same","text":"Use Debug class for debug builds, use Trace class for both debug and release builds.","title":"What\u2019s the difference between the Debug class and Trace class? Documentation looks the same."},{"location":"archived/dotnet/dotnet_s01.html#why-are-there-five-tracing-levels-in-systemdiagnosticstraceswitcher","text":"The tracing dumps can be quite verbose and for some applications that are constantly running you run the risk of overloading the machine and the hard drive there. Five levels range from None to Verbose, allowing to fine-tune the tracing activities.","title":"Why are there five tracing levels in System.Diagnostics.TraceSwitcher?"},{"location":"archived/dotnet/dotnet_s01.html#where-is-the-output-of-textwritertracelistener-redirected","text":"To the Console or a text file depending on the parameter passed to the constructor.","title":"Where is the output of TextWriterTraceListener redirected?"},{"location":"archived/dotnet/dotnet_s01.html#how-do-you-debug-an-aspnet-web-application","text":"Attach the aspnet_wp.exe process to the DbgClr debugger.","title":"How do you debug an ASP.NET Web application?"},{"location":"archived/dotnet/dotnet_s01.html#what-are-three-test-cases-you-should-go-through-in-unit-testing","text":"Positive test cases (correct data, correct output), negative test cases (broken or missing data, proper handling), exception test cases (exceptions are thrown and caught properly).","title":"What are three test cases you should go through in unit testing?"},{"location":"archived/dotnet/dotnet_s01.html#can-you-change-the-value-of-a-variable-while-debugging-a-c-application","text":"Yes, if you are debugging via Visual Studio.NET, just go to Immediate window.","title":"Can you change the value of a variable while debugging a C# application?"},{"location":"archived/dotnet/dotnet_s01.html#explain-the-three-services-model-three-tier-application","text":"Presentation (UI), business (logic and underlying code) and data (from storage or other sources).","title":"Explain the three services model (three-tier application)."},{"location":"archived/dotnet/dotnet_s01.html#what-are-advantages-and-disadvantages-of-microsoft-provided-data-provider-classes-in-adonet","text":"SQLServer.NET data provider is high-speed and robust, but requires SQL Server license purchased from Microsoft. OLE-DB.NET is universal for accessing other sources, like Oracle, DB2, Microsoft Access and Informix, but it\u2019s a .NET layer on top of OLE layer, so not the fastest thing in the world. ODBC.NET is a deprecated layer provided for backward compatibility to ODBC engines.","title":"What are advantages and disadvantages of Microsoft-provided data provider classes in ADO.NET?"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-role-of-the-datareader-class-in-adonet-connections","text":"It returns a read-only dataset from the data source when the command is executed.","title":"What\u2019s the role of the DataReader class in ADO.NET connections?"},{"location":"archived/dotnet/dotnet_s01.html#what-is-the-wildcard-character-in-sql-lets-say-you-want-to-query-database-with-like-for-all-employees-whose-name-starts-with-la","text":"The wildcard character is %, the proper query with LIKE would involve \u2018La%\u2019.","title":"What is the wildcard character in SQL? Let\u2019s say you want to query database with LIKE for all employees whose name starts with La."},{"location":"archived/dotnet/dotnet_s01.html#explain-acid-rule-of-thumb-for-transactions","text":"Transaction must be * Atomic (it is one unit of work and does not dependent on previous and following transactions), * Consistent (data is either committed or roll back, no \u201cin-between\u201d case where something has been updated and something hasn\u2019t), * Isolated (no transaction sees the intermediate results of the current transaction), * Durable (the values persist if the data had been committed even if the system crashes right after).","title":"Explain ACID rule of thumb for transactions."},{"location":"archived/dotnet/dotnet_s01.html#what-connections-does-microsoft-sql-server-support","text":"Windows Authentication (via Active Directory) and SQL Server authentication (via Microsoft SQL Server username and passwords).","title":"What connections does Microsoft SQL Server support?"},{"location":"archived/dotnet/dotnet_s01.html#which-one-is-trusted-and-which-one-is-untrusted","text":"Windows Authentication is trusted because the username and password are checked with the Active Directory, the SQL Server authentication is untrusted, since SQL Server is the only verifier participating in the transaction.","title":"Which one is trusted and which one is untrusted?"},{"location":"archived/dotnet/dotnet_s01.html#why-would-you-use-untrusted-verificaion","text":"Web Services might use it, as well as non-Windows applications.","title":"Why would you use untrusted verificaion?"},{"location":"archived/dotnet/dotnet_s01.html#what-does-the-parameter-initial-catalog-define-inside-connection-string","text":"The database name to connect to.","title":"What does the parameter Initial Catalog define inside Connection String?"},{"location":"archived/dotnet/dotnet_s01.html#whats-the-data-provider-name-to-connect-to-access-database","text":"Microsoft.Access.","title":"What\u2019s the data provider name to connect to Access database?"},{"location":"archived/dotnet/dotnet_s01.html#what-does-dispose-method-do-with-the-connection-object","text":"Deletes it from the memory.","title":"What does Dispose method do with the connection object?"},{"location":"archived/dotnet/dotnet_s01.html#what-is-a-pre-requisite-for-connection-pooling","text":"Multiple processes must agree that they will share the same connection, where every parameter is the same, including the security settings.","title":"What is a pre-requisite for connection pooling?"},{"location":"archived/dotnet/dotnet_s01.html#what-is-the-difference-between-a-where-clause-and-a-having-clause","text":"\"Where\" is a kind of restriction statement. You use where clause to restrict all the data from DB.Where clause is using before result retrieving. But Having clause is using after retrieving the data.Having clause is a kind of filtering command.","title":"What is the difference between a \"where\" clause and a \"having\" clause?"},{"location":"archived/dotnet/dotnet_s01.html#what-is-the-basic-form-of-a-sql-statement-to-read-data-out-of-a-table","text":"The basic form to read data out of table is \u2018SELECT * FROM table_name; \u2018 An answer: \u2018SELECT * FROM table_name WHERE xyz= \u2018whatever\u2019;\u2019 cannot be called basic form because of WHERE clause.","title":"What is the basic form of a SQL statement to read data out of a table?"},{"location":"archived/dotnet/dotnet_s01.html#what-structure-can-you-implement-for-the-database-to-speed-up-table-reads","text":"Follow the rules of DB tuning we have to: 1. properly use indexes ( different types of indexes) 1. properly locate different DB objects across different table spaces, files and so on. 1. create a special space (table space) to locate some of the data with special datatype ( for example CLOB, LOB and \u2026)","title":"What structure can you implement for the database to speed up table reads?"},{"location":"archived/dotnet/dotnet_s01.html#what-are-the-tradeoffs-with-having-indexes","text":"Faster selects, slower updates. Extra storage space to store indexes. Updates are slower because in addition to updating the table you have to update the index.","title":"What are the tradeoffs with having indexes?"},{"location":"archived/dotnet/dotnet_s01.html#what-is-a-join","text":"\u2018join\u2019 used to connect two or more tables logically with or without common field.","title":"What is a \"join\"?"},{"location":"archived/dotnet/dotnet_s01.html#what-is-normalization-denormalization-why-do-you-sometimes-want-to-denormalize","text":"Normalizing data means eliminating redundant information from a table and organizing the data so that future changes to the table are easier. Denormalization means allowing redundancy in a table. The main benefit of denormalization is improved performance with simplified data retrieval and manipulation. This is done by reduction in the number of joins needed for data processing.","title":"What is \"normalization\"? \"Denormalization\"? Why do you sometimes want to denormalize?"},{"location":"archived/dotnet/dotnet_s01.html#what-is-a-constraint","text":"A constraint allows you to apply simple referential integrity checks to a table. There are four primary types of constraints that are currently supported by SQL Server: * PRIMARY/UNIQUE - enforces uniqueness of a particular table column. * DEFAULT - specifies a default value for a column in case an insert operation does not provide one. * FOREIGN KEY - validates that every value in a column exists in a column of another table. * CHECK - checks that every value stored in a column is in some specified list. Each type of constraint performs a specific type of action. * Default is not a constraint. * NOT NULL is one more constraint which does not allow values in the specific column to be null. And also it the only constraint which is not a table level constraint.","title":"What is a \"constraint\"?"},{"location":"archived/dotnet/dotnet_s01.html#what-types-of-index-data-structures-can-you-have","text":"An index helps to faster search values in tables. The three most commonly used index-types are: - B-Tree: builds a tree of possible values with a list of row IDs that have the leaf value. Needs a lot of space and is the default index type for most databases. - Bitmap: string of bits for each possible value of the column. Each bit string has one bit for each row. Needs only few space and is very fast.(however, domain of value cannot be large, e.g. SEX(m,f); degree(BS,MS,PHD) - Hash: A hashing algorithm is used to assign a set of characters to represent a text string such as a composite of keys or partial keys, and compresses the underlying data. Takes longer to build and is supported by relatively few databases.","title":"What types of index data structures can you have?"},{"location":"archived/golang/golang_s01.html","text":"Environment Setup Install golang https://github.com/jenac/playground/blob/master/ubuntu1604/golang-1.10.sh Set Environment Variables 1 2 export GOPATH=/home/lihe/go export PATH=$PATH:$GOPATH/bin Folder Structure 1 2 3 4 mkdir -p ~/go mkdir -p ~/go/src/github.com/jenac/hello mkdir -p ~/go/pkg mkdir -p ~/go/bin Install All Project Dependencies 1 go get ./... Misc comamnd 1 2 3 go get <package name> go build go install","title":"Environment Setup"},{"location":"archived/golang/golang_s01.html#environment-setup","text":"","title":"Environment Setup"},{"location":"archived/golang/golang_s01.html#install-golang","text":"https://github.com/jenac/playground/blob/master/ubuntu1604/golang-1.10.sh","title":"Install golang"},{"location":"archived/golang/golang_s01.html#set-environment-variables","text":"1 2 export GOPATH=/home/lihe/go export PATH=$PATH:$GOPATH/bin","title":"Set Environment Variables"},{"location":"archived/golang/golang_s01.html#folder-structure","text":"1 2 3 4 mkdir -p ~/go mkdir -p ~/go/src/github.com/jenac/hello mkdir -p ~/go/pkg mkdir -p ~/go/bin","title":"Folder Structure"},{"location":"archived/golang/golang_s01.html#install-all-project-dependencies","text":"1 go get ./...","title":"Install All Project Dependencies"},{"location":"archived/golang/golang_s01.html#misc-comamnd","text":"1 2 3 go get <package name> go build go install","title":"Misc comamnd"},{"location":"archived/kotlin/kotlin_s00.html","text":"Programming with Objects Interfaces classes and interfaces defined in a similar way to Java public by default 1 2 3 4 5 6 7 interface Signatory { fun sign () } class Person : Signatory { override fun sign () {} } Classes Primary Constructor defined in-line no new keyword 1 2 3 class Person ( val : name : String ) val kevin = Person ( \"Kevin\" ) Properties val is immutable, provides get method var is mutable, getters and setters 1 class Person ( val name : String , var age : Int ) Open classes are final by default(unlike Java). open make it can be derived 1 2 3 4 5 6 7 8 9 10 11 interface Signatory { fun sign () } open class Person ( val name : String , var age : Int ) : Signatory { override fun sign () = println ( \" $ name aged $ age can sign documents\" ) } class Student ( name : String , age : Int ): Person ( name , age ) { } Init init block runs after object is constructed 1 2 3 open class Person ( val name : String , var age : Int ) { init () { } } Secondary Constructors can provide more than one constructor 1 2 3 4 5 6 open class Person ( val name : String , var age : Int ){ var isMarried : Boolean constructor ( name : String , age : Int , isMarried : Boolean ): this ( name , age ) { this . isMarried = isMarried } } no val or var for secondary constructor params. Prefer default values only provide more than one constructor if you are deriving from a class that requires it. 1 2 3 open class Person ( val name : String , var age : Int , var isMarried : Boolean = false ) { ... } Companion Objects No statics in Kotlin use the companion object instead 1 2 3 4 5 6 7 8 class Program { companion object { @JvmStatic //? fun main ( val args : Array < String > ) { } } } The companion objects are singletons within our class definition, so we can associate data and functionality across all our instances of a class. Properties declare member in class Data Classes Data Classes classes only hold data data keyword Kotlin provides equals, hashCode, toString (and other) functions 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 data class User ( var name : String , var last : String ) class Person ( var first : String , val last : String ) fun main ( args : Array < String > ) { val tom = User ( \"tom\" , \"peter\" ) println ( tom ) tom . last = \"kk\" tom . name = \"was\" println ( tom ) val p = Person ( \"1\" , \"2\" ) println ( p ) p . first = \"CCC\" //p.last = \"WWW\" //last is readonly println ( p ) }","title":"Programming with Objects"},{"location":"archived/kotlin/kotlin_s00.html#programming-with-objects","text":"","title":"Programming with Objects"},{"location":"archived/kotlin/kotlin_s00.html#interfaces","text":"","title":"Interfaces"},{"location":"archived/kotlin/kotlin_s00.html#classes-and-interfaces","text":"defined in a similar way to Java public by default 1 2 3 4 5 6 7 interface Signatory { fun sign () } class Person : Signatory { override fun sign () {} }","title":"classes and interfaces"},{"location":"archived/kotlin/kotlin_s00.html#classes","text":"","title":"Classes"},{"location":"archived/kotlin/kotlin_s00.html#primary-constructor","text":"defined in-line no new keyword 1 2 3 class Person ( val : name : String ) val kevin = Person ( \"Kevin\" )","title":"Primary Constructor"},{"location":"archived/kotlin/kotlin_s00.html#properties","text":"val is immutable, provides get method var is mutable, getters and setters 1 class Person ( val name : String , var age : Int )","title":"Properties"},{"location":"archived/kotlin/kotlin_s00.html#open","text":"classes are final by default(unlike Java). open make it can be derived 1 2 3 4 5 6 7 8 9 10 11 interface Signatory { fun sign () } open class Person ( val name : String , var age : Int ) : Signatory { override fun sign () = println ( \" $ name aged $ age can sign documents\" ) } class Student ( name : String , age : Int ): Person ( name , age ) { }","title":"Open"},{"location":"archived/kotlin/kotlin_s00.html#init","text":"init block runs after object is constructed 1 2 3 open class Person ( val name : String , var age : Int ) { init () { } }","title":"Init"},{"location":"archived/kotlin/kotlin_s00.html#secondary-constructors","text":"can provide more than one constructor 1 2 3 4 5 6 open class Person ( val name : String , var age : Int ){ var isMarried : Boolean constructor ( name : String , age : Int , isMarried : Boolean ): this ( name , age ) { this . isMarried = isMarried } } no val or var for secondary constructor params.","title":"Secondary Constructors"},{"location":"archived/kotlin/kotlin_s00.html#prefer-default-values","text":"only provide more than one constructor if you are deriving from a class that requires it. 1 2 3 open class Person ( val name : String , var age : Int , var isMarried : Boolean = false ) { ... }","title":"Prefer default values"},{"location":"archived/kotlin/kotlin_s00.html#companion-objects","text":"","title":"Companion Objects"},{"location":"archived/kotlin/kotlin_s00.html#no-statics-in-kotlin","text":"use the companion object instead 1 2 3 4 5 6 7 8 class Program { companion object { @JvmStatic //? fun main ( val args : Array < String > ) { } } } The companion objects are singletons within our class definition, so we can associate data and functionality across all our instances of a class.","title":"No statics in Kotlin"},{"location":"archived/kotlin/kotlin_s00.html#properties_1","text":"declare member in class","title":"Properties"},{"location":"archived/kotlin/kotlin_s00.html#data-classes","text":"","title":"Data Classes"},{"location":"archived/kotlin/kotlin_s00.html#data-classes_1","text":"classes only hold data data keyword Kotlin provides equals, hashCode, toString (and other) functions 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 data class User ( var name : String , var last : String ) class Person ( var first : String , val last : String ) fun main ( args : Array < String > ) { val tom = User ( \"tom\" , \"peter\" ) println ( tom ) tom . last = \"kk\" tom . name = \"was\" println ( tom ) val p = Person ( \"1\" , \"2\" ) println ( p ) p . first = \"CCC\" //p.last = \"WWW\" //last is readonly println ( p ) }","title":"Data Classes"},{"location":"archived/kotlin/kotlin_s01.html","text":"Starting with Kotlin to speed up comile, in build.gradle add the following: 1 kotlin.incremental=true Kotlin Basics val and var Type inference compile tries to figure out the type: 1 val someLong = 123456L Basic Types Numbers : Long, Int, Short, Byte, Double, Float Bitwise operation: 1 2 3 4 5 6 7 8 val leftShift = 1 shl 2 val rightShift = 1 shr 2 val unsignedRightShift = 1 ushr 2 val and = 1 and 0 x00001111 val or = 1 or 0 x00001111 val xor = 1 xor 0 x00001111 val inv = 1. inv () Boolean Chars Strings Arrays 1 2 val array = arrayOf ( 1 , 2 , 3 ) val perfectSquares = Array ( 10 , { k -> k * k }) //size and generator * to avoid boxing use: ByteArray, CharArray, ShortArray, IntArray, LongArray, BooleanArray, FloatArray, DoubleArray Comments Packages Imports Wildcard Imports Import Renaming 1 import com.jenac.here as there String templates / interpolation 1 \"hi, this is ${ someVariableValue } \" Ranges 1 2 3 4 val aToZ = \"a\" .. \"z\" val isTure = \"c\" in aToZ val oneToNine = 1. . 9 val isFalse = 11 in oneToNine * downTo(), rangeTo() 1 2 val countingDown = 100. downTo ( 2 ) val rangeTo = 10. rangeTo ( 20 ) step() 1 2 val oneToFifty = 1. . 50 val oddNumbers = oneToFifty . step ( 2 ) reversed() 1 val countingDownEvenNumbers = ( 2. . 100 ). step ( 2 ). reversed () Loops while 1 2 3 while ( true ) { ... } for 1 2 3 4 5 6 7 8 9 10 11 12 13 val list = listOf ( 1 , 2 , 3 , 4 ) for ( k in list ) { ... } val set = setOf ( 1 , 2 ) for ( s in set ) { ... } for ( a in 1. . 50 ) { ... } ranges are handled by index for better performance for works on any iterable Array can also use indices extension 1 2 3 for ( index in array . indices ) { println ( \"element $ index is ${ array [ index ] } )\" ) } Exception Handling all exceptions in kotlin is unchecked Instantiating Classes no new key word 1 val file = File ( \"someFolder/someFile\" ) Referential equality and Structual equality referential equality: use === or !== structual equality: use == or != This expression In member of class, this refers to the class instance In extensions, this refers to the instance that extension function was applied to: 1 2 3 4 5 6 7 8 class C { ... } fun C ?. toString () { if ( this == null ) return \"null\" return \"the actual value\" } Scope label 1 2 3 4 5 class Building ( val address : String ) { inner class Reception ( telephone : String ) { fun printAddress () = println ( this @Building.address ) } } Visibility modifiers private private top level function, class, interface only visible within the same file in class, only visible within the class protected not allowed for top level internal visible in same module Control flow as expression expression vs statement: expression is evaluable, statement is not if...else and try...catch are expressions 1 2 3 4 5 6 7 8 9 10 11 12 13 val date = Date () val today = if ( date . year == 2018 ) true else false fun isZero ( x : Int ): Boolean { return if ( x == 0 ) true else false } val success = try { readFile () true } catch ( e : IOException ) { false } when use if as expression, must have else to cover all the cases Null syntax nullable must explicit: 1 2 val s : String? = null //ok val s : String = null //compile error is for type checking: 1 2 3 fun isString ( any : Any ): Boolean { return if ( any is String ) true else false } smart cast compiler is intelligent to figure out type: 1 2 3 4 5 6 7 8 //when check length, compiler can tell any is String fun isEmptyString ( any : Any ): Boolean { return any is String && any . length == 0 } fun isNotStringOrEmpty ( any : Any ): Boolean { return any !is String || any . length == 0 } explicit casting as 1 val s = any as String if cannot cast, ClassCastException will be thrown if want return null when cannot cast, declare with nullable: 1 2 3 val any = \"someFolder/someFile\" val string : String? = any as String //ok, success cast val file : File? = any as File //ok, file is null now. When expression when (value) like switch in Java 1 2 3 4 5 6 7 fun what ( x : Int ) { when ( x ) { 0 -> println ( \"zero\" ) 1 -> println ( \"one\" ) else -> println ( \"ok\" ) } } when must cover all the cases, use else or make sure all cases are covered. use as an expression 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 fun isMinOrMax ( x : Int ): Boolean { val isIt = when ( x ) { Int . MAX_VALUE -> true Int . MIN_VALUE -> true else -> false } return isIt } //this is better fun isZeroOrOne ( x : Int ): Boolean { return when ( x ) { 0 , 1 -> true else -> false } } use function as a case 1 2 3 4 5 6 fun isAbs ( x : Int ): Boolean { return when ( x ) { Math . abs ( x ) -> true else -> false } } use range 1 2 3 4 5 6 fun isSingleDigit ( x : Int ): Boolean { return when ( x ) { in - 9. . 9 -> true else -> false } } in list 1 2 3 4 5 6 fun isDieNumber ( x : Int ): Boolean { return when ( x ) { in lisfOf ( 1 , 2 , 3 , 4 , 5 , 6 ) -> true else -> false } } type checking 1 2 3 4 5 6 fun startsWithFoo ( any : Any ): Boolean { return when ( any ) { is String -> any . startsWith ( \"Foo\" ) else -> false } } when without argument if ... else like style 1 2 3 4 5 6 7 fun whenWithoutArgs ( x : Int , y : Int ) { when { x < y -> println ( \"x is less than y\" ) x > y -> println ( \"x is greater than y\" ) else -> println ( \"x == y\" ) } } Function return By default, return returns from the nearest enclosing function or anonymous function. 1 2 3 4 5 6 7 8 9 fun printLessThanTwo () { val list = listOf ( 1 , 2 , 3 , 4 ) list . forEach { fun ( x ) { if ( x < 2 ) println ( x ) else return //just return the internal function } println ( \"this line still prints for 3 and 4\" ) } } use label to return outside function 1 2 3 4 5 6 7 fun printUntilStop () { val list = listOf ( \"a\" , \"b\" , \"stop\" , \"c\" ) list . forEach { if ( it == \"stop\" ) return @forEach else println ( it ) } } Type hierarchy Any is like Object in Java, it is base class for all others types. It defines toString , hashCode , equals , apply , let , to . Unit like void , but it is a singleton Nothing is subclass for all other types","title":"Starting with Kotlin"},{"location":"archived/kotlin/kotlin_s01.html#starting-with-kotlin","text":"to speed up comile, in build.gradle add the following: 1 kotlin.incremental=true","title":"Starting with Kotlin"},{"location":"archived/kotlin/kotlin_s01.html#kotlin-basics","text":"","title":"Kotlin Basics"},{"location":"archived/kotlin/kotlin_s01.html#val-and-var","text":"","title":"val and var"},{"location":"archived/kotlin/kotlin_s01.html#type-inference","text":"compile tries to figure out the type: 1 val someLong = 123456L","title":"Type inference"},{"location":"archived/kotlin/kotlin_s01.html#basic-types","text":"","title":"Basic Types"},{"location":"archived/kotlin/kotlin_s01.html#numbers-long-int-short-byte-double-float","text":"Bitwise operation: 1 2 3 4 5 6 7 8 val leftShift = 1 shl 2 val rightShift = 1 shr 2 val unsignedRightShift = 1 ushr 2 val and = 1 and 0 x00001111 val or = 1 or 0 x00001111 val xor = 1 xor 0 x00001111 val inv = 1. inv ()","title":"Numbers : Long, Int, Short, Byte, Double, Float"},{"location":"archived/kotlin/kotlin_s01.html#boolean","text":"","title":"Boolean"},{"location":"archived/kotlin/kotlin_s01.html#chars","text":"","title":"Chars"},{"location":"archived/kotlin/kotlin_s01.html#strings","text":"","title":"Strings"},{"location":"archived/kotlin/kotlin_s01.html#arrays","text":"1 2 val array = arrayOf ( 1 , 2 , 3 ) val perfectSquares = Array ( 10 , { k -> k * k }) //size and generator * to avoid boxing use: ByteArray, CharArray, ShortArray, IntArray, LongArray, BooleanArray, FloatArray, DoubleArray","title":"Arrays"},{"location":"archived/kotlin/kotlin_s01.html#comments","text":"","title":"Comments"},{"location":"archived/kotlin/kotlin_s01.html#packages","text":"","title":"Packages"},{"location":"archived/kotlin/kotlin_s01.html#imports","text":"","title":"Imports"},{"location":"archived/kotlin/kotlin_s01.html#wildcard-imports","text":"","title":"Wildcard Imports"},{"location":"archived/kotlin/kotlin_s01.html#import-renaming","text":"1 import com.jenac.here as there","title":"Import Renaming"},{"location":"archived/kotlin/kotlin_s01.html#string-templates-interpolation","text":"1 \"hi, this is ${ someVariableValue } \"","title":"String templates / interpolation"},{"location":"archived/kotlin/kotlin_s01.html#ranges","text":"1 2 3 4 val aToZ = \"a\" .. \"z\" val isTure = \"c\" in aToZ val oneToNine = 1. . 9 val isFalse = 11 in oneToNine * downTo(), rangeTo() 1 2 val countingDown = 100. downTo ( 2 ) val rangeTo = 10. rangeTo ( 20 ) step() 1 2 val oneToFifty = 1. . 50 val oddNumbers = oneToFifty . step ( 2 ) reversed() 1 val countingDownEvenNumbers = ( 2. . 100 ). step ( 2 ). reversed ()","title":"Ranges"},{"location":"archived/kotlin/kotlin_s01.html#loops","text":"while 1 2 3 while ( true ) { ... } for 1 2 3 4 5 6 7 8 9 10 11 12 13 val list = listOf ( 1 , 2 , 3 , 4 ) for ( k in list ) { ... } val set = setOf ( 1 , 2 ) for ( s in set ) { ... } for ( a in 1. . 50 ) { ... } ranges are handled by index for better performance for works on any iterable Array can also use indices extension 1 2 3 for ( index in array . indices ) { println ( \"element $ index is ${ array [ index ] } )\" ) }","title":"Loops"},{"location":"archived/kotlin/kotlin_s01.html#exception-handling","text":"all exceptions in kotlin is unchecked","title":"Exception Handling"},{"location":"archived/kotlin/kotlin_s01.html#instantiating-classes","text":"no new key word 1 val file = File ( \"someFolder/someFile\" )","title":"Instantiating Classes"},{"location":"archived/kotlin/kotlin_s01.html#referential-equality-and-structual-equality","text":"referential equality: use === or !== structual equality: use == or !=","title":"Referential equality and Structual equality"},{"location":"archived/kotlin/kotlin_s01.html#this-expression","text":"In member of class, this refers to the class instance In extensions, this refers to the instance that extension function was applied to: 1 2 3 4 5 6 7 8 class C { ... } fun C ?. toString () { if ( this == null ) return \"null\" return \"the actual value\" }","title":"This expression"},{"location":"archived/kotlin/kotlin_s01.html#scope","text":"label 1 2 3 4 5 class Building ( val address : String ) { inner class Reception ( telephone : String ) { fun printAddress () = println ( this @Building.address ) } }","title":"Scope"},{"location":"archived/kotlin/kotlin_s01.html#visibility-modifiers","text":"","title":"Visibility modifiers"},{"location":"archived/kotlin/kotlin_s01.html#private","text":"private top level function, class, interface only visible within the same file in class, only visible within the class","title":"private"},{"location":"archived/kotlin/kotlin_s01.html#protected","text":"not allowed for top level","title":"protected"},{"location":"archived/kotlin/kotlin_s01.html#internal","text":"visible in same module","title":"internal"},{"location":"archived/kotlin/kotlin_s01.html#control-flow-as-expression","text":"expression vs statement: expression is evaluable, statement is not if...else and try...catch are expressions 1 2 3 4 5 6 7 8 9 10 11 12 13 val date = Date () val today = if ( date . year == 2018 ) true else false fun isZero ( x : Int ): Boolean { return if ( x == 0 ) true else false } val success = try { readFile () true } catch ( e : IOException ) { false } when use if as expression, must have else to cover all the cases","title":"Control flow as expression"},{"location":"archived/kotlin/kotlin_s01.html#null-syntax","text":"nullable must explicit: 1 2 val s : String? = null //ok val s : String = null //compile error is for type checking: 1 2 3 fun isString ( any : Any ): Boolean { return if ( any is String ) true else false }","title":"Null syntax"},{"location":"archived/kotlin/kotlin_s01.html#smart-cast","text":"compiler is intelligent to figure out type: 1 2 3 4 5 6 7 8 //when check length, compiler can tell any is String fun isEmptyString ( any : Any ): Boolean { return any is String && any . length == 0 } fun isNotStringOrEmpty ( any : Any ): Boolean { return any !is String || any . length == 0 }","title":"smart cast"},{"location":"archived/kotlin/kotlin_s01.html#explicit-casting","text":"as 1 val s = any as String if cannot cast, ClassCastException will be thrown if want return null when cannot cast, declare with nullable: 1 2 3 val any = \"someFolder/someFile\" val string : String? = any as String //ok, success cast val file : File? = any as File //ok, file is null now.","title":"explicit casting"},{"location":"archived/kotlin/kotlin_s01.html#when-expression","text":"","title":"When expression"},{"location":"archived/kotlin/kotlin_s01.html#when-value","text":"like switch in Java 1 2 3 4 5 6 7 fun what ( x : Int ) { when ( x ) { 0 -> println ( \"zero\" ) 1 -> println ( \"one\" ) else -> println ( \"ok\" ) } } when must cover all the cases, use else or make sure all cases are covered. use as an expression 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 fun isMinOrMax ( x : Int ): Boolean { val isIt = when ( x ) { Int . MAX_VALUE -> true Int . MIN_VALUE -> true else -> false } return isIt } //this is better fun isZeroOrOne ( x : Int ): Boolean { return when ( x ) { 0 , 1 -> true else -> false } } use function as a case 1 2 3 4 5 6 fun isAbs ( x : Int ): Boolean { return when ( x ) { Math . abs ( x ) -> true else -> false } } use range 1 2 3 4 5 6 fun isSingleDigit ( x : Int ): Boolean { return when ( x ) { in - 9. . 9 -> true else -> false } } in list 1 2 3 4 5 6 fun isDieNumber ( x : Int ): Boolean { return when ( x ) { in lisfOf ( 1 , 2 , 3 , 4 , 5 , 6 ) -> true else -> false } } type checking 1 2 3 4 5 6 fun startsWithFoo ( any : Any ): Boolean { return when ( any ) { is String -> any . startsWith ( \"Foo\" ) else -> false } }","title":"when (value)"},{"location":"archived/kotlin/kotlin_s01.html#when-without-argument","text":"if ... else like style 1 2 3 4 5 6 7 fun whenWithoutArgs ( x : Int , y : Int ) { when { x < y -> println ( \"x is less than y\" ) x > y -> println ( \"x is greater than y\" ) else -> println ( \"x == y\" ) } }","title":"when without argument"},{"location":"archived/kotlin/kotlin_s01.html#function-return","text":"By default, return returns from the nearest enclosing function or anonymous function. 1 2 3 4 5 6 7 8 9 fun printLessThanTwo () { val list = listOf ( 1 , 2 , 3 , 4 ) list . forEach { fun ( x ) { if ( x < 2 ) println ( x ) else return //just return the internal function } println ( \"this line still prints for 3 and 4\" ) } } use label to return outside function 1 2 3 4 5 6 7 fun printUntilStop () { val list = listOf ( \"a\" , \"b\" , \"stop\" , \"c\" ) list . forEach { if ( it == \"stop\" ) return @forEach else println ( it ) } }","title":"Function return"},{"location":"archived/kotlin/kotlin_s01.html#type-hierarchy","text":"Any is like Object in Java, it is base class for all others types. It defines toString , hashCode , equals , apply , let , to . Unit like void , but it is a singleton Nothing is subclass for all other types","title":"Type hierarchy"},{"location":"archived/kotlin/kotlin_s02.html","text":"OOP in Kotlin Classes By default empty constructor will be generated 1 class Deposit { } Primary constructor 1 class Person ( val name : String , val age : Int ) { } unless you want, no constructor keyword needed, the follwing case you need it: 1 class Database internal constructor ( connection : Connection ) { } //internal constructor construction code placed in init method: 1 2 3 4 5 6 7 8 9 10 11 12 13 class Persion ( val name : String , val age : Int? ) { init { require ( name . trim (). length > 0 ) { \"invalid name\" } //require will throw illegalArgumentException, if the expression is false if ( age != null ) { require ( age > 0 && age < 150 ) { \"invalid age\" } } } } //name, age are properties //var: read/write //val: readonly if no var or val in constructor argument, no property generated: 1 2 3 4 5 6 7 8 9 10 11 class Person2 ( firstName : String , lastName : String , howOld : Int? ) { private val name : String private val age : Int? init { this . name = \" $ firstName , $ lastName \" this . age = howOld } fun getName (): String = this . name fun getAge (): Int? = this . age } Access Levels internal : within module private : within file or same class protected : sub classes Nested Classes keyword inner make nested class private Data Classes simlimar to POJO, simply hold data when use with JPA, use gradle plug in kotlin-jpa to generate default construct Enum Classes simple 1 enum class Day { MON , TUE , WED , THU , FRI , SAT , SUN } with data 1 2 3 4 5 6 enum class Planet ( val mass : Double , val radius : Double ) { MECURY ( 3.3 + e23 , 2.4 e6 ), EARTH ( 5.97 + e24 , 6.3 e6 ) } Planet . valueOf ( \"EARTH\" ) //String to enum Planet . values () //list all values implement interface 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 interface Printable { fun print (): Uint } public enum class Word : Printable { HELLO { override fun print () { ... } }, BYE { override fun print () { ... } } } Static methods and companion object no static keyword in kotlin top level / package level function compiles to static method with a final class which compiled from the kotlin file top level / package level object compiles to static class instance, its method compiles to static method. companion object: class + top level object Interfaces 1 2 3 4 5 6 7 8 9 10 11 interface Doc { //properties val version : String val size : Long val name : String get () = \"No Name\" //default implementation fun save ( input : InputStream ) fun getDescription (): String { return \"simple doc\" ; } //default implementation } Inherientance open keyword means allwo to derive, by default is open only inherient from one class , but multple interfaces no need to list class first 1 2 3 class C : IA , B , ID { } //IA, ID interfaces //B, class Visibility modifiers Abstract classes Polymorphism implicit open explicit override can override property: 1 2 3 4 5 6 7 8 9 10 11 open class Base { open val prop1 : String get () = \"Base::value\" } class Derived : Base () { override val prop1 : String get () = \"Derived::value\" } class Another ( override val prop1 : String ): Base () { } can override val to var , but not the reverse way. Inheritance vs composition Class delegation Sealed classes sealed class in kotlin is an abstract class, which can be extended by subclasses defined as nested classes within the sealed class itself. 1 2 3 4 5 6 7 8 9 sealed class IntBinaryTree { class EmptyNode : IntBinaryTree () class IntBinaryTreeNode ( val ...) { } } //usage: val tree = IntBinaryTree . IntBinaryTreeNode (...)","title":"OOP in Kotlin"},{"location":"archived/kotlin/kotlin_s02.html#oop-in-kotlin","text":"","title":"OOP in Kotlin"},{"location":"archived/kotlin/kotlin_s02.html#classes","text":"By default empty constructor will be generated 1 class Deposit { } Primary constructor 1 class Person ( val name : String , val age : Int ) { } unless you want, no constructor keyword needed, the follwing case you need it: 1 class Database internal constructor ( connection : Connection ) { } //internal constructor construction code placed in init method: 1 2 3 4 5 6 7 8 9 10 11 12 13 class Persion ( val name : String , val age : Int? ) { init { require ( name . trim (). length > 0 ) { \"invalid name\" } //require will throw illegalArgumentException, if the expression is false if ( age != null ) { require ( age > 0 && age < 150 ) { \"invalid age\" } } } } //name, age are properties //var: read/write //val: readonly if no var or val in constructor argument, no property generated: 1 2 3 4 5 6 7 8 9 10 11 class Person2 ( firstName : String , lastName : String , howOld : Int? ) { private val name : String private val age : Int? init { this . name = \" $ firstName , $ lastName \" this . age = howOld } fun getName (): String = this . name fun getAge (): Int? = this . age }","title":"Classes"},{"location":"archived/kotlin/kotlin_s02.html#access-levels","text":"internal : within module private : within file or same class protected : sub classes","title":"Access Levels"},{"location":"archived/kotlin/kotlin_s02.html#nested-classes","text":"keyword inner make nested class private","title":"Nested Classes"},{"location":"archived/kotlin/kotlin_s02.html#data-classes","text":"simlimar to POJO, simply hold data when use with JPA, use gradle plug in kotlin-jpa to generate default construct","title":"Data Classes"},{"location":"archived/kotlin/kotlin_s02.html#enum-classes","text":"simple 1 enum class Day { MON , TUE , WED , THU , FRI , SAT , SUN } with data 1 2 3 4 5 6 enum class Planet ( val mass : Double , val radius : Double ) { MECURY ( 3.3 + e23 , 2.4 e6 ), EARTH ( 5.97 + e24 , 6.3 e6 ) } Planet . valueOf ( \"EARTH\" ) //String to enum Planet . values () //list all values implement interface 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 interface Printable { fun print (): Uint } public enum class Word : Printable { HELLO { override fun print () { ... } }, BYE { override fun print () { ... } } }","title":"Enum Classes"},{"location":"archived/kotlin/kotlin_s02.html#static-methods-and-companion-object","text":"no static keyword in kotlin top level / package level function compiles to static method with a final class which compiled from the kotlin file top level / package level object compiles to static class instance, its method compiles to static method. companion object: class + top level object","title":"Static methods and companion object"},{"location":"archived/kotlin/kotlin_s02.html#interfaces","text":"1 2 3 4 5 6 7 8 9 10 11 interface Doc { //properties val version : String val size : Long val name : String get () = \"No Name\" //default implementation fun save ( input : InputStream ) fun getDescription (): String { return \"simple doc\" ; } //default implementation }","title":"Interfaces"},{"location":"archived/kotlin/kotlin_s02.html#inherientance","text":"open keyword means allwo to derive, by default is open only inherient from one class , but multple interfaces no need to list class first 1 2 3 class C : IA , B , ID { } //IA, ID interfaces //B, class","title":"Inherientance"},{"location":"archived/kotlin/kotlin_s02.html#visibility-modifiers","text":"","title":"Visibility modifiers"},{"location":"archived/kotlin/kotlin_s02.html#abstract-classes","text":"","title":"Abstract classes"},{"location":"archived/kotlin/kotlin_s02.html#polymorphism","text":"implicit open explicit override can override property: 1 2 3 4 5 6 7 8 9 10 11 open class Base { open val prop1 : String get () = \"Base::value\" } class Derived : Base () { override val prop1 : String get () = \"Derived::value\" } class Another ( override val prop1 : String ): Base () { } can override val to var , but not the reverse way.","title":"Polymorphism"},{"location":"archived/kotlin/kotlin_s02.html#inheritance-vs-composition","text":"","title":"Inheritance vs composition"},{"location":"archived/kotlin/kotlin_s02.html#class-delegation","text":"","title":"Class delegation"},{"location":"archived/kotlin/kotlin_s02.html#sealed-classes","text":"sealed class in kotlin is an abstract class, which can be extended by subclasses defined as nested classes within the sealed class itself. 1 2 3 4 5 6 7 8 9 sealed class IntBinaryTree { class EmptyNode : IntBinaryTree () class IntBinaryTreeNode ( val ...) { } } //usage: val tree = IntBinaryTree . IntBinaryTreeNode (...)","title":"Sealed classes"},{"location":"archived/linux/linux_s01.html","text":"Ubuntu 16.04 no wifi at start up issue Solution 1 sudo nano /etc/systemd/system/wifi-resume.service put the following as file content: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 [Unit] Description=Restart networkmanager at resume After=suspend.target After=hibernate.target After=hybrid-sleep.target [Service] Type=oneshot ExecStart=/bin/systemctl restart network-manager.service [Install] WantedBy=suspend.target WantedBy=hibernate.target WantedBy=hybrid-sleep.target enable the service 1 sudo systemctl enable wifi-resume.service","title":"Ubuntu 16.04 no wifi at start up issue"},{"location":"archived/linux/linux_s01.html#ubuntu-1604-no-wifi-at-start-up-issue","text":"","title":"Ubuntu 16.04 no wifi at start up issue"},{"location":"archived/linux/linux_s01.html#solution","text":"1 sudo nano /etc/systemd/system/wifi-resume.service put the following as file content: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 [Unit] Description=Restart networkmanager at resume After=suspend.target After=hibernate.target After=hybrid-sleep.target [Service] Type=oneshot ExecStart=/bin/systemctl restart network-manager.service [Install] WantedBy=suspend.target WantedBy=hibernate.target WantedBy=hybrid-sleep.target enable the service 1 sudo systemctl enable wifi-resume.service","title":"Solution"},{"location":"archived/linux/linux_s02.html","text":"Systemd to start docker containers at startup create ci service 1 sudo nano /lib/systemd/system/ci.service put the following: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description=Start CI dockers at startup Documentation=see wiki After=docker.service Requires=docker.service [Service] ExecStart=/usr/local/bin/docker-compose --file /home/lihe/dockers/ci-docker-compose.yml up -d ExecStop=/usr/local/bin/docker-compose --file /home/lihe/dockers/ci-docker-compose.yml stop #ExecStart=/usr/bin/docker start xxxxx #ExecStop=/usr/bin/docker stop xxxx RemainAfterExit=yes [Install] WantedBy=multi-user.target enable the service: 1 2 sudo systemctl enable ci.service sudo systemctl daemon-reload && sudo service ci restart","title":"Systemd to start docker containers at startup"},{"location":"archived/linux/linux_s02.html#systemd-to-start-docker-containers-at-startup","text":"create ci service 1 sudo nano /lib/systemd/system/ci.service put the following: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description=Start CI dockers at startup Documentation=see wiki After=docker.service Requires=docker.service [Service] ExecStart=/usr/local/bin/docker-compose --file /home/lihe/dockers/ci-docker-compose.yml up -d ExecStop=/usr/local/bin/docker-compose --file /home/lihe/dockers/ci-docker-compose.yml stop #ExecStart=/usr/bin/docker start xxxxx #ExecStop=/usr/bin/docker stop xxxx RemainAfterExit=yes [Install] WantedBy=multi-user.target enable the service: 1 2 sudo systemctl enable ci.service sudo systemctl daemon-reload && sudo service ci restart","title":"Systemd to start docker containers at startup"},{"location":"archived/linux/linux_s03.html","text":"Allow insecure registry for docker on Ubuntu 1 sudo nano /lib/systemd/system/docker.service find the following and add: --insecure-registry Registry:5000 , like this: 1 ExecStart=/usr/bin/dockerd --insecure-registry Registry:5000 -H fd:// Restart docker 1 sudo systemctl daemon-reload && sudo service docker restart","title":"Allow insecure registry for docker on Ubuntu"},{"location":"archived/linux/linux_s03.html#allow-insecure-registry-for-docker-on-ubuntu","text":"1 sudo nano /lib/systemd/system/docker.service find the following and add: --insecure-registry Registry:5000 , like this: 1 ExecStart=/usr/bin/dockerd --insecure-registry Registry:5000 -H fd:// Restart docker 1 sudo systemctl daemon-reload && sudo service docker restart","title":"Allow insecure registry for docker on Ubuntu"},{"location":"archived/python/python_s00.html","text":"Python 3 Basic divide 4/3 integer divide 4//3 power 4**3 mod 4%3 string repeat 'abc ' * 3 'abc abc abc ' esacpe \\ String string index from 0, back index starts with -1 'abc'[0] 'a' 'abc'[-1] 'c' range using : 'abc'[1:4] 'bc' 'abc123'[1:4] 'bc1' 'abc123'[1:] 'bc123' 'abc123'[:4] 'abc1' 'abc123'[:] 'abc123' get string length len('1234') 4 clear screen 1 2 import os os . system ( 'clear' ) List add [1,2,3] + ['four', 'five', 'six'] [1, 2, 3, 'four', 'five', 'six'] append range also works can assign value using range Empty a list: someList[:]=[] if examples 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 age = 18 if age < 3 : print ( 'milk' ) print ( 'water' ) elif age < 21 : print ( 'g2' ) else : print ( 'beer' ) name = 'batman' if name is 'superman' : print ( 'S' ) elif name is 'batman' : print ( 'B' ) else : print ( 'unknown' ) for 1 2 3 4 5 6 7 8 foods = [ 'pizza' , 'wendy \\' s' , 'tuna' , 'beer' , 'somalica' ] // for f in foods [: 3 ]: for f in foods : print ( f ) print ( len ( f )) print ( '--------------' ) print ( f ) range 1 2 for x in range ( 10 ): print ( x ) print 0 to 9 range(start, end, step) 1 2 for x in range ( 30 , 40 , 2 ): print ( x ) prints: 30, 32, 34, 36, 38 while 1 2 3 4 age = 5 while age < 15 : print ( age ) age += 1 Comment single line: 1 # this is comment multiple line 1 2 3 4 ''' this is multiple line comment ''' print concatenation 1 print ( 10 , 12 , 'my age is:' , 9 , 100 , 'what' ) prints:10 12 my age is: 9 100 what break continue 1 2 3 4 5 numbersTaken = [2, 5, 7, 9, 12, 15, 17] for n in range(1, 20): if n in numbersTaken: continue print(n) Functions 1 2 3 4 5 6 7 8 #define function def functionBeef(): print('beef started') print('beef working') print('beef end') #call the function functionBeef() 1 2 3 4 5 6 7 #returns a list def bitcoin_to_usd(btc): amount = btc * 200 print(amount) return [btc, amount] bitcoin_to_usd(2.5) default parameter value 1 2 def get_gender(sex = 'unkown'): ... variable scope same as other language keyword arguments aka named parameters 1 2 3 4 5 6 def sayhello(system='linux', action='say', word='hello') : print(system, action, word) sayhello() sayhello(action='print') sayhello( word='good bye', system='windows') packed arguments like arg_list in C++ 1 2 3 4 5 6 7 8 def print_numbers(*numbers): for n in numbers: print(n) print_numbers() print_numbers(1) print_numbers(1, 2, 3, 5) print_numbers([2,3,5,6,7]) #this will print [2, 3, 5, 6, 7] to pack dictionary use ** 1 2 3 4 5 6 7 8 9 10 11 12 13 # A Python program to demonstrate packing of # dictionary items using ** def fun(**kwargs): # kwargs is a dict print(type(kwargs)) # Printing dictionary items for key in kwargs: print(\"%s = %s\" % (key, kwargs[key])) # Driver code fun(name=\"geeks\", ID=\"101\", language=\"Python\") unpack arguments 1 2 3 4 5 6 7 8 def health_calculator(age, apples_ate, cigs_smoked): answer = (100-age) + (apples_ate*3.5) - (cigs_smoked*2) print(answer) buckys_data = [27, 20, 0] health_calculator(buckys_data[0], buckys_data[1], buckys_data[2]) health_calculator(*buckys_data) #using unpacking arguments sets no duplicate 1 2 3 4 5 6 groceries = {'pizza', 'candy', 'coke', 'banana', 'coke'} print(groceries) #only 1 coke printed. duplicate coke removed #check exist print('pizza' in groceries) print('apple' in groceries) dictionary 1 2 3 4 5 6 7 classmates = {'Tony': ' cool but smells', 'Emma': ' sits behind me', 'Lucy': ' asks too many questions'} print(classmates['Emma']) classmates['Emma'] = ' what if?' for k, v in classmates.items(): print(k + ':' + v) modules 1 2 import random print(random.randrange(0, 100)) download image from web 1 2 import urllib.request urllib.request.urlretrieve(url, filename) read and write files write file 1 2 3 4 fw = open('sample.txt', 'w') fw.write('some lines in file\\n') fw.write('some lines 2 in file\\n') fw.close() read file 1 2 3 4 fr = open('sample.txt', 'r') text = fr.read() print(text) fr.close() some notes 1 2 3 4 request.urlopen(url) csv_str.split(\"\\\\n\") #raw string file = r'C:\\hello\\this.txt' exception 1 2 3 4 5 6 7 8 9 10 11 try : number = int ( input ( \"what is your number? \\n \" )) print ( 18 / number ) except ValueError : print ( \"please input a number\" ) except ZeroDivisionError : print ( \"no zero allow\" ) except : print ( \"all other exception goes here.\" ) finally : print ( \"always go here\" ) classes and objects 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class User : first = '1' last = 'b' def printFullName ( self ): print ( self . first + '.' + self . last ) u = User () u . printFullName () u2 = User () u2 . first = '2' u2 . last = 'c' u2 . printFullName () init (like construct) 1 2 3 class Tuna : def __init__ ( self ): #some implementation here class variable vs instance variable 1 2 3 4 5 6 7 8 9 class Girl : gender = 'female' #class variable, like C# static member, shared by all class instance. def __init__ ( self , the_name ): self . name = the_name #name is the instance variable. Like member variable in C# r = Girl ( 'Rachel' ) print ( r . name ) print ( r . gender ) inheritance 1 2 3 4 5 6 7 8 9 10 11 12 13 class Parent (): def print_last_name : pass #some implementation def print_awsome : pass #some other implementation class Child ( Parent ): #inherit from parent def print_first_name : #bbbbb def print_awsome : #override the parent method multiple inheritance are supported 1 2 pass #used for empty implementation threading","title":"Python 3"},{"location":"archived/python/python_s00.html#python-3","text":"","title":"Python 3"},{"location":"archived/python/python_s00.html#basic","text":"divide 4/3 integer divide 4//3 power 4**3 mod 4%3 string repeat 'abc ' * 3 'abc abc abc ' esacpe \\","title":"Basic"},{"location":"archived/python/python_s00.html#string","text":"string index from 0, back index starts with -1 'abc'[0] 'a' 'abc'[-1] 'c' range using : 'abc'[1:4] 'bc' 'abc123'[1:4] 'bc1' 'abc123'[1:] 'bc123' 'abc123'[:4] 'abc1' 'abc123'[:] 'abc123' get string length len('1234') 4 clear screen 1 2 import os os . system ( 'clear' )","title":"String"},{"location":"archived/python/python_s00.html#list","text":"add [1,2,3] + ['four', 'five', 'six'] [1, 2, 3, 'four', 'five', 'six'] append range also works can assign value using range Empty a list: someList[:]=[]","title":"List"},{"location":"archived/python/python_s00.html#if","text":"examples 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 age = 18 if age < 3 : print ( 'milk' ) print ( 'water' ) elif age < 21 : print ( 'g2' ) else : print ( 'beer' ) name = 'batman' if name is 'superman' : print ( 'S' ) elif name is 'batman' : print ( 'B' ) else : print ( 'unknown' )","title":"if"},{"location":"archived/python/python_s00.html#for","text":"1 2 3 4 5 6 7 8 foods = [ 'pizza' , 'wendy \\' s' , 'tuna' , 'beer' , 'somalica' ] // for f in foods [: 3 ]: for f in foods : print ( f ) print ( len ( f )) print ( '--------------' ) print ( f )","title":"for"},{"location":"archived/python/python_s00.html#range","text":"1 2 for x in range ( 10 ): print ( x ) print 0 to 9 range(start, end, step) 1 2 for x in range ( 30 , 40 , 2 ): print ( x ) prints: 30, 32, 34, 36, 38","title":"range"},{"location":"archived/python/python_s00.html#while","text":"1 2 3 4 age = 5 while age < 15 : print ( age ) age += 1","title":"while"},{"location":"archived/python/python_s00.html#comment","text":"single line: 1 # this is comment multiple line 1 2 3 4 ''' this is multiple line comment '''","title":"Comment"},{"location":"archived/python/python_s00.html#print-concatenation","text":"1 print ( 10 , 12 , 'my age is:' , 9 , 100 , 'what' ) prints:10 12 my age is: 9 100 what","title":"print concatenation"},{"location":"archived/python/python_s00.html#break","text":"","title":"break"},{"location":"archived/python/python_s00.html#continue","text":"1 2 3 4 5 numbersTaken = [2, 5, 7, 9, 12, 15, 17] for n in range(1, 20): if n in numbersTaken: continue print(n)","title":"continue"},{"location":"archived/python/python_s00.html#functions","text":"1 2 3 4 5 6 7 8 #define function def functionBeef(): print('beef started') print('beef working') print('beef end') #call the function functionBeef() 1 2 3 4 5 6 7 #returns a list def bitcoin_to_usd(btc): amount = btc * 200 print(amount) return [btc, amount] bitcoin_to_usd(2.5)","title":"Functions"},{"location":"archived/python/python_s00.html#default-parameter-value","text":"1 2 def get_gender(sex = 'unkown'): ...","title":"default parameter value"},{"location":"archived/python/python_s00.html#variable-scope","text":"same as other language","title":"variable scope"},{"location":"archived/python/python_s00.html#keyword-arguments-aka-named-parameters","text":"1 2 3 4 5 6 def sayhello(system='linux', action='say', word='hello') : print(system, action, word) sayhello() sayhello(action='print') sayhello( word='good bye', system='windows')","title":"keyword arguments aka named parameters"},{"location":"archived/python/python_s00.html#packed-arguments-like-arg_list-in-c","text":"1 2 3 4 5 6 7 8 def print_numbers(*numbers): for n in numbers: print(n) print_numbers() print_numbers(1) print_numbers(1, 2, 3, 5) print_numbers([2,3,5,6,7]) #this will print [2, 3, 5, 6, 7] to pack dictionary use ** 1 2 3 4 5 6 7 8 9 10 11 12 13 # A Python program to demonstrate packing of # dictionary items using ** def fun(**kwargs): # kwargs is a dict print(type(kwargs)) # Printing dictionary items for key in kwargs: print(\"%s = %s\" % (key, kwargs[key])) # Driver code fun(name=\"geeks\", ID=\"101\", language=\"Python\")","title":"packed arguments like arg_list in C++"},{"location":"archived/python/python_s00.html#unpack-arguments","text":"1 2 3 4 5 6 7 8 def health_calculator(age, apples_ate, cigs_smoked): answer = (100-age) + (apples_ate*3.5) - (cigs_smoked*2) print(answer) buckys_data = [27, 20, 0] health_calculator(buckys_data[0], buckys_data[1], buckys_data[2]) health_calculator(*buckys_data) #using unpacking arguments","title":"unpack arguments"},{"location":"archived/python/python_s00.html#sets","text":"no duplicate 1 2 3 4 5 6 groceries = {'pizza', 'candy', 'coke', 'banana', 'coke'} print(groceries) #only 1 coke printed. duplicate coke removed #check exist print('pizza' in groceries) print('apple' in groceries)","title":"sets"},{"location":"archived/python/python_s00.html#dictionary","text":"1 2 3 4 5 6 7 classmates = {'Tony': ' cool but smells', 'Emma': ' sits behind me', 'Lucy': ' asks too many questions'} print(classmates['Emma']) classmates['Emma'] = ' what if?' for k, v in classmates.items(): print(k + ':' + v)","title":"dictionary"},{"location":"archived/python/python_s00.html#modules","text":"1 2 import random print(random.randrange(0, 100))","title":"modules"},{"location":"archived/python/python_s00.html#download-image-from-web","text":"1 2 import urllib.request urllib.request.urlretrieve(url, filename)","title":"download image from web"},{"location":"archived/python/python_s00.html#read-and-write-files","text":"write file 1 2 3 4 fw = open('sample.txt', 'w') fw.write('some lines in file\\n') fw.write('some lines 2 in file\\n') fw.close() read file 1 2 3 4 fr = open('sample.txt', 'r') text = fr.read() print(text) fr.close()","title":"read and write files"},{"location":"archived/python/python_s00.html#some-notes","text":"1 2 3 4 request.urlopen(url) csv_str.split(\"\\\\n\") #raw string file = r'C:\\hello\\this.txt'","title":"some notes"},{"location":"archived/python/python_s00.html#exception","text":"1 2 3 4 5 6 7 8 9 10 11 try : number = int ( input ( \"what is your number? \\n \" )) print ( 18 / number ) except ValueError : print ( \"please input a number\" ) except ZeroDivisionError : print ( \"no zero allow\" ) except : print ( \"all other exception goes here.\" ) finally : print ( \"always go here\" )","title":"exception"},{"location":"archived/python/python_s00.html#classes-and-objects","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class User : first = '1' last = 'b' def printFullName ( self ): print ( self . first + '.' + self . last ) u = User () u . printFullName () u2 = User () u2 . first = '2' u2 . last = 'c' u2 . printFullName ()","title":"classes and objects"},{"location":"archived/python/python_s00.html#init-like-construct","text":"1 2 3 class Tuna : def __init__ ( self ): #some implementation here","title":"init (like construct)"},{"location":"archived/python/python_s00.html#class-variable-vs-instance-variable","text":"1 2 3 4 5 6 7 8 9 class Girl : gender = 'female' #class variable, like C# static member, shared by all class instance. def __init__ ( self , the_name ): self . name = the_name #name is the instance variable. Like member variable in C# r = Girl ( 'Rachel' ) print ( r . name ) print ( r . gender )","title":"class variable vs instance variable"},{"location":"archived/python/python_s00.html#inheritance","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 class Parent (): def print_last_name : pass #some implementation def print_awsome : pass #some other implementation class Child ( Parent ): #inherit from parent def print_first_name : #bbbbb def print_awsome : #override the parent method","title":"inheritance"},{"location":"archived/python/python_s00.html#multiple-inheritance-are-supported","text":"1 2 pass #used for empty implementation","title":"multiple inheritance are supported"},{"location":"archived/python/python_s00.html#threading","text":"","title":"threading"},{"location":"archived/python/python_s01.html","text":"Course and books Python fundamentals - the python apprentice Python beyond the basics - the python jorneyman Advance Python - the python master Getting starting with python3 REPL _ means last result Significant white spaces rules Prefer 4 spaces Never mix space and tab Be consistent on consecutive lines Only deviate to improve readability Python standard library 1 2 3 4 5 6 7 8 9 10 11 12 import math math . sqrt ( 81 ) help () help ( math ) help ( math . factorial ) from math import sqrt sqrt ( 49 ) from math import sqrt as sq sq ( 16 ) // divide into int / divide into float Scalar types and values int 1 2 3 4 5 6 0b10 # 2 0o10 # 8 0x10 # 16 int ( 3.5 ) # 3 int ( \"489\" ) # 489 int ( \"10000\" , 3 ) # 81, 3 is the base float 3e8 // 3 x 10 8 1.616e-35 // 1.616 x 10 -35 float(\"1.618\") // 1.618 float(\"inf\") // infinity: inf None 1 2 a = None a is None 'True bool True or False bool(0) is False bool([]) is False bool(\"\") is False Condition statement 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 if expr : print ( \"OK\" ) # empty line is reqired in REPL if expr : doSomething else doSomeOther if expr : some ... elif some ... else some ... While loops 1 2 3 4 5 6 7 8 while expr : print c -= 1 while True : if expr : break","title":"Course and books"},{"location":"archived/python/python_s01.html#course-and-books","text":"Python fundamentals - the python apprentice Python beyond the basics - the python jorneyman Advance Python - the python master","title":"Course and books"},{"location":"archived/python/python_s01.html#getting-starting-with-python3","text":"REPL _ means last result","title":"Getting starting with python3"},{"location":"archived/python/python_s01.html#significant-white-spaces-rules","text":"Prefer 4 spaces Never mix space and tab Be consistent on consecutive lines Only deviate to improve readability","title":"Significant white spaces rules"},{"location":"archived/python/python_s01.html#python-standard-library","text":"1 2 3 4 5 6 7 8 9 10 11 12 import math math . sqrt ( 81 ) help () help ( math ) help ( math . factorial ) from math import sqrt sqrt ( 49 ) from math import sqrt as sq sq ( 16 ) // divide into int / divide into float","title":"Python standard library"},{"location":"archived/python/python_s01.html#scalar-types-and-values","text":"","title":"Scalar types and values"},{"location":"archived/python/python_s01.html#int","text":"1 2 3 4 5 6 0b10 # 2 0o10 # 8 0x10 # 16 int ( 3.5 ) # 3 int ( \"489\" ) # 489 int ( \"10000\" , 3 ) # 81, 3 is the base","title":"int"},{"location":"archived/python/python_s01.html#float","text":"3e8 // 3 x 10 8 1.616e-35 // 1.616 x 10 -35 float(\"1.618\") // 1.618 float(\"inf\") // infinity: inf","title":"float"},{"location":"archived/python/python_s01.html#none","text":"1 2 a = None a is None 'True","title":"None"},{"location":"archived/python/python_s01.html#bool","text":"True or False bool(0) is False bool([]) is False bool(\"\") is False","title":"bool"},{"location":"archived/python/python_s01.html#condition-statement","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 if expr : print ( \"OK\" ) # empty line is reqired in REPL if expr : doSomething else doSomeOther if expr : some ... elif some ... else some ...","title":"Condition statement"},{"location":"archived/python/python_s01.html#while-loops","text":"1 2 3 4 5 6 7 8 while expr : print c -= 1 while True : if expr : break","title":"While loops"},{"location":"archived/python/python_s02.html","text":"Strings and Collections Collections str bytes list dict str immutable sequence of unicode code points (chars) string literal 1 2 3 4 5 6 7 8 9 10 'hello world' \"hello world\" \"\"\"this is a multi-line string\"\"\" r \"c:\\users\\lchen\" #raw string, no need to escape \\ str ( 123 ) # \"123\" bytes immutable sequence of bytes bytes literal 1 2 3 b 'hello world' b \"hello world\" ... list mutable sequence of objects list literal 1 2 [ 1 , 2 , 3 ] [ \"1\" , \"two\" , 3 , 4.0 ] dict mutable mappings of key/value pairs dict literal 1 2 { k1 : val1 , k2 : val2 } {} # empty dict For Loop for item in interable: 1 2 3 colors = [ 'red' : 0xFF0000 , 'green' : 0x00FF00 , 'blue' : 0x0000FF ] for color in colors : print ( color , colors [ color ]) Modularity python code placed in *.py file called module modules can be executed directly: python module_name.py import to REPL import module_name named function def function_name(arg1, argn): return value using return no return value then returns None use __name__ to determine how the module is being used 1 if __name__ == \"__main__\" : command args: sys.arv , script file name is sys.argv[0] docstring \"\"\" .... bla bla .... \"\"\" for help()","title":"Strings and Collections"},{"location":"archived/python/python_s02.html#strings-and-collections","text":"","title":"Strings and Collections"},{"location":"archived/python/python_s02.html#collections","text":"str bytes list dict","title":"Collections"},{"location":"archived/python/python_s02.html#str","text":"immutable sequence of unicode code points (chars) string literal 1 2 3 4 5 6 7 8 9 10 'hello world' \"hello world\" \"\"\"this is a multi-line string\"\"\" r \"c:\\users\\lchen\" #raw string, no need to escape \\ str ( 123 ) # \"123\"","title":"str"},{"location":"archived/python/python_s02.html#bytes","text":"immutable sequence of bytes bytes literal 1 2 3 b 'hello world' b \"hello world\" ...","title":"bytes"},{"location":"archived/python/python_s02.html#list","text":"mutable sequence of objects list literal 1 2 [ 1 , 2 , 3 ] [ \"1\" , \"two\" , 3 , 4.0 ]","title":"list"},{"location":"archived/python/python_s02.html#dict","text":"mutable mappings of key/value pairs dict literal 1 2 { k1 : val1 , k2 : val2 } {} # empty dict","title":"dict"},{"location":"archived/python/python_s02.html#for-loop","text":"for item in interable: 1 2 3 colors = [ 'red' : 0xFF0000 , 'green' : 0x00FF00 , 'blue' : 0x0000FF ] for color in colors : print ( color , colors [ color ])","title":"For Loop"},{"location":"archived/python/python_s02.html#modularity","text":"python code placed in *.py file called module modules can be executed directly: python module_name.py import to REPL import module_name named function def function_name(arg1, argn): return value using return no return value then returns None use __name__ to determine how the module is being used 1 if __name__ == \"__main__\" : command args: sys.arv , script file name is sys.argv[0] docstring \"\"\" .... bla bla .... \"\"\" for help()","title":"Modularity"},{"location":"archived/react/learning_react_s01.html","text":"Emerging Javascript Declare variables in ES6 const let Template strings aka interpolation Default parameters Arrow functions ES6 Objects and Arrays Destructuring Assignment General 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var sandwitch = { bread : \"dutch crunch\" , meat : \"tuna\" , cheese : \"swiss\" , topping : [ \"lettuce\" , \"tomato\" , \"mustad\" ] } var { bread , meat } = sandwitch console . log ( bread , meat ) //dutch crunch tuna bread = \"garlic\" meat = \"turkey\" console . log ( bread ) //gralic console . log ( meat ) //turkey console . log ( sandwitch . bread , sandwitch . meat ) //dutch crunch tuna On function argument 1 2 3 4 5 6 7 8 9 10 var regularPerson = { firstname : \"Bill\" , lastname : \"Willson\" } var lordifyOld = regularPerson => { console . log ( ` ${ regularPerson . firstname } of Canterbury` ) } lordifyOld ( regularPerson ) //Bill of Canterbury var logdifyNew = ({ firstname }) => { console . log ( ` ${ firstname } of Canterbury` ) } lordifyNew ( regularPerson ) //Bill of Canterbury On array 1 2 3 4 5 6 var [ firstResort ] = [ \"Kirkwood\" , \"Squaw\" , \"Alpine\" ] const . log ( firstrResort ) //Kirkwood //pass unnessary elements var [, , thirdResort ] = [ \"Kirkwood\" , \"Squaw\" , \"Alpine\" ] console . log ( thirdResort ) //Alpine Object Literal Enhancement Kind of reverse against destrucuring. 1 2 3 4 5 6 7 8 9 10 11 12 var name = \"Tallac\" var elevation = 9738 var funHike = [ name , elevation ] console . log ( funHike ) // { name: \"Tallac\", elevation: 9738 } var print = function () { console . log ( `Mt ${ this . name } is ${ this . elevation } feet tall` ) } var funHike2 = [ name , elevation , print ] funHike2 . print () //Mt Tallac is 9738 feet tall Old vs new syntax 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 //old var skier = { name : name , sound : sound , powerYell : function () { ... }, speed : function ( mph ) { ... } } //new var skier = { name , sound , powerYell () { ... }, speed ( mph ) { ... } } The spread operator Spread arrays 1 2 3 4 var peaks = [ \"Tallac\" , \"Ralston\" , \"Rose\" ] var canyons = [ \"Ward\" , \"Blackwood\" ] var tahoe = [... peaks , ... canyons ] console . log ( tahoe . join ( \", \" )) //Tallac, Ralston, Rose, Ward, Blackwood Spread does COPY 1 2 3 4 var peaks = [ \"Tallac\" , \"Ralston\" , \"Rose\" ] var [ last ] = peaks . reverse () console . log ( last ) //Rose console . log ( peaks ) //Rose, Ralston, Tallac with spread: 1 2 3 4 var peaks = [ \"Tallac\" , \"Ralston\" , \"Rose\" ] var [ last ] = [... peaks ]. reverse () //it copies! console . log ( last ) //Rose console . log ( peaks ) //Tallac, Ralston, Rose Used on object 1 2 3 4 5 6 7 8 9 10 11 12 13 var morning = { breakfast : \"oatmeal\" , lunch : \"peanut butter and jelly\" } var dinner = \"mac and cheese\" var backpackingMeals = { ... morning , dinner } console . log ( backpackingMeals ) // { breakfast: \"oatmeal\", lunch: \"peanut butter and jelly\", dinner: \"mac and cheese\"} Promise 1 2 3 4 5 6 7 8 9 10 const getFakeMembers = count => new Promise (( resolves , rejects ) => { ... //some actions, resolves, rejects are callbacks }) //usage: getFakeMembers ( 5 ). then ( data => console . log ( data ), //callback: resolves err => console . err (...) //callback: rejects ) Classes ES6 introduces class. 1 2 3 4 5 6 7 8 9 10 11 12 13 class Vacation { //by convention data type starts with uppercase constructor ( destination , length ) { this . destination = destination this . length = length } print () { console . log (...) } } //usage: const trip = new Vacation ( \"some place\" , 5 ) trip . print () Class can be extend/inheritance 1 2 3 4 5 6 7 8 9 10 11 class Expedition extends Vacation { constructor ( dest , length , gear ) { super ( dest , length ) this . gear = gear } print () { super . print () console . log ( \"...some other stuff ...\" ) } } ES6 class use prototypal inherientance ES6 Modules export export default import import A as B import * CommonJS 1 2 3 4 5 6 const print ( message ) => log ( message , new Date ()) const log ( message , timestamp ) => console . log ( ` ${ timestamp . toString () } : ${ message } ` ) module . exports = { print , log } //CommonJS export //CommonJs use require not import const { log , print } = require ( './file.js' )","title":"Emerging Javascript"},{"location":"archived/react/learning_react_s01.html#emerging-javascript","text":"","title":"Emerging Javascript"},{"location":"archived/react/learning_react_s01.html#declare-variables-in-es6","text":"const let Template strings aka interpolation Default parameters Arrow functions","title":"Declare variables in ES6"},{"location":"archived/react/learning_react_s01.html#es6-objects-and-arrays","text":"","title":"ES6 Objects and Arrays"},{"location":"archived/react/learning_react_s01.html#destructuring-assignment","text":"General 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 var sandwitch = { bread : \"dutch crunch\" , meat : \"tuna\" , cheese : \"swiss\" , topping : [ \"lettuce\" , \"tomato\" , \"mustad\" ] } var { bread , meat } = sandwitch console . log ( bread , meat ) //dutch crunch tuna bread = \"garlic\" meat = \"turkey\" console . log ( bread ) //gralic console . log ( meat ) //turkey console . log ( sandwitch . bread , sandwitch . meat ) //dutch crunch tuna On function argument 1 2 3 4 5 6 7 8 9 10 var regularPerson = { firstname : \"Bill\" , lastname : \"Willson\" } var lordifyOld = regularPerson => { console . log ( ` ${ regularPerson . firstname } of Canterbury` ) } lordifyOld ( regularPerson ) //Bill of Canterbury var logdifyNew = ({ firstname }) => { console . log ( ` ${ firstname } of Canterbury` ) } lordifyNew ( regularPerson ) //Bill of Canterbury On array 1 2 3 4 5 6 var [ firstResort ] = [ \"Kirkwood\" , \"Squaw\" , \"Alpine\" ] const . log ( firstrResort ) //Kirkwood //pass unnessary elements var [, , thirdResort ] = [ \"Kirkwood\" , \"Squaw\" , \"Alpine\" ] console . log ( thirdResort ) //Alpine","title":"Destructuring Assignment"},{"location":"archived/react/learning_react_s01.html#object-literal-enhancement","text":"Kind of reverse against destrucuring. 1 2 3 4 5 6 7 8 9 10 11 12 var name = \"Tallac\" var elevation = 9738 var funHike = [ name , elevation ] console . log ( funHike ) // { name: \"Tallac\", elevation: 9738 } var print = function () { console . log ( `Mt ${ this . name } is ${ this . elevation } feet tall` ) } var funHike2 = [ name , elevation , print ] funHike2 . print () //Mt Tallac is 9738 feet tall Old vs new syntax 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 //old var skier = { name : name , sound : sound , powerYell : function () { ... }, speed : function ( mph ) { ... } } //new var skier = { name , sound , powerYell () { ... }, speed ( mph ) { ... } }","title":"Object Literal Enhancement"},{"location":"archived/react/learning_react_s01.html#the-spread-operator","text":"Spread arrays 1 2 3 4 var peaks = [ \"Tallac\" , \"Ralston\" , \"Rose\" ] var canyons = [ \"Ward\" , \"Blackwood\" ] var tahoe = [... peaks , ... canyons ] console . log ( tahoe . join ( \", \" )) //Tallac, Ralston, Rose, Ward, Blackwood Spread does COPY 1 2 3 4 var peaks = [ \"Tallac\" , \"Ralston\" , \"Rose\" ] var [ last ] = peaks . reverse () console . log ( last ) //Rose console . log ( peaks ) //Rose, Ralston, Tallac with spread: 1 2 3 4 var peaks = [ \"Tallac\" , \"Ralston\" , \"Rose\" ] var [ last ] = [... peaks ]. reverse () //it copies! console . log ( last ) //Rose console . log ( peaks ) //Tallac, Ralston, Rose Used on object 1 2 3 4 5 6 7 8 9 10 11 12 13 var morning = { breakfast : \"oatmeal\" , lunch : \"peanut butter and jelly\" } var dinner = \"mac and cheese\" var backpackingMeals = { ... morning , dinner } console . log ( backpackingMeals ) // { breakfast: \"oatmeal\", lunch: \"peanut butter and jelly\", dinner: \"mac and cheese\"}","title":"The spread operator"},{"location":"archived/react/learning_react_s01.html#promise","text":"1 2 3 4 5 6 7 8 9 10 const getFakeMembers = count => new Promise (( resolves , rejects ) => { ... //some actions, resolves, rejects are callbacks }) //usage: getFakeMembers ( 5 ). then ( data => console . log ( data ), //callback: resolves err => console . err (...) //callback: rejects )","title":"Promise"},{"location":"archived/react/learning_react_s01.html#classes","text":"ES6 introduces class. 1 2 3 4 5 6 7 8 9 10 11 12 13 class Vacation { //by convention data type starts with uppercase constructor ( destination , length ) { this . destination = destination this . length = length } print () { console . log (...) } } //usage: const trip = new Vacation ( \"some place\" , 5 ) trip . print () Class can be extend/inheritance 1 2 3 4 5 6 7 8 9 10 11 class Expedition extends Vacation { constructor ( dest , length , gear ) { super ( dest , length ) this . gear = gear } print () { super . print () console . log ( \"...some other stuff ...\" ) } } ES6 class use prototypal inherientance","title":"Classes"},{"location":"archived/react/learning_react_s01.html#es6-modules","text":"export export default import import A as B import *","title":"ES6 Modules"},{"location":"archived/react/learning_react_s01.html#commonjs","text":"1 2 3 4 5 6 const print ( message ) => log ( message , new Date ()) const log ( message , timestamp ) => console . log ( ` ${ timestamp . toString () } : ${ message } ` ) module . exports = { print , log } //CommonJS export //CommonJs use require not import const { log , print } = require ( './file.js' )","title":"CommonJS"},{"location":"archived/react/learning_react_s02.html","text":"Functional Programming with JavaScript What it means to be functional High order functions functions that take function as arguments and/or return function as return value Imperative vs Declarative Declarative example: 1 2 3 4 5 6 7 8 9 10 11 12 13 const ladAndMapMembers = compose ( conbineWith ( sessionStorage , \"members\" ), save ( sessionStorage , \"members\" ), scopeMembers ( window ), logMemberInfoToConsole , logFieldsToConsole ( \"name.first\" ), countMembersBy ( \"location.state\" ), prepStatesForMapping , save ( sessionStorage , \"map\" ), renderMap ) getFakeMembers ( 100 ). then ( loadAndMapMembers ) Functional Concepts Immutability argument passing are by reference, it is mutable 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 let color_lawn = { title : \"lawn\" , color : \"#00FF00\" , rating : 0 } function rateColor ( color , rating ) { color . rating = rating return color } console . log ( rateColor ( color_lawn , 5 ). rating ) //5 console . log ( color_lawn . rating ) //5, it changed! //Object.assign, make copy var rateColorImmutable = function ( color , rating ) { return Object . assign ({}, color , { rating : rating }) } console . log ( rateColorImmutable ( color_lawn , 2 ). rating ) //2 console . log ( color_lawn . rating ) //5, it remains! //better: with ES7 spread operator var rateColorBetter = ( color , rating ) => ({ ... color , rating }) Array.push is not an immutable function, Array.concat is 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 let list = [ { title : \"1\" }, { title : \"2\" }, { title : \"3\" }, ] var addColor = function ( title , colors ) { colors . push ({ title : title }) return colors } console . log ( addColor ( \"4\" , list ). length ) //4 console . log ( colors . length ) //4 var addColorImmutable = ( title , array ) => array . concat ({ title }) //also new code style console . log ( addColorImmutable ( \"5\" , list ). length ) //5 console . log ( colors . length ) //4 Pure Functions Pure function have the following: return value based on it arguments take at lease 1 argument, always return a value or function do not cause side effect, set global variables, or change anything about application state treat its arguments as immutable data Pure functions are naturally testable Data Transformations Data transform should produce copies of transformed data and leave input immutable. Useful functions: Array.join , Array.filter , Array.map , Array.reduce Object.keys returns object property names Array.reduceRight same as Array.reduce but process from the end of the array High Order Functions High order functions take function as arguments and/or retuen function as return value. Array.map , Array.filter , Array.reduce are high order functions Currying : is the practice of holding on to some of the values needed to complete an operation until the rest can be supplied at a later point. This is archived by the use of a function returns another function: curried function. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 const userLogs = username => messages => console . log ( ` ${ username } -> ${ message } ` ) //userLogs is high order function, //message => is the curried funciton? const log = userLogs ( \"grandpa23\" ) log ( \"attemped to load 20 fake members\" ) getFakeMembers ( 20 ). then ( members => log ( `successfully loaded ${ members . length } members` ) error => log ( \"encounter an error while loading members\" ) ) //grandpa23 -> attemped to load 20 fake members //grandpa23 -> successfully loaded 20 members Recursion function recall itself. 1 2 3 4 5 6 7 8 9 10 11 12 const countDown = ( value , fn ) => { fn ( value ) return ( value > 0 ) ? countDown ( value - 1 , fn ) : value } countDown ( 10 , value => console . log ( value )) //10 //9 //8 ... //1 //0 a useful recursive function demo 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 const deepPick = ( fields , object = {}) => { const [ first , ... remaining ] = fields . split ( \".\" ) return ( remaining . length ) ? deepPick ( remaining . join ( \".\" ), object [ first ]) : object [ first ] } var dan = { type : \"person\" , data : { gender : \"male\" , info : { id : 22 , fullname : { first : \"Dan\" , last : \"Deacon\" } } } } deepPick ( \"type\" , dan ) //person deepPick ( \"data.info.fullname.last\" ) //Deacon Composition Different composition patterns 1 2 3 4 5 6 7 8 9 10 //chain: const ctime = a . replace ( 's' , '1' ) . replace ( 't' , '2' ) . replace ( 'v' , '2' ) //function compsition const both = functionOne ( functionTwo ( arg )) //function as args const all = putAll ( function1 , function2 , function3 ) Put it all together Keep data immutable Keep functions pure - accept at least one argument, return data or anthoter function Use recursion over looping(when possible)","title":"Functional Programming with JavaScript"},{"location":"archived/react/learning_react_s02.html#functional-programming-with-javascript","text":"","title":"Functional Programming with JavaScript"},{"location":"archived/react/learning_react_s02.html#what-it-means-to-be-functional","text":"High order functions functions that take function as arguments and/or return function as return value","title":"What it means to be functional"},{"location":"archived/react/learning_react_s02.html#imperative-vs-declarative","text":"Declarative example: 1 2 3 4 5 6 7 8 9 10 11 12 13 const ladAndMapMembers = compose ( conbineWith ( sessionStorage , \"members\" ), save ( sessionStorage , \"members\" ), scopeMembers ( window ), logMemberInfoToConsole , logFieldsToConsole ( \"name.first\" ), countMembersBy ( \"location.state\" ), prepStatesForMapping , save ( sessionStorage , \"map\" ), renderMap ) getFakeMembers ( 100 ). then ( loadAndMapMembers )","title":"Imperative vs Declarative"},{"location":"archived/react/learning_react_s02.html#functional-concepts","text":"","title":"Functional Concepts"},{"location":"archived/react/learning_react_s02.html#immutability","text":"argument passing are by reference, it is mutable 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 let color_lawn = { title : \"lawn\" , color : \"#00FF00\" , rating : 0 } function rateColor ( color , rating ) { color . rating = rating return color } console . log ( rateColor ( color_lawn , 5 ). rating ) //5 console . log ( color_lawn . rating ) //5, it changed! //Object.assign, make copy var rateColorImmutable = function ( color , rating ) { return Object . assign ({}, color , { rating : rating }) } console . log ( rateColorImmutable ( color_lawn , 2 ). rating ) //2 console . log ( color_lawn . rating ) //5, it remains! //better: with ES7 spread operator var rateColorBetter = ( color , rating ) => ({ ... color , rating }) Array.push is not an immutable function, Array.concat is 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 let list = [ { title : \"1\" }, { title : \"2\" }, { title : \"3\" }, ] var addColor = function ( title , colors ) { colors . push ({ title : title }) return colors } console . log ( addColor ( \"4\" , list ). length ) //4 console . log ( colors . length ) //4 var addColorImmutable = ( title , array ) => array . concat ({ title }) //also new code style console . log ( addColorImmutable ( \"5\" , list ). length ) //5 console . log ( colors . length ) //4","title":"Immutability"},{"location":"archived/react/learning_react_s02.html#pure-functions","text":"Pure function have the following: return value based on it arguments take at lease 1 argument, always return a value or function do not cause side effect, set global variables, or change anything about application state treat its arguments as immutable data Pure functions are naturally testable","title":"Pure Functions"},{"location":"archived/react/learning_react_s02.html#data-transformations","text":"Data transform should produce copies of transformed data and leave input immutable. Useful functions: Array.join , Array.filter , Array.map , Array.reduce Object.keys returns object property names Array.reduceRight same as Array.reduce but process from the end of the array","title":"Data Transformations"},{"location":"archived/react/learning_react_s02.html#high-order-functions","text":"High order functions take function as arguments and/or retuen function as return value. Array.map , Array.filter , Array.reduce are high order functions Currying : is the practice of holding on to some of the values needed to complete an operation until the rest can be supplied at a later point. This is archived by the use of a function returns another function: curried function. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 const userLogs = username => messages => console . log ( ` ${ username } -> ${ message } ` ) //userLogs is high order function, //message => is the curried funciton? const log = userLogs ( \"grandpa23\" ) log ( \"attemped to load 20 fake members\" ) getFakeMembers ( 20 ). then ( members => log ( `successfully loaded ${ members . length } members` ) error => log ( \"encounter an error while loading members\" ) ) //grandpa23 -> attemped to load 20 fake members //grandpa23 -> successfully loaded 20 members","title":"High Order Functions"},{"location":"archived/react/learning_react_s02.html#recursion","text":"function recall itself. 1 2 3 4 5 6 7 8 9 10 11 12 const countDown = ( value , fn ) => { fn ( value ) return ( value > 0 ) ? countDown ( value - 1 , fn ) : value } countDown ( 10 , value => console . log ( value )) //10 //9 //8 ... //1 //0 a useful recursive function demo 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 const deepPick = ( fields , object = {}) => { const [ first , ... remaining ] = fields . split ( \".\" ) return ( remaining . length ) ? deepPick ( remaining . join ( \".\" ), object [ first ]) : object [ first ] } var dan = { type : \"person\" , data : { gender : \"male\" , info : { id : 22 , fullname : { first : \"Dan\" , last : \"Deacon\" } } } } deepPick ( \"type\" , dan ) //person deepPick ( \"data.info.fullname.last\" ) //Deacon","title":"Recursion"},{"location":"archived/react/learning_react_s02.html#composition","text":"Different composition patterns 1 2 3 4 5 6 7 8 9 10 //chain: const ctime = a . replace ( 's' , '1' ) . replace ( 't' , '2' ) . replace ( 'v' , '2' ) //function compsition const both = functionOne ( functionTwo ( arg )) //function as args const all = putAll ( function1 , function2 , function3 )","title":"Composition"},{"location":"archived/react/learning_react_s02.html#put-it-all-together","text":"Keep data immutable Keep functions pure - accept at least one argument, return data or anthoter function Use recursion over looping(when possible)","title":"Put it all together"},{"location":"archived/react/learning_react_s03.html","text":"Pure React Page Setup The Virtual DOM React Elements React.createElement data-reactroot will always appear as an attribute of the root element of your React component. ReactDOM ReactDom contains the tools to render React elements into browser. ReactDOM.render Children ReactDOM only allow render single element to doucment. But the single element can nest children. className in React will render to HTML as css class Contructing Elements with Data 1 2 3 4 5 6 7 8 9 10 11 var list = [ \"one\" , \"two\" , \"three\" , \"four\" ] React . createElement ( \"ul\" , { className : \"someCssClass\" }, list . map ( ( item , i ) => React . createElement ( \"li\" , { key : i }, item ) //li need a unique key ) ) React Components React.createClass React.createClass may deprecate in future React.Component es6 1 2 3 class SomeComponent extends React . Component { ... } Stateless Functional Components Stateless functional components are functions, not objects; therefore, they do not have a \u201cthis\u201d scope. Functions for only to rendering. Pass data using props DOM Rendering Factories Using createFactory to create an h1 1 React . DOM . h1 ( null , \"Baked Salmon\" ) //first arg is for properties, second is for the children React with JSX React Elements as JSX JSX Tips Nested Components className will generate HTML class=\"\" for css style. Javascript expression wrappered in { } , and will evaluated. Mapping array to JSX: 1 2 3 4 5 < ul > { this . props . ingredients . map (( ingredient , i ) => < li key = { i } > { ingredient } < /li> )} < /ul> Recipes as JSX 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // The data, an array of Recipe objects var data = [ ... ]; // A stateless functional component for an individual Recipe const Recipe = ( props ) => ( ... ) // A stateless functional component for the Menu of Recipes const Menu = ( props ) => ( ... < Recipe ... ... ) // A call to ReactDOM.render to render our Menu into the current DOM ReactDOM . render ( < Menu recipes = { data } title = \"Delicious Recipes\" /> , document . getElementById ( \"react-container\" ) ) Babel presets Intro to Webpack Code splitting Minification Feature flagging Hot Module Replacement Webpack loaders install web pack and dependencies 1 2 3 sudo npm install -g webpack npm install babel-core babel-loader babel-preset-env babel-preset-react babel-preset-stage-0 --save-dev npm install react react-dom --save Webpack configuration webpack.config.js 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 module . exports = { entry : \"./src/index.js\" , output : { path : \"dist/assets\" , filename : \"bundle.js\" //output dist/assets/bundle.js }, module : { rules : [ { test : /\\.js$/ , exclude : /(node_modules)/ , loader : [ 'babel-loader' ], query : { presets : [ 'env' , 'stage-0' , 'react' ] } } ] } } Loading the bundle index.html 1 2 3 4 5 6 7 8 9 10 11 <!DOCTYPE html> < html > < head > < meta charset = \"utf-8\" > < title > React Recipes App </ title > </ head > < body > < div id = \"react-container\" ></ div > < script src = \"assets/bundle.js\" ></ script > </ body > </ html > Others: source mapping, build css and so on. use create-react-app instead","title":"Pure React"},{"location":"archived/react/learning_react_s03.html#pure-react","text":"","title":"Pure React"},{"location":"archived/react/learning_react_s03.html#page-setup","text":"","title":"Page Setup"},{"location":"archived/react/learning_react_s03.html#the-virtual-dom","text":"","title":"The Virtual DOM"},{"location":"archived/react/learning_react_s03.html#react-elements","text":"React.createElement data-reactroot will always appear as an attribute of the root element of your React component.","title":"React Elements"},{"location":"archived/react/learning_react_s03.html#reactdom","text":"ReactDom contains the tools to render React elements into browser. ReactDOM.render","title":"ReactDOM"},{"location":"archived/react/learning_react_s03.html#children","text":"ReactDOM only allow render single element to doucment. But the single element can nest children. className in React will render to HTML as css class","title":"Children"},{"location":"archived/react/learning_react_s03.html#contructing-elements-with-data","text":"1 2 3 4 5 6 7 8 9 10 11 var list = [ \"one\" , \"two\" , \"three\" , \"four\" ] React . createElement ( \"ul\" , { className : \"someCssClass\" }, list . map ( ( item , i ) => React . createElement ( \"li\" , { key : i }, item ) //li need a unique key ) )","title":"Contructing Elements with Data"},{"location":"archived/react/learning_react_s03.html#react-components","text":"","title":"React Components"},{"location":"archived/react/learning_react_s03.html#reactcreateclass","text":"React.createClass may deprecate in future","title":"React.createClass"},{"location":"archived/react/learning_react_s03.html#reactcomponent","text":"es6 1 2 3 class SomeComponent extends React . Component { ... }","title":"React.Component"},{"location":"archived/react/learning_react_s03.html#stateless-functional-components","text":"Stateless functional components are functions, not objects; therefore, they do not have a \u201cthis\u201d scope. Functions for only to rendering. Pass data using props","title":"Stateless Functional Components"},{"location":"archived/react/learning_react_s03.html#dom-rendering","text":"","title":"DOM Rendering"},{"location":"archived/react/learning_react_s03.html#factories","text":"Using createFactory to create an h1 1 React . DOM . h1 ( null , \"Baked Salmon\" ) //first arg is for properties, second is for the children","title":"Factories"},{"location":"archived/react/learning_react_s03.html#react-with-jsx","text":"","title":"React with JSX"},{"location":"archived/react/learning_react_s03.html#react-elements-as-jsx","text":"","title":"React Elements as JSX"},{"location":"archived/react/learning_react_s03.html#jsx-tips","text":"Nested Components className will generate HTML class=\"\" for css style. Javascript expression wrappered in { } , and will evaluated. Mapping array to JSX: 1 2 3 4 5 < ul > { this . props . ingredients . map (( ingredient , i ) => < li key = { i } > { ingredient } < /li> )} < /ul>","title":"JSX Tips"},{"location":"archived/react/learning_react_s03.html#recipes-as-jsx","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // The data, an array of Recipe objects var data = [ ... ]; // A stateless functional component for an individual Recipe const Recipe = ( props ) => ( ... ) // A stateless functional component for the Menu of Recipes const Menu = ( props ) => ( ... < Recipe ... ... ) // A call to ReactDOM.render to render our Menu into the current DOM ReactDOM . render ( < Menu recipes = { data } title = \"Delicious Recipes\" /> , document . getElementById ( \"react-container\" ) )","title":"Recipes as JSX"},{"location":"archived/react/learning_react_s03.html#babel","text":"presets","title":"Babel"},{"location":"archived/react/learning_react_s03.html#intro-to-webpack","text":"Code splitting Minification Feature flagging Hot Module Replacement","title":"Intro to Webpack"},{"location":"archived/react/learning_react_s03.html#webpack-loaders","text":"install web pack and dependencies 1 2 3 sudo npm install -g webpack npm install babel-core babel-loader babel-preset-env babel-preset-react babel-preset-stage-0 --save-dev npm install react react-dom --save","title":"Webpack loaders"},{"location":"archived/react/learning_react_s03.html#webpack-configuration","text":"webpack.config.js 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 module . exports = { entry : \"./src/index.js\" , output : { path : \"dist/assets\" , filename : \"bundle.js\" //output dist/assets/bundle.js }, module : { rules : [ { test : /\\.js$/ , exclude : /(node_modules)/ , loader : [ 'babel-loader' ], query : { presets : [ 'env' , 'stage-0' , 'react' ] } } ] } }","title":"Webpack configuration"},{"location":"archived/react/learning_react_s03.html#loading-the-bundle","text":"index.html 1 2 3 4 5 6 7 8 9 10 11 <!DOCTYPE html> < html > < head > < meta charset = \"utf-8\" > < title > React Recipes App </ title > </ head > < body > < div id = \"react-container\" ></ div > < script src = \"assets/bundle.js\" ></ script > </ body > </ html > Others: source mapping, build css and so on. use create-react-app instead","title":"Loading the bundle"},{"location":"archived/react/learning_react_s04.html","text":"Props, State, and the Component Tree Property Validation automatic property validation Type Validator Arrays React.PropTypes.array Boolean React.PropTypes.bool Funcitons React.PropTypes.func Numbers React.PropTypes.number Objects React.PropTypes.object Strings React.PropTypes.string Validating props with the createClass 1 2 3 4 5 6 7 8 9 const Summary = createClass ({ ... propTypes : { ingredients : PropTypes . array , steps : PropTypes . array , title : PropTypes . string }, render () { ... Default props to avoid warning caused by validation on initial value 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 const Summary = createClass ({ ... propTypes : { ingredients : PropTypes . number , steps : PropTypes . number , title : PropTypes . string }, getDefaultProps () { return { ingredients : 0 , steps : 0 , title : \"[recipe]\" } }, render () { Custom Property Validation all prop validators are functions: 1 2 3 4 5 6 7 8 9 propTypes : { ingredients : PropTypes . number , steps : PropTypes . number , title : ( props , propName ) => ( typeof props [ propName ] !== 'string' ) ? new Error ( \"A title must be a string\" ) : ( props [ propName ]. length > 20 ) ? new Error ( `title is over 20 characters` ) : null }","title":"Props, State, and the Component Tree"},{"location":"archived/react/learning_react_s04.html#props-state-and-the-component-tree","text":"","title":"Props, State, and the Component Tree"},{"location":"archived/react/learning_react_s04.html#property-validation","text":"automatic property validation Type Validator Arrays React.PropTypes.array Boolean React.PropTypes.bool Funcitons React.PropTypes.func Numbers React.PropTypes.number Objects React.PropTypes.object Strings React.PropTypes.string","title":"Property Validation"},{"location":"archived/react/learning_react_s04.html#validating-props-with-the-createclass","text":"1 2 3 4 5 6 7 8 9 const Summary = createClass ({ ... propTypes : { ingredients : PropTypes . array , steps : PropTypes . array , title : PropTypes . string }, render () { ...","title":"Validating props with the createClass"},{"location":"archived/react/learning_react_s04.html#default-props","text":"to avoid warning caused by validation on initial value 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 const Summary = createClass ({ ... propTypes : { ingredients : PropTypes . number , steps : PropTypes . number , title : PropTypes . string }, getDefaultProps () { return { ingredients : 0 , steps : 0 , title : \"[recipe]\" } }, render () {","title":"Default props"},{"location":"archived/react/learning_react_s04.html#custom-property-validation","text":"all prop validators are functions: 1 2 3 4 5 6 7 8 9 propTypes : { ingredients : PropTypes . number , steps : PropTypes . number , title : ( props , propName ) => ( typeof props [ propName ] !== 'string' ) ? new Error ( \"A title must be a string\" ) : ( props [ propName ]. length > 20 ) ? new Error ( `title is over 20 characters` ) : null }","title":"Custom Property Validation"},{"location":"archived/ts/ts_01.html","text":"Install & config npm i -g typescript OR yarn global add typescript tsc app.ts transpile app.ts to app.js TS project file tsconfig.json * compiler options * include/exclude files * support configuration inheritence 1 2 3 4 5 6 7 8 9 10 11 { \"compilerOptions\" : { \"target\" : \"es5\" , \"noUnusedLocals\" : true , ... }, \"files\" : [ app . ts , ... ] } useful compiler options * sourceMap: true //good for debug * watch: true //watch source code change * outDir: \"js\" //specify the build output directory * strictNullCheck: true //do not allow assign null to other type like string Create project file using command line ts --init Multiple project files and inheritence You can have multiple tsconfig.json on different folder To inherient a base config file: add 1 extends : 'some-base-tsconfig.json' , on the project(tsconfig.json) file. VScode configure task F1 -> task:configure task runner Built-in types Boolean Number String Enum Array Void Null Undefined Never Any var, let and const var : hoisting. let : no hoisting. const : cannot change once assigned Union type 1 let value : number | string ; //value is number or string Type assertion 1 2 3 let value : any = 5 ; let fixed : string = ( < number > value ). toFixed ( 4 ); let fixed2 : string = ( value as number ). toFixed ( 4 ); not type conversion, just ease with type: enable intellisense. non-null assertion operator compiler option: strictNullCheck added null check. use uion type work with legacy js use non-null assertion operator work with legacy js: 1 2 let msgElement : HTMLElement | null = document . getElementById ( \"message\" ); msgElement ! . innerText = \"OK\" ; //!. just ignore the null check while compile. Compiler type analysis 1 2 3 4 5 6 7 ... //with above code if ( msgElement == null ) { return msgElement ; //compiler take msgElement type as null } else { console . log ( msgElement ); //compiler take msgElement type as HTMLElement msgElement = ... //compiler take msgElement type as HTMLElement | null again. } Better functions with typescript 1 2 3 4 function someFunc ( s : number , message? : string ) : string { ... } //here message is optional param compilerOption: noImplicitAny Default param 1 2 3 4 5 function someGreeting ( greeting : string = 'hello' ) : void { ... } someGreeting (); someGreeting ( 'this is also ok' ); Arrow function 1 2 3 4 5 6 7 8 9 10 11 ( message : string ) => { console . log ( message ); } //same as ( message : string ) => console . log ( message ); //same as the following except arrow function is anonymous function someName ( message : string ) : void { console . log ( messgae ); } Function type 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 let logMessage = ( message : string ) => console . log ( message ); function logError ( error : string ) : void { console . error ( error ) } let logger : ( value : string ) => void ; /* define logger as a function: function will take a string param return void. function type is: (value: string)=> void */ //usage: it works since logError, logMessage are same type if ( thereAreError ) { logger = logError ; } else { logger = logMessage } Creating and using customized types Interface 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 interface Employee { name : string ; title : string ; } interface Manager extends Emplyee { department : string ; scheduleMeeting : ( topic : string ) => void ; } ## Strcutural type system ```typescript //with about code let developer = { name: \"some-name\", title: \"some-title\", editor: \"waht?\" } let newEmployee: Employee = developer; //this works, newEmployee will copy name, title from developer Class Members can be: public private protected class members are public by default class inheritence 1 2 3 4 5 6 7 class Developer { ... } class WebDeveloper extends Developer { ... } Implementing an interface 1 2 3 4 5 6 7 8 9 10 11 12 13 interface Employee { name : string ; title : string ; logID : () => string ; } class Engineer implements Employee { name : string ; title : string ; logID () { return ` ${ this . name } _ ${ this . title } ` ; } } Typescript file reference 1 // <reference path=\"person.ts\"/> In tsconfig.json , set compilerOptions -> outFile: \"some file\" , compiler will pack all referenced file together in a single js file. Static members 1 2 3 4 5 class SomeClass { static value : string = '1,2,3' ; ... } SomeClass . value = \"456\" ; Constructor 1 2 3 4 5 6 7 8 9 10 11 12 13 class SomeImplClass extends SomeBaseClass { readonly age : number ; //same as C# readonly constructor ( param : number ) { super (); //same as C# or Java this . age = param ; //readonly can only set in constructor } } class Game { constructor ( public name : string ) { //same as Angular :) ... } }","title":"Install & config"},{"location":"archived/ts/ts_01.html#install-config","text":"npm i -g typescript OR yarn global add typescript tsc app.ts transpile app.ts to app.js","title":"Install &amp; config"},{"location":"archived/ts/ts_01.html#ts-project-file","text":"tsconfig.json * compiler options * include/exclude files * support configuration inheritence 1 2 3 4 5 6 7 8 9 10 11 { \"compilerOptions\" : { \"target\" : \"es5\" , \"noUnusedLocals\" : true , ... }, \"files\" : [ app . ts , ... ] } useful compiler options * sourceMap: true //good for debug * watch: true //watch source code change * outDir: \"js\" //specify the build output directory * strictNullCheck: true //do not allow assign null to other type like string","title":"TS project file"},{"location":"archived/ts/ts_01.html#create-project-file-using-command-line","text":"ts --init","title":"Create project file using command line"},{"location":"archived/ts/ts_01.html#multiple-project-files-and-inheritence","text":"You can have multiple tsconfig.json on different folder To inherient a base config file: add 1 extends : 'some-base-tsconfig.json' , on the project(tsconfig.json) file.","title":"Multiple project files and inheritence"},{"location":"archived/ts/ts_01.html#vscode-configure-task","text":"F1 -> task:configure task runner","title":"VScode configure task"},{"location":"archived/ts/ts_01.html#built-in-types","text":"Boolean Number String Enum Array Void Null Undefined Never Any","title":"Built-in types"},{"location":"archived/ts/ts_01.html#var-let-and-const","text":"var : hoisting. let : no hoisting. const : cannot change once assigned","title":"var, let and const"},{"location":"archived/ts/ts_01.html#union-type","text":"1 let value : number | string ; //value is number or string","title":"Union type"},{"location":"archived/ts/ts_01.html#type-assertion","text":"1 2 3 let value : any = 5 ; let fixed : string = ( < number > value ). toFixed ( 4 ); let fixed2 : string = ( value as number ). toFixed ( 4 ); not type conversion, just ease with type: enable intellisense.","title":"Type assertion"},{"location":"archived/ts/ts_01.html#non-null-assertion-operator","text":"compiler option: strictNullCheck added null check. use uion type work with legacy js use non-null assertion operator work with legacy js: 1 2 let msgElement : HTMLElement | null = document . getElementById ( \"message\" ); msgElement ! . innerText = \"OK\" ; //!. just ignore the null check while compile.","title":"non-null assertion operator"},{"location":"archived/ts/ts_01.html#compiler-type-analysis","text":"1 2 3 4 5 6 7 ... //with above code if ( msgElement == null ) { return msgElement ; //compiler take msgElement type as null } else { console . log ( msgElement ); //compiler take msgElement type as HTMLElement msgElement = ... //compiler take msgElement type as HTMLElement | null again. }","title":"Compiler type analysis"},{"location":"archived/ts/ts_01.html#better-functions-with-typescript","text":"1 2 3 4 function someFunc ( s : number , message? : string ) : string { ... } //here message is optional param compilerOption: noImplicitAny","title":"Better functions with typescript"},{"location":"archived/ts/ts_01.html#default-param","text":"1 2 3 4 5 function someGreeting ( greeting : string = 'hello' ) : void { ... } someGreeting (); someGreeting ( 'this is also ok' );","title":"Default param"},{"location":"archived/ts/ts_01.html#arrow-function","text":"1 2 3 4 5 6 7 8 9 10 11 ( message : string ) => { console . log ( message ); } //same as ( message : string ) => console . log ( message ); //same as the following except arrow function is anonymous function someName ( message : string ) : void { console . log ( messgae ); }","title":"Arrow function"},{"location":"archived/ts/ts_01.html#function-type","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 let logMessage = ( message : string ) => console . log ( message ); function logError ( error : string ) : void { console . error ( error ) } let logger : ( value : string ) => void ; /* define logger as a function: function will take a string param return void. function type is: (value: string)=> void */ //usage: it works since logError, logMessage are same type if ( thereAreError ) { logger = logError ; } else { logger = logMessage }","title":"Function type"},{"location":"archived/ts/ts_01.html#creating-and-using-customized-types","text":"","title":"Creating and using customized types"},{"location":"archived/ts/ts_01.html#interface","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 interface Employee { name : string ; title : string ; } interface Manager extends Emplyee { department : string ; scheduleMeeting : ( topic : string ) => void ; } ## Strcutural type system ```typescript //with about code let developer = { name: \"some-name\", title: \"some-title\", editor: \"waht?\" } let newEmployee: Employee = developer; //this works, newEmployee will copy name, title from developer","title":"Interface"},{"location":"archived/ts/ts_01.html#class","text":"Members can be: public private protected class members are public by default class inheritence 1 2 3 4 5 6 7 class Developer { ... } class WebDeveloper extends Developer { ... }","title":"Class"},{"location":"archived/ts/ts_01.html#implementing-an-interface","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 interface Employee { name : string ; title : string ; logID : () => string ; } class Engineer implements Employee { name : string ; title : string ; logID () { return ` ${ this . name } _ ${ this . title } ` ; } }","title":"Implementing an interface"},{"location":"archived/ts/ts_01.html#typescript-file-reference","text":"1 // <reference path=\"person.ts\"/> In tsconfig.json , set compilerOptions -> outFile: \"some file\" , compiler will pack all referenced file together in a single js file.","title":"Typescript file reference"},{"location":"archived/ts/ts_01.html#static-members","text":"1 2 3 4 5 class SomeClass { static value : string = '1,2,3' ; ... } SomeClass . value = \"456\" ;","title":"Static members"},{"location":"archived/ts/ts_01.html#constructor","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 class SomeImplClass extends SomeBaseClass { readonly age : number ; //same as C# readonly constructor ( param : number ) { super (); //same as C# or Java this . age = param ; //readonly can only set in constructor } } class Game { constructor ( public name : string ) { //same as Angular :) ... } }","title":"Constructor"},{"location":"archived/ts/ts_02.html","text":"Creating and using typescript module Supporting technologies 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 TS -> Typescript compiler -> Javascript Modules -> Loader/Bundler . AMD . Node . CommonJs . RequireJs . UMD . SystemJs . System . Webpack . ES2015 ``` ### Export declarations ```typescript //person.ts export interface Person {} export function hireDeveloper(): void {} export default class Employee {} //when import, if you do not specify what to import, then Employee is imported class Manager {} //not accessible outsite Exprot statement 1 2 3 4 5 6 //person2.ts interface Person {} function hireDevelopr () : void () {} class Employee {} class Manager {} export { Person , hireDeveloper , Employee as Staff }; Importing a module 1 2 3 4 5 import { Person , hireDeveloper } from './person' ; import Worker from './person' ; // no {}, import will take defaul export Employee alias as Worker. import { Staff as CoWorker } from './person2' ; //alias again import * as HR from './person' ; HR . hireDeveloper (); compilerOptions: module: commonJs Relative vs non-relative imports relative 1 import { Bla } form './bla' ; non relative, usually for 3rd party library 1 import * as lodash from 'lodash' ; different search path Module resolution strategies Classic vs Node compilerOption: traceResolution = true helps trouble shooting Type declaration files *.d.ts DefinitlyTyped on github https://microsoft.github.io/TypeSearch/ 1 2 npm install --save lodash npm install --save @types/lodash","title":"Creating and using typescript module"},{"location":"archived/ts/ts_02.html#creating-and-using-typescript-module","text":"","title":"Creating and using typescript module"},{"location":"archived/ts/ts_02.html#supporting-technologies","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 TS -> Typescript compiler -> Javascript Modules -> Loader/Bundler . AMD . Node . CommonJs . RequireJs . UMD . SystemJs . System . Webpack . ES2015 ``` ### Export declarations ```typescript //person.ts export interface Person {} export function hireDeveloper(): void {} export default class Employee {} //when import, if you do not specify what to import, then Employee is imported class Manager {} //not accessible outsite","title":"Supporting technologies"},{"location":"archived/ts/ts_02.html#exprot-statement","text":"1 2 3 4 5 6 //person2.ts interface Person {} function hireDevelopr () : void () {} class Employee {} class Manager {} export { Person , hireDeveloper , Employee as Staff };","title":"Exprot statement"},{"location":"archived/ts/ts_02.html#importing-a-module","text":"1 2 3 4 5 import { Person , hireDeveloper } from './person' ; import Worker from './person' ; // no {}, import will take defaul export Employee alias as Worker. import { Staff as CoWorker } from './person2' ; //alias again import * as HR from './person' ; HR . hireDeveloper (); compilerOptions: module: commonJs","title":"Importing a module"},{"location":"archived/ts/ts_02.html#relative-vs-non-relative-imports","text":"relative 1 import { Bla } form './bla' ; non relative, usually for 3rd party library 1 import * as lodash from 'lodash' ; different search path","title":"Relative vs non-relative imports"},{"location":"archived/ts/ts_02.html#module-resolution-strategies","text":"Classic vs Node compilerOption: traceResolution = true helps trouble shooting","title":"Module resolution strategies"},{"location":"archived/ts/ts_02.html#type-declaration-files","text":"*.d.ts DefinitlyTyped on github https://microsoft.github.io/TypeSearch/ 1 2 npm install --save lodash npm install --save @types/lodash","title":"Type declaration files"},{"location":"archived/web/web_s01.html","text":"Diff HTML5 Local storage vs. Session storage localStorage and sessionStorage both extend Storage. There is no difference between them except for the intended \"non-persistence\" of sessionStorage. That is, the data stored in localStorage persists until explicitly deleted. Changes made are saved and available for all current and future visits to the site. For sessionStorage , changes are only available per window (or tab in browsers like Chrome and Firefox). Changes made are saved and available for the current page, as well as future visits to the site on the same window. Once the window is closed, the storage is deleted.","title":"Diff HTML5 Local storage vs. Session storage"},{"location":"archived/web/web_s01.html#diff-html5-local-storage-vs-session-storage","text":"localStorage and sessionStorage both extend Storage. There is no difference between them except for the intended \"non-persistence\" of sessionStorage. That is, the data stored in localStorage persists until explicitly deleted. Changes made are saved and available for all current and future visits to the site. For sessionStorage , changes are only available per window (or tab in browsers like Chrome and Firefox). Changes made are saved and available for the current page, as well as future visits to the site on the same window. Once the window is closed, the storage is deleted.","title":"Diff HTML5 Local storage vs. Session storage"},{"location":"archived/web/web_s02.html","text":"REST+JSON API Design - Best Practices Why REST? Scalability not performance but more throughput, handles more request Generality well-known HTTP protocol, all languages can interactive with it (widely adopted). Independence Latency(Caching) use caching reduce latency Security has some facility to ensure security Encapsulation Resource Collection Resource Instance Resource Why JSON? Ubiquity Simplicity Readability human readable Scalability Flexibility easy to change. HATEOAS H yermedia A s T he E ngine O f A pplication S tate See wiki: Very nice Example PUT According RFC, put is idempotent. Clients can make that same call repeatedly while producing the same result. When use put, send all fields. Can be used for create and update. Cannot be used for partial update. Patch is for partial update. for Create , in case the id is already known. must put all data, (not partial) for idempotent. 1 2 PUT /applications/client-specified-id { ... } for Update , must full replacement for idempotent. 1 2 PUT /applications/some-id { ... } POST for Create always a parent resource(collection resource) 1 2 3 4 POST /applications { \"name\": \"some-application\" } Response 201 and location in header: 1 2 201 created Location: http://server/applications/some-id for Update on instance resource, no idempotent required according RFC returns 200, no location, since location is already known. can be used on both full update and partial update. Partial update can reduce network traffic. 1 200 OK POST is the only verb that NOT idempotent Media Types Format Specification + Parsing Rules Request should always have Accept: header Response should always have Content-Type: header can create you own media type like: application/foo+json Version URL: https://api.ss.com/v1/ , easy to design, difficult to deploy VS * Media Type: application/json;application&v=1 , difficult to design, easy deploy camelCase JSON should be camelCase, it is JavaScript convention. Do not break it. Date/Time/Timestamp Use the standard: ISO 8601: 1 \"dateCreated\": \"2012-07-10T18:02:24.343Z\" Use UTC! HREF Distributed Hypermedia Every accessible resource has a unique URL Response Body GET: yes POST: return the representation(same data?) in the response when feasible add override(?_body=false) header Accept header values comma delimited in order of preference 1 2 GET /applications/a1b2c3d4 Accept: application/json, text/plain means prefer application/json better. Resource Extensions 1 2 /applications/a1b2c3d4.json /applications/a1b2c3d4.csv Conventionally overrides Accept header Resource References (Linking) Linking is fundamental to scalability Instance Reference Collection Reference 1 2 3 4 5 6 7 8 9 10 11 12 13 14 GET /workers/xalclaef 200 OK { \"href\": \"http://....\", \"userName\": \"someOne\", //collection reference \"groups\": { \"href\": \"http://...\" } //instance reference \"employer\": { \"href\": \"http://...\" } } Reference Expansion (Entity Expansion, Link Expansion) Span/Flat links in a JSON document, and return a combined \"big\" JSON Use expand parameter. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 GET /workers/xalclaef?expand=employer 200 OK { \"href\": \"http://....\", \"userName\": \"someOne\", //collection reference \"groups\": { \"href\": \"http://...\" } //instance reference \"employer\": { \"href\": \"http://...\", \"name\": \"CNPC\", \"address\": \"5850 Opus Pkwy\" ... } } Partial Representations GET /workers/xalclaef?fields=givenName,surname,employer(name) Collection Resource supports query params: Offset Limit 1 /applications?offset=50&limit=20","title":"REST+JSON API Design - Best Practices"},{"location":"archived/web/web_s02.html#restjson-api-design-best-practices","text":"","title":"REST+JSON API Design - Best Practices"},{"location":"archived/web/web_s02.html#why-rest","text":"Scalability not performance but more throughput, handles more request Generality well-known HTTP protocol, all languages can interactive with it (widely adopted). Independence Latency(Caching) use caching reduce latency Security has some facility to ensure security Encapsulation","title":"Why REST?"},{"location":"archived/web/web_s02.html#resource","text":"Collection Resource Instance Resource","title":"Resource"},{"location":"archived/web/web_s02.html#why-json","text":"Ubiquity Simplicity Readability human readable Scalability Flexibility easy to change.","title":"Why JSON?"},{"location":"archived/web/web_s02.html#hateoas","text":"H yermedia A s T he E ngine O f A pplication S tate See wiki: Very nice Example","title":"HATEOAS"},{"location":"archived/web/web_s02.html#put","text":"According RFC, put is idempotent. Clients can make that same call repeatedly while producing the same result. When use put, send all fields. Can be used for create and update. Cannot be used for partial update. Patch is for partial update. for Create , in case the id is already known. must put all data, (not partial) for idempotent. 1 2 PUT /applications/client-specified-id { ... } for Update , must full replacement for idempotent. 1 2 PUT /applications/some-id { ... }","title":"PUT"},{"location":"archived/web/web_s02.html#post","text":"for Create always a parent resource(collection resource) 1 2 3 4 POST /applications { \"name\": \"some-application\" } Response 201 and location in header: 1 2 201 created Location: http://server/applications/some-id for Update on instance resource, no idempotent required according RFC returns 200, no location, since location is already known. can be used on both full update and partial update. Partial update can reduce network traffic. 1 200 OK POST is the only verb that NOT idempotent","title":"POST"},{"location":"archived/web/web_s02.html#media-types","text":"Format Specification + Parsing Rules Request should always have Accept: header Response should always have Content-Type: header can create you own media type like: application/foo+json","title":"Media Types"},{"location":"archived/web/web_s02.html#version","text":"URL: https://api.ss.com/v1/ , easy to design, difficult to deploy VS * Media Type: application/json;application&v=1 , difficult to design, easy deploy","title":"Version"},{"location":"archived/web/web_s02.html#camelcase","text":"JSON should be camelCase, it is JavaScript convention. Do not break it.","title":"camelCase"},{"location":"archived/web/web_s02.html#datetimetimestamp","text":"Use the standard: ISO 8601: 1 \"dateCreated\": \"2012-07-10T18:02:24.343Z\" Use UTC!","title":"Date/Time/Timestamp"},{"location":"archived/web/web_s02.html#href","text":"Distributed Hypermedia Every accessible resource has a unique URL","title":"HREF"},{"location":"archived/web/web_s02.html#response-body","text":"GET: yes POST: return the representation(same data?) in the response when feasible add override(?_body=false)","title":"Response Body"},{"location":"archived/web/web_s02.html#header","text":"Accept header values comma delimited in order of preference 1 2 GET /applications/a1b2c3d4 Accept: application/json, text/plain means prefer application/json better.","title":"header"},{"location":"archived/web/web_s02.html#resource-extensions","text":"1 2 /applications/a1b2c3d4.json /applications/a1b2c3d4.csv Conventionally overrides Accept header","title":"Resource Extensions"},{"location":"archived/web/web_s02.html#resource-references-linking","text":"Linking is fundamental to scalability Instance Reference Collection Reference 1 2 3 4 5 6 7 8 9 10 11 12 13 14 GET /workers/xalclaef 200 OK { \"href\": \"http://....\", \"userName\": \"someOne\", //collection reference \"groups\": { \"href\": \"http://...\" } //instance reference \"employer\": { \"href\": \"http://...\" } }","title":"Resource References (Linking)"},{"location":"archived/web/web_s02.html#reference-expansion-entity-expansion-link-expansion","text":"Span/Flat links in a JSON document, and return a combined \"big\" JSON Use expand parameter. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 GET /workers/xalclaef?expand=employer 200 OK { \"href\": \"http://....\", \"userName\": \"someOne\", //collection reference \"groups\": { \"href\": \"http://...\" } //instance reference \"employer\": { \"href\": \"http://...\", \"name\": \"CNPC\", \"address\": \"5850 Opus Pkwy\" ... } }","title":"Reference Expansion (Entity Expansion, Link Expansion)"},{"location":"archived/web/web_s02.html#partial-representations","text":"GET /workers/xalclaef?fields=givenName,surname,employer(name)","title":"Partial Representations"},{"location":"archived/web/web_s02.html#collection-resource-supports-query-params","text":"Offset Limit 1 /applications?offset=50&limit=20","title":"Collection Resource supports query params:"},{"location":"archived/web/web_s03.html","text":"CORS and withCredentials issue Symptom When server have CORS enabled, cookie/session does not persist among requests. Solution Client: when send request should add withCredentials: true in header 1 2 3 4 let headers = new Headers (); headers . append ( 'Content-Type' , 'application/json' ); let options = new RequestOptions ({ headers : headers , withCredentials : true }); http . post ( 'http://localhost:3000/api/authenticate' , data , this . options ); Server: CORS header need adjust 1 2 res . header ( \"Access-Control-Allow-Origin\" , \"http://localhost:4200\" ); res . header ( \"Access-Control-Allow-Credentials\" , true ); Access-Control-Allow-Origin cannot use *, otherwise the following error: Response to preflight request doesn't pass access control check: The value of the 'Access-Control-Allow-Origin' header in the response must not be the wildcard '*' when the request's credentials mode is 'include'. Origin 'http://localhost:4200' is therefore not allowed access. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute. Additonal: preflight request","title":"CORS and withCredentials issue"},{"location":"archived/web/web_s03.html#cors-and-withcredentials-issue","text":"","title":"CORS and withCredentials issue"},{"location":"archived/web/web_s03.html#symptom","text":"When server have CORS enabled, cookie/session does not persist among requests.","title":"Symptom"},{"location":"archived/web/web_s03.html#solution","text":"","title":"Solution"},{"location":"archived/web/web_s03.html#client-when-send-request-should-add-withcredentials-true-in-header","text":"1 2 3 4 let headers = new Headers (); headers . append ( 'Content-Type' , 'application/json' ); let options = new RequestOptions ({ headers : headers , withCredentials : true }); http . post ( 'http://localhost:3000/api/authenticate' , data , this . options );","title":"Client: when send request should add withCredentials: true in header"},{"location":"archived/web/web_s03.html#server-cors-header-need-adjust","text":"1 2 res . header ( \"Access-Control-Allow-Origin\" , \"http://localhost:4200\" ); res . header ( \"Access-Control-Allow-Credentials\" , true ); Access-Control-Allow-Origin cannot use *, otherwise the following error: Response to preflight request doesn't pass access control check: The value of the 'Access-Control-Allow-Origin' header in the response must not be the wildcard '*' when the request's credentials mode is 'include'. Origin 'http://localhost:4200' is therefore not allowed access. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute. Additonal: preflight request","title":"Server: CORS header need adjust"},{"location":"k8s/helm_k8s.html","text":"About HELM \u4ec0\u4e48\u662fHELM HELM\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u7c7b\u4f3c\u4e8e YUM \u7684\u5305\u7ba1\u7406\u5668\uff0c\u662f\u90e8\u7f72\u73af\u5883\u7684\u6d41\u7a0b\u5c01\u88c5\u3002HELM\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u542b: chart \u548crelease: chart \u662f\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u7684\u4fe1\u606f\u96c6\u5408\uff0c \u5305\u62ec\u5404\u79cd Kubernetes \u5bf9\u8c61\u7684\u914d\u7f6e\u6a21\u677f\u3001 \u53c2\u6570\u5b9a\u4e49\u3001 \u4f9d\u8d56\u5173\u7cfb\u3001 \u6587\u6863\u8bf4\u660e\u7b49\u3002chart \u662f\u5e94\u7528\u90e8\u7f72\u7684\u81ea\u5305\u542b\u903b\u8f91\u5355\u5143\u3002\u53ef\u4ee5\u5c06chat\u60f3\u8c61\u6210apt, yum\u4e2d\u7684\u8f6f\u4ef6\u5b89\u88c5\u5305 release\u662fchart\u7684\u8fd0\u884c\u5b9e\u4f8b\uff0c\u4ee3\u8868\u4e86\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5e94\u7528\u3002\u5f53chart\u88ab\u5b89\u88c5\u5230kubernetes\u96c6\u7fa4\uff0c\u5c31\u751f\u6210\u4e00\u4e2arelease\u3002chart\u80fd\u591f\u591a\u6b21\u5b89\u88c5\u5230\u540c\u4e00\u4e2a\u96c6\u7fa4\uff0c\u6bcf\u6b21\u5b89\u88c5\u90fd\u662f\u4e00\u4e2arelease HELM \u5305\u542b\u4e24\u4e2a\u7ec4\u4ef6\uff1a HELM\u5ba2\u6237\u7aef\u548cTiller\u670d\u52a1\u5668: Install HELM 1 2 3 4 5 6 7 $ wget https://get.helm.sh/helm-v3.4.1-linux-amd64.tar.gz $ tar vxzf helm-v3.4.1-linux-amd64.tar.gz $ sudo mv linux-amd64/helm /usr/local/bin/helm $ helm version # clean up $ rm helm-v3.4.1-linux-amd64.tar.gz $ rm -rf linux-amd64 Initalize chart repo 1 2 # add and update repo $ helm repo add \"stable\" \"https://charts.helm.sh/stable\" --force-update Search chart 1 $ helm search hub kafka Install a package 1 $ helm install happy-panda stable/mariadb happy-panda is the release name Build HEML Template \u521b\u5efa\u6587\u4ef6\u5939 1 2 $ mkdir ./hello-world $ cd ./hello-world \u521b\u5efa\u81ea\u63cf\u8ff0\u6587\u4ef6Chart.yaml\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5fc5\u987b\u6709name\u548cversion\u5b9a\u4e49 1 2 3 4 $ cat << 'EOF' > -/Chart.yaml name: hello-world version: 1.0.0 EOF \u521b\u5efa\u6a21\u677f\u6587\u4ef6\uff0c\u7528\u4e8e\u751f\u6210 Kubernetes \u8d44\u6e90\u6e05\u5355(manifests) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 $ mkdir ./templates # folder name has to be templates $ cat << 'EOF' > ./templates/deployment.yaml apiVersion: extensions/v1beta1 kind: Deployment metadata: name: hello-world spec: replicas: 1 template: metadata: labels: app: hello-world spec: containers: - name: hello-world image: hub.atguigu.com/library/myapp:v1 ports: - containerPort: 8089 protocol: TCP EOF $ cat <<'EOF' > .itemplates/service.yaml apiVersion: v1 kind: Service metadata: name: hello-world spec: type: NodePort ports: - port: 8989 targetPort: 8980 protocol: TCP selector: app: hello-world EOF To install your template 1 $ helm install . Some HELM Commands list deployed releases 1 $ helm ls","title":"About HELM"},{"location":"k8s/helm_k8s.html#about-helm","text":"","title":"About HELM"},{"location":"k8s/helm_k8s.html#helm","text":"HELM\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u7c7b\u4f3c\u4e8e YUM \u7684\u5305\u7ba1\u7406\u5668\uff0c\u662f\u90e8\u7f72\u73af\u5883\u7684\u6d41\u7a0b\u5c01\u88c5\u3002HELM\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u542b: chart \u548crelease: chart \u662f\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u7684\u4fe1\u606f\u96c6\u5408\uff0c \u5305\u62ec\u5404\u79cd Kubernetes \u5bf9\u8c61\u7684\u914d\u7f6e\u6a21\u677f\u3001 \u53c2\u6570\u5b9a\u4e49\u3001 \u4f9d\u8d56\u5173\u7cfb\u3001 \u6587\u6863\u8bf4\u660e\u7b49\u3002chart \u662f\u5e94\u7528\u90e8\u7f72\u7684\u81ea\u5305\u542b\u903b\u8f91\u5355\u5143\u3002\u53ef\u4ee5\u5c06chat\u60f3\u8c61\u6210apt, yum\u4e2d\u7684\u8f6f\u4ef6\u5b89\u88c5\u5305 release\u662fchart\u7684\u8fd0\u884c\u5b9e\u4f8b\uff0c\u4ee3\u8868\u4e86\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5e94\u7528\u3002\u5f53chart\u88ab\u5b89\u88c5\u5230kubernetes\u96c6\u7fa4\uff0c\u5c31\u751f\u6210\u4e00\u4e2arelease\u3002chart\u80fd\u591f\u591a\u6b21\u5b89\u88c5\u5230\u540c\u4e00\u4e2a\u96c6\u7fa4\uff0c\u6bcf\u6b21\u5b89\u88c5\u90fd\u662f\u4e00\u4e2arelease","title":"\u4ec0\u4e48\u662fHELM"},{"location":"k8s/helm_k8s.html#helm-helmtiller","text":"","title":"HELM \u5305\u542b\u4e24\u4e2a\u7ec4\u4ef6\uff1a HELM\u5ba2\u6237\u7aef\u548cTiller\u670d\u52a1\u5668:"},{"location":"k8s/helm_k8s.html#install-helm","text":"1 2 3 4 5 6 7 $ wget https://get.helm.sh/helm-v3.4.1-linux-amd64.tar.gz $ tar vxzf helm-v3.4.1-linux-amd64.tar.gz $ sudo mv linux-amd64/helm /usr/local/bin/helm $ helm version # clean up $ rm helm-v3.4.1-linux-amd64.tar.gz $ rm -rf linux-amd64","title":"Install HELM"},{"location":"k8s/helm_k8s.html#initalize-chart-repo","text":"1 2 # add and update repo $ helm repo add \"stable\" \"https://charts.helm.sh/stable\" --force-update","title":"Initalize chart repo"},{"location":"k8s/helm_k8s.html#search-chart","text":"1 $ helm search hub kafka","title":"Search chart"},{"location":"k8s/helm_k8s.html#install-a-package","text":"1 $ helm install happy-panda stable/mariadb happy-panda is the release name","title":"Install a package"},{"location":"k8s/helm_k8s.html#build-heml-template","text":"\u521b\u5efa\u6587\u4ef6\u5939 1 2 $ mkdir ./hello-world $ cd ./hello-world \u521b\u5efa\u81ea\u63cf\u8ff0\u6587\u4ef6Chart.yaml\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5fc5\u987b\u6709name\u548cversion\u5b9a\u4e49 1 2 3 4 $ cat << 'EOF' > -/Chart.yaml name: hello-world version: 1.0.0 EOF \u521b\u5efa\u6a21\u677f\u6587\u4ef6\uff0c\u7528\u4e8e\u751f\u6210 Kubernetes \u8d44\u6e90\u6e05\u5355(manifests) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 $ mkdir ./templates # folder name has to be templates $ cat << 'EOF' > ./templates/deployment.yaml apiVersion: extensions/v1beta1 kind: Deployment metadata: name: hello-world spec: replicas: 1 template: metadata: labels: app: hello-world spec: containers: - name: hello-world image: hub.atguigu.com/library/myapp:v1 ports: - containerPort: 8089 protocol: TCP EOF $ cat <<'EOF' > .itemplates/service.yaml apiVersion: v1 kind: Service metadata: name: hello-world spec: type: NodePort ports: - port: 8989 targetPort: 8980 protocol: TCP selector: app: hello-world EOF To install your template 1 $ helm install .","title":"Build HEML Template"},{"location":"k8s/helm_k8s.html#some-helm-commands","text":"list deployed releases 1 $ helm ls","title":"Some HELM Commands"},{"location":"k8s/k3s.html","text":"Install kubectl 1 2 3 4 5 6 sudo apt update && sudo apt upgrade -y curl -LO \"https://storage.googleapis.com/kubernetes-release/release/ $( curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ) /bin/linux/amd64/kubectl\" chmod a+x ./kubectl ./kubectl version --client sudo mv ./kubectl /usr/local/bin/kubectl kubectl version --client Install k3d 1 2 curl -s https://raw.githubusercontent.com/rancher/k3d/main/install.sh | bash k3d --help Create cluster 1 2 3 4 5 # t500 is the cluster name # if you want generate cert for addition ips add -x --tls-san=\"1.2.3.4\" # check https://github.com/rancher/k3d/issues/36 k3d cluster create t500 --api-port 6443 --servers 1 --agents 1 -p \"30000-32767:30000-32767@server[0]\" kubectl custer--info Deploy portainer 1 2 3 4 5 6 7 kubectl get sc kubectl create namespace portainer kubectl apply -n portainer -f https://raw.githubusercontent.com/portainer/k8s/master/deploy/manifests/portainer/portainer.yaml # show portainer pod kubectl get pods --namespace portainer # show pod details: portainer-c999955f7-khw2b from last command output kubectl describe pods portainer-c999955f7-khw2b --namespace portainer now go to http://your_ip:30777/#!/init/admin see portainer web ui","title":"Install kubectl"},{"location":"k8s/k3s.html#install-kubectl","text":"1 2 3 4 5 6 sudo apt update && sudo apt upgrade -y curl -LO \"https://storage.googleapis.com/kubernetes-release/release/ $( curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ) /bin/linux/amd64/kubectl\" chmod a+x ./kubectl ./kubectl version --client sudo mv ./kubectl /usr/local/bin/kubectl kubectl version --client","title":"Install kubectl"},{"location":"k8s/k3s.html#install-k3d","text":"1 2 curl -s https://raw.githubusercontent.com/rancher/k3d/main/install.sh | bash k3d --help","title":"Install k3d"},{"location":"k8s/k3s.html#create-cluster","text":"1 2 3 4 5 # t500 is the cluster name # if you want generate cert for addition ips add -x --tls-san=\"1.2.3.4\" # check https://github.com/rancher/k3d/issues/36 k3d cluster create t500 --api-port 6443 --servers 1 --agents 1 -p \"30000-32767:30000-32767@server[0]\" kubectl custer--info","title":"Create cluster"},{"location":"k8s/k3s.html#deploy-portainer","text":"1 2 3 4 5 6 7 kubectl get sc kubectl create namespace portainer kubectl apply -n portainer -f https://raw.githubusercontent.com/portainer/k8s/master/deploy/manifests/portainer/portainer.yaml # show portainer pod kubectl get pods --namespace portainer # show pod details: portainer-c999955f7-khw2b from last command output kubectl describe pods portainer-c999955f7-khw2b --namespace portainer now go to http://your_ip:30777/#!/init/admin see portainer web ui","title":"Deploy portainer"},{"location":"k8s/k8s-setup.html","text":"Install and Configure Kubernetes (k8s) on Ubuntu 18.04 LTS VM Description hostname ip Master Node k8s-master 192.168.1.160 Slave Node 1 k8s-worker-node1 192.168.1.161 Slave Node 2 k8s-worker-node1 192.168.1.163 In HyperV: master node need 2 cpus Setup hostname on all nodes 1 sudo nano /etc/cloud/cloud.cfg change the following line to true : 1 2 # This will cause the set+update hostname module to not operate (if true) preserve_hostname: true on 160 1 2 sudo hostnamectl set-hostname \"k8s-master\" exec bash on 161 1 2 sudo hostnamectl set-hostname k8s-worker-node1 exec bash on 163 1 2 sudo hostnamectl set-hostname k8s-worker-node2 exec bash Tweak hosts file on all nodes 1 sudo nano /etc/hosts add the following: 1 2 3 192.168.1.160 k8s-master 192.168.1.161 k8s-worker-node1 192.168.1.163 k8s-worker-node2 Install Docker on all nodes 1 2 3 4 sudo apt-get install docker.io -y sudo systemctl start docker sudo systemctl enable docker docker --version Install K8 on all nodes 1 2 3 4 5 6 sudo apt-get install apt-transport-https curl -y curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add sudo apt-add-repository \"deb http://apt.kubernetes.io/ kubernetes-xenial main\" sudo swapoff -a #disable swap, edit /etc/fstab comment out the swap line, if you want disable it permanently sudo apt-get install kubeadm -y kubeadm version Init master node (160) 1 sudo kubeadm init --pod-network-cidr = 172 .16.0.0/12 #any network Example output like: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ... [bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token [bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster [bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace [addons] Applied essential addon: CoreDNS [addons] Applied essential addon: kube-proxy Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ Then you can join any number of worker nodes by running the following on each as root: kubeadm join 192.168.1.160:6443 --token hmfqsj.pblv9xpfcde5n3zy \\ --discovery-token-ca-cert-hash sha256:af0a947b5933c06232397361f71fc9b553068775f0fb776a534e761bf74c7afb Run the command in the output: 1 2 3 mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Check node: 1 kubectl get nodes Deploy Flannel as Pod Network from Master node and verify pod namespaces 1 2 3 sudo kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml sudo kubectl get nodes sudo kubectl get pods --all-namespaces ## Add Slave or Worker Nodes to the Cluster Run the command in master output, like the following: bash sudo kubeadm join 192.168.1.160:6443 --token hmfqsj.pblv9xpfcde5n3zy \\ --discovery-token-ca-cert-hash sha256:af0a947b5933c06232397361f71fc9b553068775f0fb776a534e761bf74c7afb","title":"Install and Configure Kubernetes (k8s) on Ubuntu 18.04 LTS"},{"location":"k8s/k8s-setup.html#install-and-configure-kubernetes-k8s-on-ubuntu-1804-lts","text":"","title":"Install and Configure Kubernetes (k8s) on Ubuntu 18.04 LTS"},{"location":"k8s/k8s-setup.html#vm","text":"Description hostname ip Master Node k8s-master 192.168.1.160 Slave Node 1 k8s-worker-node1 192.168.1.161 Slave Node 2 k8s-worker-node1 192.168.1.163 In HyperV: master node need 2 cpus","title":"VM"},{"location":"k8s/k8s-setup.html#setup-hostname","text":"on all nodes 1 sudo nano /etc/cloud/cloud.cfg change the following line to true : 1 2 # This will cause the set+update hostname module to not operate (if true) preserve_hostname: true on 160 1 2 sudo hostnamectl set-hostname \"k8s-master\" exec bash on 161 1 2 sudo hostnamectl set-hostname k8s-worker-node1 exec bash on 163 1 2 sudo hostnamectl set-hostname k8s-worker-node2 exec bash","title":"Setup hostname"},{"location":"k8s/k8s-setup.html#tweak-hosts-file-on-all-nodes","text":"1 sudo nano /etc/hosts add the following: 1 2 3 192.168.1.160 k8s-master 192.168.1.161 k8s-worker-node1 192.168.1.163 k8s-worker-node2","title":"Tweak hosts file on all nodes"},{"location":"k8s/k8s-setup.html#install-docker-on-all-nodes","text":"1 2 3 4 sudo apt-get install docker.io -y sudo systemctl start docker sudo systemctl enable docker docker --version","title":"Install Docker on all nodes"},{"location":"k8s/k8s-setup.html#install-k8-on-all-nodes","text":"1 2 3 4 5 6 sudo apt-get install apt-transport-https curl -y curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add sudo apt-add-repository \"deb http://apt.kubernetes.io/ kubernetes-xenial main\" sudo swapoff -a #disable swap, edit /etc/fstab comment out the swap line, if you want disable it permanently sudo apt-get install kubeadm -y kubeadm version","title":"Install K8 on all nodes"},{"location":"k8s/k8s-setup.html#init-master-node-160","text":"1 sudo kubeadm init --pod-network-cidr = 172 .16.0.0/12 #any network Example output like: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 ... [bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token [bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster [bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace [addons] Applied essential addon: CoreDNS [addons] Applied essential addon: kube-proxy Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ Then you can join any number of worker nodes by running the following on each as root: kubeadm join 192.168.1.160:6443 --token hmfqsj.pblv9xpfcde5n3zy \\ --discovery-token-ca-cert-hash sha256:af0a947b5933c06232397361f71fc9b553068775f0fb776a534e761bf74c7afb Run the command in the output: 1 2 3 mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Check node: 1 kubectl get nodes Deploy Flannel as Pod Network from Master node and verify pod namespaces 1 2 3 sudo kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml sudo kubectl get nodes sudo kubectl get pods --all-namespaces ## Add Slave or Worker Nodes to the Cluster Run the command in master output, like the following: bash sudo kubeadm join 192.168.1.160:6443 --token hmfqsj.pblv9xpfcde5n3zy \\ --discovery-token-ca-cert-hash sha256:af0a947b5933c06232397361f71fc9b553068775f0fb776a534e761bf74c7afb","title":"Init master node (160)"},{"location":"k8s/rke_k8s.html","text":"Create K8S cluster using RKE Environments: OS RAM Disk IP Client WSL: Kali-linux n/a n/a n/a Master Ubuntu 20.04 4G 64G 192.168.1.171 Worker-1 Ubuntu 20.04 4G 64G 192.168.1.172 Worker-2 Ubuntu 20.04 4G 64G 192.168.1.173 Install docker on Master, Worker-1, Worker-2 1 2 3 4 sudo apt update && sudo apt upgrade -y curl https://releases.rancher.com/install-docker/19.03.sh | sh sudo apt update && sudo apt upgrade -y sudo reboot The following steps should be taken on the Client machine Install RKE 1 2 3 4 5 wget https://github.com/rancher/rke/releases/download/v1.0.14/rke_linux-amd64 mv rke_linux-amd64 rke chmod a+x rke sudo mv rke /usr/local/bin rke --version Prepare ssh id, I give no passphrase to make it easy 1 2 3 4 5 ssh-keygen # copy to all nodes ssh-copy-id lihe@192.168.1.171 ssh-copy-id lihe@192.168.1.172 ssh-copy-id lihe@192.168.1.173 Prepare cluster.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # prepare working folder, we put all our files there mkdir ~/k8rke cd ~/k8rke cat << EOF > cluster.yml nodes: - address: 192.168.1.171 user: lihe role: - controlplane - etcd - worker - address: 192.168.1.172 user: lihe role: - worker - address: 192.168.1.173 user: lihe role: - worker EOF Create k8s cluster using rke 1 rke up Long time wait. Known Issue: 1 FATA[0722] Failed to get job complete status for job rke-network-plugin-deploy-job in namespace kube-system Solution run rke up again: 1 rke up Install kubectl 1 2 3 4 curl -LO \"https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\" chmod a+x kubectl sudo mv kubectl /usr/local/bin kubectl version --client Prepare config file for kubectl when create cluster via rke up , a file named kube_config_cluster.yml is created under ~/k8rke . That is the config file for kubectl connect to the cluster. 1 2 mkdir ~/.kube cp ~/k8rke/kube_config_cluster.yml ~/.kube/config Verify connection 1 kubectl cluster-info Should see something like the following: 1 2 3 4 Kubernetes master is running at https://192.168.1.171:6443 CoreDNS is running at https://192.168.1.171:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'. Connect cluster using LENS Install LENS: https://k8slens.dev/ Add cluster: use the same config file for kubectl Turn on Metrics Stack (Prometheus) on LENS: right click the cluster icon, then settings","title":"Create K8S cluster using RKE"},{"location":"k8s/rke_k8s.html#create-k8s-cluster-using-rke","text":"","title":"Create K8S cluster using RKE"},{"location":"k8s/rke_k8s.html#environments","text":"OS RAM Disk IP Client WSL: Kali-linux n/a n/a n/a Master Ubuntu 20.04 4G 64G 192.168.1.171 Worker-1 Ubuntu 20.04 4G 64G 192.168.1.172 Worker-2 Ubuntu 20.04 4G 64G 192.168.1.173","title":"Environments:"},{"location":"k8s/rke_k8s.html#install-docker-on-master-worker-1-worker-2","text":"1 2 3 4 sudo apt update && sudo apt upgrade -y curl https://releases.rancher.com/install-docker/19.03.sh | sh sudo apt update && sudo apt upgrade -y sudo reboot","title":"Install docker on Master, Worker-1, Worker-2"},{"location":"k8s/rke_k8s.html#the-following-steps-should-be-taken-on-the-client-machine","text":"","title":"The following steps should be taken on the Client machine"},{"location":"k8s/rke_k8s.html#install-rke","text":"1 2 3 4 5 wget https://github.com/rancher/rke/releases/download/v1.0.14/rke_linux-amd64 mv rke_linux-amd64 rke chmod a+x rke sudo mv rke /usr/local/bin rke --version","title":"Install RKE"},{"location":"k8s/rke_k8s.html#prepare-ssh-id-i-give-no-passphrase-to-make-it-easy","text":"1 2 3 4 5 ssh-keygen # copy to all nodes ssh-copy-id lihe@192.168.1.171 ssh-copy-id lihe@192.168.1.172 ssh-copy-id lihe@192.168.1.173","title":"Prepare ssh id, I give no passphrase to make it easy"},{"location":"k8s/rke_k8s.html#prepare-clusteryml","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # prepare working folder, we put all our files there mkdir ~/k8rke cd ~/k8rke cat << EOF > cluster.yml nodes: - address: 192.168.1.171 user: lihe role: - controlplane - etcd - worker - address: 192.168.1.172 user: lihe role: - worker - address: 192.168.1.173 user: lihe role: - worker EOF","title":"Prepare cluster.yml"},{"location":"k8s/rke_k8s.html#create-k8s-cluster-using-rke_1","text":"1 rke up Long time wait.","title":"Create k8s cluster using rke"},{"location":"k8s/rke_k8s.html#known-issue","text":"1 FATA[0722] Failed to get job complete status for job rke-network-plugin-deploy-job in namespace kube-system Solution run rke up again: 1 rke up","title":"Known Issue:"},{"location":"k8s/rke_k8s.html#install-kubectl","text":"1 2 3 4 curl -LO \"https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\" chmod a+x kubectl sudo mv kubectl /usr/local/bin kubectl version --client","title":"Install kubectl"},{"location":"k8s/rke_k8s.html#prepare-config-file-for-kubectl","text":"when create cluster via rke up , a file named kube_config_cluster.yml is created under ~/k8rke . That is the config file for kubectl connect to the cluster. 1 2 mkdir ~/.kube cp ~/k8rke/kube_config_cluster.yml ~/.kube/config","title":"Prepare config file for kubectl"},{"location":"k8s/rke_k8s.html#verify-connection","text":"1 kubectl cluster-info Should see something like the following: 1 2 3 4 Kubernetes master is running at https://192.168.1.171:6443 CoreDNS is running at https://192.168.1.171:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.","title":"Verify connection"},{"location":"k8s/rke_k8s.html#connect-cluster-using-lens","text":"Install LENS: https://k8slens.dev/ Add cluster: use the same config file for kubectl Turn on Metrics Stack (Prometheus) on LENS: right click the cluster icon, then settings","title":"Connect cluster using LENS"},{"location":"ops/01_vault.html","text":"Install HashCorp Vault on Raspberry Pi Dowload arm version binary https://www.vaultproject.io/downloads 1 2 cd ~/Downloads wget https://releases.hashicorp.com/vault/1.6.2/vault_1.6.2_linux_arm.zip Prepare file and folder 1 2 3 sudo mkdir /opt/vault cd /opt/vault sudo unzip ~/Downloads/vault_1.6.2_linux_arm.zip Prepare SSL cert 1 2 3 4 5 6 7 8 9 sudo mkdir /opt/vault/certs cd /opt/vault/certs sudo openssl req -newkey rsa:4096 \\ -x509 \\ -sha256 \\ -days 3650 \\ -nodes \\ -out vault.crt \\ -keyout vault.key Config Vault 1 2 3 sudo mkdir /opt/vault/data sudo mkdir /opt/vault/config sudo nano /opt/vault/config/config.hcl File content: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 storage \"raft\" { path = \"/opt/vault/data\" node_id = \"primary\" } listener \"tcp\" { address = \"0.0.0.0:8200\" tls_cert_file = \"/opt/vault/certs/vault.crt\" tls_key_file = \"/opt/vault/certs/vault.key\" } api_addr = \"https://0.0.0.0:8200\" cluster_addr = \"https://0.0.0.0:8201\" ui = true","title":"Install HashCorp Vault on Raspberry Pi"},{"location":"ops/01_vault.html#install-hashcorp-vault-on-raspberry-pi","text":"","title":"Install HashCorp Vault on Raspberry Pi"},{"location":"ops/01_vault.html#dowload-arm-version-binary","text":"https://www.vaultproject.io/downloads 1 2 cd ~/Downloads wget https://releases.hashicorp.com/vault/1.6.2/vault_1.6.2_linux_arm.zip","title":"Dowload arm version binary"},{"location":"ops/01_vault.html#prepare-file-and-folder","text":"1 2 3 sudo mkdir /opt/vault cd /opt/vault sudo unzip ~/Downloads/vault_1.6.2_linux_arm.zip","title":"Prepare file and folder"},{"location":"ops/01_vault.html#prepare-ssl-cert","text":"1 2 3 4 5 6 7 8 9 sudo mkdir /opt/vault/certs cd /opt/vault/certs sudo openssl req -newkey rsa:4096 \\ -x509 \\ -sha256 \\ -days 3650 \\ -nodes \\ -out vault.crt \\ -keyout vault.key","title":"Prepare SSL cert"},{"location":"ops/01_vault.html#config-vault","text":"1 2 3 sudo mkdir /opt/vault/data sudo mkdir /opt/vault/config sudo nano /opt/vault/config/config.hcl File content: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 storage \"raft\" { path = \"/opt/vault/data\" node_id = \"primary\" } listener \"tcp\" { address = \"0.0.0.0:8200\" tls_cert_file = \"/opt/vault/certs/vault.crt\" tls_key_file = \"/opt/vault/certs/vault.key\" } api_addr = \"https://0.0.0.0:8200\" cluster_addr = \"https://0.0.0.0:8201\" ui = true","title":"Config Vault"},{"location":"ops/02_jenkins_on_pi.html","text":"Install Jenkins on raspberry pi 1 2 3 4 5 6 7 sudo apt update && sudo apt upgrade -y sudo apt install openjdk-11-jre -y java --version wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add - echo 'deb https://pkg.jenkins.io/debian binary/' | sudo tee -a /etc/apt/sources.list.d/jenkins.list sudo apt update sudo apt install jenkins -y","title":"Install Jenkins on raspberry pi"},{"location":"ops/02_jenkins_on_pi.html#install-jenkins-on-raspberry-pi","text":"1 2 3 4 5 6 7 sudo apt update && sudo apt upgrade -y sudo apt install openjdk-11-jre -y java --version wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add - echo 'deb https://pkg.jenkins.io/debian binary/' | sudo tee -a /etc/apt/sources.list.d/jenkins.list sudo apt update sudo apt install jenkins -y","title":"Install Jenkins on raspberry pi"},{"location":"redis/01_intro.html","text":"Redis Intro \u5e94\u7528\u573a\u666f \u914d\u5408\u5173\u7cfb\u578b\u6570\u636e\u5e93\u505a\u9ad8\u901f\u7f13\u5b58 \u9ad8\u9891\uff0c \u70ed\u70b9\u6570\u636e\uff0c\u964d\u4f4eIO \u5206\u5e03\u5f0f\u6784\u67b6\uff0c\u505asession\u5171\u4eab \u7531\u4e8e\u5176\u62e5\u6709\u6301\u4e45\u5316\u80fd\u529b\uff0c\u5229\u7528\u5176\u591a\u6837\u7684\u6570\u636e\u7ed3\u6784\u5b58\u50a8\u7279\u5b9a\u7684\u6570\u636e \u6700\u65b0N\u4e2a\u6570\u636e \uff08\u901a\u8fc7List\u5b9e\u73b0\u6309\u81ea\u7136\u65f6\u95f4\u6392\u5e8f\u7684\u6570\u636e\uff09 \u6392\u884c\u699c\uff0c Top N\uff08\u5229\u7528zset\u6709\u5e8f\u96c6\u5408\uff09 \u65f6\u6548\u6027\u6570\u636e\uff0c\u6bd4\u5982\u624b\u673a\u9a8c\u8bc1\u7801\uff08Expire\u8fc7\u671f\uff09 \u8ba1\u6570\u5668\uff0c\u79d2\u6740\uff08\u539f\u5b50\u6027\uff0c\u81ea\u589e\u51cf\u65b9\u6cd5INCR, DECR) \u53bb\u91cd\uff08\u5229\u7528Set\u96c6\u5408\uff09 \u6784\u5efa\u961f\u5217\uff08\u5229\u7528LIst\uff09 \u53d1\u5e03/\u8ba2\u9605 (pub/sub) Redis\u662f\u5355\u7ebf\u7a0b\u5341\u591a\u8defIO\u590d\u7528\u6280\u672f \u591a\u8def\u590d\u7528\u662f\u6307\u4f7f\u7528\u4e00\u4e2a\u7ebf\u7a0b\u6765\u68c0\u67e5\u591a\u4e2a\u6587{\u725b\u63cf\u8ff0\u7b26 (Socket) \u7684\u5c31\u7eea\u72b6\u6001\uff0c \u6bd4\u5982\u8c03\u7528select\u548cepoll\u51fd\u6570, \u4f20\u5165\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u7eea\u5219\u8fd4\u56de, \u5426\u5219\u963b\u585e\u76f4\u5230\u8d85\u65f6\u3002 \u5f97\u5230\u5c31\u7eea\u72b6\u6001\u540e\u8fdb\u884c\u771f\u6b63\u7684\u64cd\u4f5c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u7ebf\u7a0b\u91cc\u6267\u884c, \u4e5f\u53ef\u4ee5\u542f\u52a8\u7ebf\u7a0b\u6267\u884c (\u6bd4\u5982\u4f7f\u7528\u7ebf\u7a0b\u6c60) \u3002 Redis \u4e94\u5927\u6570\u636e\u7c7b\u578b 1 2 3 4 5 * string * set * list * hash * zset By default Redis has 16 db, can be configure to more or less. select 1 switch to db 1","title":"Redis Intro"},{"location":"redis/01_intro.html#redis-intro","text":"","title":"Redis Intro"},{"location":"redis/01_intro.html#_1","text":"\u914d\u5408\u5173\u7cfb\u578b\u6570\u636e\u5e93\u505a\u9ad8\u901f\u7f13\u5b58 \u9ad8\u9891\uff0c \u70ed\u70b9\u6570\u636e\uff0c\u964d\u4f4eIO \u5206\u5e03\u5f0f\u6784\u67b6\uff0c\u505asession\u5171\u4eab \u7531\u4e8e\u5176\u62e5\u6709\u6301\u4e45\u5316\u80fd\u529b\uff0c\u5229\u7528\u5176\u591a\u6837\u7684\u6570\u636e\u7ed3\u6784\u5b58\u50a8\u7279\u5b9a\u7684\u6570\u636e \u6700\u65b0N\u4e2a\u6570\u636e \uff08\u901a\u8fc7List\u5b9e\u73b0\u6309\u81ea\u7136\u65f6\u95f4\u6392\u5e8f\u7684\u6570\u636e\uff09 \u6392\u884c\u699c\uff0c Top N\uff08\u5229\u7528zset\u6709\u5e8f\u96c6\u5408\uff09 \u65f6\u6548\u6027\u6570\u636e\uff0c\u6bd4\u5982\u624b\u673a\u9a8c\u8bc1\u7801\uff08Expire\u8fc7\u671f\uff09 \u8ba1\u6570\u5668\uff0c\u79d2\u6740\uff08\u539f\u5b50\u6027\uff0c\u81ea\u589e\u51cf\u65b9\u6cd5INCR, DECR) \u53bb\u91cd\uff08\u5229\u7528Set\u96c6\u5408\uff09 \u6784\u5efa\u961f\u5217\uff08\u5229\u7528LIst\uff09 \u53d1\u5e03/\u8ba2\u9605 (pub/sub)","title":"\u5e94\u7528\u573a\u666f"},{"location":"redis/01_intro.html#redisio","text":"\u591a\u8def\u590d\u7528\u662f\u6307\u4f7f\u7528\u4e00\u4e2a\u7ebf\u7a0b\u6765\u68c0\u67e5\u591a\u4e2a\u6587{\u725b\u63cf\u8ff0\u7b26 (Socket) \u7684\u5c31\u7eea\u72b6\u6001\uff0c \u6bd4\u5982\u8c03\u7528select\u548cepoll\u51fd\u6570, \u4f20\u5165\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u7eea\u5219\u8fd4\u56de, \u5426\u5219\u963b\u585e\u76f4\u5230\u8d85\u65f6\u3002 \u5f97\u5230\u5c31\u7eea\u72b6\u6001\u540e\u8fdb\u884c\u771f\u6b63\u7684\u64cd\u4f5c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u7ebf\u7a0b\u91cc\u6267\u884c, \u4e5f\u53ef\u4ee5\u542f\u52a8\u7ebf\u7a0b\u6267\u884c (\u6bd4\u5982\u4f7f\u7528\u7ebf\u7a0b\u6c60) \u3002","title":"Redis\u662f\u5355\u7ebf\u7a0b\u5341\u591a\u8defIO\u590d\u7528\u6280\u672f"},{"location":"redis/01_intro.html#redis","text":"1 2 3 4 5 * string * set * list * hash * zset By default Redis has 16 db, can be configure to more or less. select 1 switch to db 1","title":"Redis \u4e94\u5927\u6570\u636e\u7c7b\u578b"},{"location":"redis/02_key_ops.html","text":"Common Operations on Key Commands Description keys * get all keys which match the patter * for all keys exists <key> check if key exists type <key> check value type for the key del <key> delete key expire <key> <seconds> set expire time in seconds ttl <key> check time to live for a key, -1: never expire, -2: expired dbsize check current database key count flushdb delete all keys under current db flushall delete all keys across all dbs","title":"Common Operations on Key"},{"location":"redis/02_key_ops.html#common-operations-on-key","text":"Commands Description keys * get all keys which match the patter * for all keys exists <key> check if key exists type <key> check value type for the key del <key> delete key expire <key> <seconds> set expire time in seconds ttl <key> check time to live for a key, -1: never expire, -2: expired dbsize check current database key count flushdb delete all keys under current db flushall delete all keys across all dbs","title":"Common Operations on Key"},{"location":"redis/03_string.html","text":"String String\u662fRedis\u6700\u57fa\u672c\u7684\u7c7b\u578b, \u4f60\u53ef\u4ee5\u7406\u89e3\u6210\u4e0eMemcached\u4e00\u6a21\u4e00\u6837\u7684\u7c7b\u578b, \u4e00\u4e2akey\u5bf9\u5e94\u4e00\u4e2avalue. String\u7c7b\u578b\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684. \u610f\u5473\u7740Redis\u7684string\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u6570\u636e. \u6bd4\u5982jpg\u56fe\u7247\u6216\u8005\u5e8f\u5217\u5316\u7684\u5bf9\u8c61. \u4e00\u4e2aRedis\u4e2d\u5b57\u7b26\u4e32value\u6700\u591a\u53ef\u4ee5\u662f512M Operations command description get <key> \u67e5\u8be2\u5bf9\u5e94\u952e\u503c set <key> <value> \u6dfb\u52a0\u952e\u503c\u5bf9 append <key> <value> \u5c06\u7ed9\u5b9a\u7684value\u8ffd\u52a0\u5230\u539f\u503c\u7684\u672b\u5c3e strlen <key> \u83b7\u5f97\u503c\u7684\u957f\u5ea6 setnx <key> <value> \u53ea\u6709\u5728key\u4e0d\u5b58\u5728\u65f6\u8bbe\u7f6e key\u7684\u503c incr <key> \u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c+1 \u53ea\u80fd\u5bf9\u6570\u5b57\u503c\u64cd\u4f5c, \u5982\u679c\u4e3a\u7a7a, \u65b0\u589e\u503c\u4e3a1 decr <key> \u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c-1 \u53ea\u80fd\u5bf9\u6570\u5b57\u503c\u64cd\u4f5c, \u5982\u679c\u4e3a\u7a7a, \u65b0\u589e\u503c\u4e3a-1 incrby/decrby <key> <step> \u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c\u589e\u51cf, \u81ea\u5b9a\u4e49\u6b65\u957f mset <k1> <v1> <k2> <v2> ... \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-Value\u5bf9 mget <k1> <k2> ... \u540c\u65f6\u83b7\u53d6\u4e00\u4e2a\u6216\u591a\u4e2avalue msetnx <k1> <v2> <k2> <v2> ... \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-Value\u5bf9, \u5f53\u4e14\u4ec5\u5f53\u6240\u6709\u7ed9\u5b9akey\u90fd\u4e0d\u5b58\u5728 getrange <key> <start> <end> get value in range [start, end]. like substring setrange <key> <start> <value> overwrite value on key with position start setex <key> <expire> <value> set value with expire in seconds getset <ke> <value> set new value and return the old value","title":"String"},{"location":"redis/03_string.html#string","text":"String\u662fRedis\u6700\u57fa\u672c\u7684\u7c7b\u578b, \u4f60\u53ef\u4ee5\u7406\u89e3\u6210\u4e0eMemcached\u4e00\u6a21\u4e00\u6837\u7684\u7c7b\u578b, \u4e00\u4e2akey\u5bf9\u5e94\u4e00\u4e2avalue. String\u7c7b\u578b\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684. \u610f\u5473\u7740Redis\u7684string\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u6570\u636e. \u6bd4\u5982jpg\u56fe\u7247\u6216\u8005\u5e8f\u5217\u5316\u7684\u5bf9\u8c61. \u4e00\u4e2aRedis\u4e2d\u5b57\u7b26\u4e32value\u6700\u591a\u53ef\u4ee5\u662f512M","title":"String"},{"location":"redis/03_string.html#operations","text":"command description get <key> \u67e5\u8be2\u5bf9\u5e94\u952e\u503c set <key> <value> \u6dfb\u52a0\u952e\u503c\u5bf9 append <key> <value> \u5c06\u7ed9\u5b9a\u7684value\u8ffd\u52a0\u5230\u539f\u503c\u7684\u672b\u5c3e strlen <key> \u83b7\u5f97\u503c\u7684\u957f\u5ea6 setnx <key> <value> \u53ea\u6709\u5728key\u4e0d\u5b58\u5728\u65f6\u8bbe\u7f6e key\u7684\u503c incr <key> \u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c+1 \u53ea\u80fd\u5bf9\u6570\u5b57\u503c\u64cd\u4f5c, \u5982\u679c\u4e3a\u7a7a, \u65b0\u589e\u503c\u4e3a1 decr <key> \u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c-1 \u53ea\u80fd\u5bf9\u6570\u5b57\u503c\u64cd\u4f5c, \u5982\u679c\u4e3a\u7a7a, \u65b0\u589e\u503c\u4e3a-1 incrby/decrby <key> <step> \u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c\u589e\u51cf, \u81ea\u5b9a\u4e49\u6b65\u957f mset <k1> <v1> <k2> <v2> ... \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-Value\u5bf9 mget <k1> <k2> ... \u540c\u65f6\u83b7\u53d6\u4e00\u4e2a\u6216\u591a\u4e2avalue msetnx <k1> <v2> <k2> <v2> ... \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-Value\u5bf9, \u5f53\u4e14\u4ec5\u5f53\u6240\u6709\u7ed9\u5b9akey\u90fd\u4e0d\u5b58\u5728 getrange <key> <start> <end> get value in range [start, end]. like substring setrange <key> <start> <value> overwrite value on key with position start setex <key> <expire> <value> set value with expire in seconds getset <ke> <value> set new value and return the old value","title":"Operations"},{"location":"redis/04_list.html","text":"List List \u5355\u952e\u591a\u503c Redis\u5217\u8868\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u5217\u8868, \u6309\u7167\u63d2\u5165\u987a\u5e8f\u6392\u5e8f. \u4f60\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u5230\u5217\u8868\u5934\u90e8 (\u5de6\u8fb9)\u6216\u8005\u5c3e\u90e8(\u53f3\u8fb9). \u5b83\u7684\u5e95\u5c42\u5b9e\u9645\u662f\u4e2a\u53cc\u5411\u94fe\u8868, \u5bf9\u4e24\u7aef\u7684\u64cd\u4f5c\u6027\u80fd\u5f88\u9ad8, \u901a\u8fc7\u7d22\u5f15\u4e0b\u6807\u7684\u64cd\u4f5c\u4e2d\u95f4\u7684\u8282\u70b9\u6027\u80fd\u4f1a\u8f83\u5dee\u3002 Commands lpush/rpush <key> <v1> <v2> ... insert 1 or more values from left/right lpop/rpop <key> pop a value from left/right if no value left, key will be deleted. rpoplpush <key1> <key2> pop value from right key1 and push left to key2 lrange <key> <start> <end> get elements by index in range lindex <key> <index> get element by index from left llen <key> get length of the list linsert <key> before <value> <newValue> insert the newValue after value from left lrem <key> <n> <value> delete n*value from left if n<0, from right if n=0, delete all value in list 1 2 3 4 lpush k1 vx vx vx lrem k1 2 vx lrange 0 -1 # output: vx","title":"List"},{"location":"redis/04_list.html#list","text":"","title":"List"},{"location":"redis/04_list.html#list_1","text":"\u5355\u952e\u591a\u503c Redis\u5217\u8868\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u5217\u8868, \u6309\u7167\u63d2\u5165\u987a\u5e8f\u6392\u5e8f. \u4f60\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u5230\u5217\u8868\u5934\u90e8 (\u5de6\u8fb9)\u6216\u8005\u5c3e\u90e8(\u53f3\u8fb9). \u5b83\u7684\u5e95\u5c42\u5b9e\u9645\u662f\u4e2a\u53cc\u5411\u94fe\u8868, \u5bf9\u4e24\u7aef\u7684\u64cd\u4f5c\u6027\u80fd\u5f88\u9ad8, \u901a\u8fc7\u7d22\u5f15\u4e0b\u6807\u7684\u64cd\u4f5c\u4e2d\u95f4\u7684\u8282\u70b9\u6027\u80fd\u4f1a\u8f83\u5dee\u3002","title":"List"},{"location":"redis/04_list.html#commands","text":"lpush/rpush <key> <v1> <v2> ... insert 1 or more values from left/right lpop/rpop <key> pop a value from left/right if no value left, key will be deleted. rpoplpush <key1> <key2> pop value from right key1 and push left to key2 lrange <key> <start> <end> get elements by index in range lindex <key> <index> get element by index from left llen <key> get length of the list linsert <key> before <value> <newValue> insert the newValue after value from left lrem <key> <n> <value> delete n*value from left if n<0, from right if n=0, delete all value in list 1 2 3 4 lpush k1 vx vx vx lrem k1 2 vx lrange 0 -1 # output: vx","title":"Commands"},{"location":"redis/05_set.html","text":"Set Set No duplicate values Not ordered O(1) add/delete/search Commands sadd <key> <v1> <v2>... add 1 or more values, if value already exists, it will be ignored smembers <key> get values from the set sismember <key> <value> check if value exists in set, 1: for true, 0: for false scard <key> get set size srem <key> <v1> <v2> remove value(s) no effect if value not in set returns delete count spop <key> pop out a value randomly srandmember key> <n> randomly read n values from set, values won't be removed sinter <key1> <key2> return values of insect of 2 sets sunion <key1> <key2> return values of union of 2 sets sdiff <key1> <key2> return values of key1 except key2","title":"Set"},{"location":"redis/05_set.html#set","text":"","title":"Set"},{"location":"redis/05_set.html#set_1","text":"No duplicate values Not ordered O(1) add/delete/search","title":"Set"},{"location":"redis/05_set.html#commands","text":"sadd <key> <v1> <v2>... add 1 or more values, if value already exists, it will be ignored smembers <key> get values from the set sismember <key> <value> check if value exists in set, 1: for true, 0: for false scard <key> get set size srem <key> <v1> <v2> remove value(s) no effect if value not in set returns delete count spop <key> pop out a value randomly srandmember key> <n> randomly read n values from set, values won't be removed sinter <key1> <key2> return values of insect of 2 sets sunion <key1> <key2> return values of union of 2 sets sdiff <key1> <key2> return values of key1 except key2","title":"Commands"},{"location":"redis/06_hash.html","text":"Hash Hash value is key: value pairs, like json / hashmap Commands hset <key> <field> <value> set field: value to hash (value of the key) hget <key> <field> get the value of field from hash hmset <key> <f1> <v1> <f2> <v2> ... set multiple field/value to hash hexists <key> <field> check if field in hash hkeys <key> list all fields in the hash hvals <key> list all values in the hash hincrby <key> <field> <increment> add increment to the value of field in hash if field not exist, will be added if value is not number, error hsetnx <key> <field> <value> only set field value when field not exists in hash","title":"Hash"},{"location":"redis/06_hash.html#hash","text":"","title":"Hash"},{"location":"redis/06_hash.html#hash_1","text":"value is key: value pairs, like json / hashmap","title":"Hash"},{"location":"redis/06_hash.html#commands","text":"hset <key> <field> <value> set field: value to hash (value of the key) hget <key> <field> get the value of field from hash hmset <key> <f1> <v1> <f2> <v2> ... set multiple field/value to hash hexists <key> <field> check if field in hash hkeys <key> list all fields in the hash hvals <key> list all values in the hash hincrby <key> <field> <increment> add increment to the value of field in hash if field not exist, will be added if value is not number, error hsetnx <key> <field> <value> only set field value when field not exists in hash","title":"Commands"},{"location":"redis/07_zset.html","text":"Zset (sorted set) Zset Zset is much like set, no duplicate values. but each value associated with a score, the score is used to sort (low to high. Value not duplicate, score can be duplicate Can be accessed by score range Commands zadd <key> <score1> <value1> <score2> <value2> ... insert 1 or more values to zset zrange <key> <start> <end> [withscores] return values which score in range `[start, end] withscores will also return the score with value. withscores will also return the score with value. zrangebyscore key min max [withscores] [limit offset count] Returns all the elements in the sorted set at key with a score between min and max (including elements with score equal to min or max). The elements are considered to be ordered from low to high scores. zrevrangebyscore key max min [withscores] [limit offset count] same with above, but reversed order zincrby <key> <increment> <value> add score=score+increment for value zrem <key> <value> remove value zcount <key> <min> <max> return count score in range zrank <key> <value> return value rank sorted by score, start form 0","title":"Zset (sorted set)"},{"location":"redis/07_zset.html#zset-sorted-set","text":"","title":"Zset (sorted set)"},{"location":"redis/07_zset.html#zset","text":"Zset is much like set, no duplicate values. but each value associated with a score, the score is used to sort (low to high. Value not duplicate, score can be duplicate Can be accessed by score range","title":"Zset"},{"location":"redis/07_zset.html#commands","text":"zadd <key> <score1> <value1> <score2> <value2> ... insert 1 or more values to zset zrange <key> <start> <end> [withscores] return values which score in range `[start, end] withscores will also return the score with value. withscores will also return the score with value. zrangebyscore key min max [withscores] [limit offset count] Returns all the elements in the sorted set at key with a score between min and max (including elements with score equal to min or max). The elements are considered to be ordered from low to high scores. zrevrangebyscore key max min [withscores] [limit offset count] same with above, but reversed order zincrby <key> <increment> <value> add score=score+increment for value zrem <key> <value> remove value zcount <key> <min> <max> return count score in range zrank <key> <value> return value rank sorted by score, start form 0","title":"Commands"},{"location":"redis/08_redis_conf.html","text":"Redis configuration file redis.conf docker image: docker.io/bitnami/redis:latest, location: /opt/bitnami/redis/etc/redis.conf tcp-backlog depends on /proc/sys/net/core/somaxconn, need set both. maxmemory-policy : MAXMEMORY POLICY, how Redis will select what to remove when maxmemory is reached. You can select one from the following behaviors: volatile-lru -> Evict using approximated LRU, only keys with an expire set. allkeys-lru -> Evict any key using approximated LRU. volatile-lfu -> Evict using approximated LFU, only keys with an expire set. allkeys-lfu -> Evict any key using approximated LFU. volatile-random -> Remove a random key having an expire set. allkeys-random -> Remove a random key, any key. volatile-ttl -> Remove the key with the nearest expire time (minor TTL) noeviction -> Don't evict anything, just return an error on write operations. LRU means Least Recently Used LFU means Least Frequently Used Both LRU, LFU and volatile-ttl are implemented using approximated randomized algorithms.","title":"Redis configuration file"},{"location":"redis/08_redis_conf.html#redis-configuration-file","text":"","title":"Redis configuration file"},{"location":"redis/08_redis_conf.html#redisconf","text":"docker image: docker.io/bitnami/redis:latest, location: /opt/bitnami/redis/etc/redis.conf tcp-backlog depends on /proc/sys/net/core/somaxconn, need set both. maxmemory-policy : MAXMEMORY POLICY, how Redis will select what to remove when maxmemory is reached. You can select one from the following behaviors: volatile-lru -> Evict using approximated LRU, only keys with an expire set. allkeys-lru -> Evict any key using approximated LRU. volatile-lfu -> Evict using approximated LFU, only keys with an expire set. allkeys-lfu -> Evict any key using approximated LFU. volatile-random -> Remove a random key having an expire set. allkeys-random -> Remove a random key, any key. volatile-ttl -> Remove the key with the nearest expire time (minor TTL) noeviction -> Don't evict anything, just return an error on write operations. LRU means Least Recently Used LFU means Least Frequently Used Both LRU, LFU and volatile-ttl are implemented using approximated randomized algorithms.","title":"redis.conf"},{"location":"redis/09_transaction.html","text":"Transactions MULTI, EXEC, DISCARD and WATCH are the foundation of transactions in Redis. They allow the execution of a group of commands in a single step, with two important guarantees: All the commands in a transaction are serialized and executed sequentially. Either all of the commands or none are processed(processed does not mean success) , so a Redis transaction is also atomic. Errors inside a transaction does not rollback . Related commands DISCARD EXEC MULTI UNWATCH WATCH No roll back Redis\u7684\u4e8b\u52a1\u5b9a\u4e49 Redis\u7684\u4e8b\u52a1\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u9694\u79bb\u64cd\u4f5c\uff0c\u4e8b\u52a1\u4e2d\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u5e8f\u5217\u5316\uff0c\u6309\u987a\u5e8f\u6267\u884c\u3002\u5728\u6267\u884c\u4e8b\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u4f1a\u88ab\u5176\u4ed6\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684\u547d\u4ee4\u8bf7\u6c42\u6240\u6253\u65ad Redis\u4e8b\u52a1\u7684\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u4e32\u8054\u591a\u4e2a\u547d\u4ee4\u9632\u6b62\u63d2\u961f Multi, Exec, Discard \u4ece\u8f93\u5165Multi\u547d\u4ee4\u5f00\u59cb\uff0c\u8f93\u5165\u7684\u547d\u4ee4\u90fd\u4f1a\u4f9d\u6b21\u8fdb\u5165\u961f\u5217\u4e2d\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c\uff0c\u77e5\u9053\u8f93\u5165Exec\u540e\uff0cRedis\u4f1a\u4f9d\u6b21\u6267\u884c\u961f\u5217\u4e2d\u7684\u547d\u4ee4 \u7ec4\u961f\u7684\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u901a\u8fc7Discard\u6765\u653e\u5f03\u7ec4\u961f \u4e8b\u52a1\u7684\u9519\u8bef\u5904\u7406 \u7ec4\u961f\u4e2d\u67d0\u4e2a\u547d\u4ee4\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u6267\u884c\u65f6\u6574\u4e2a\u961f\u5217\u90fd\u4f1a\u88ab\u53d6\u6d88\u3002 \u5982\u679c\u6267\u884c\u9636\u6bb5\u67d0\u4e2a\u547d\u4ee4\u62a5\u51fa\u9519\u8bef\uff0c\u5219\u53ea\u6709\u62a5\u9519\u547d\u4ee4\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u5176\u4ed6\u547d\u4ee4\u90fd\u4f1a\u6267\u884c\uff0c\u4e0d\u4f1a\u56de\u6eda\u3002 Optimistic lock vs Pessimistic lock \u60b2\u89c2\u9501(Pessimistic Lock)\uff0c \u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5f88\u60b2\u89c2\uff0c \u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u8ba4\u4e3a\u522b\u4eba\u4f1a\u4fee\u6539\uff0c \u6240\u4ee5\u6bcf\u6b21\u5728\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u4e0a\u9501\uff0c \u8fd9\u6837\u522b\u4eba\u60f3\u62ff\u8fd9\u4e2a\u6570\u636e\u5c31\u4f1ablock\u76f4\u5230\u5b83\u62ff\u5230\u9501\u3002\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cc\u8fb9\u5c31\u7528\u5230\u4e86\u5f88\u591a\u8fd9\u79cd\u9501\u673a\u5236\uff0c \u6bd4\u5982\u884c\u9501\uff0c\u8868\u9501\uff0c\u8bfb\u9501\uff0c\u5199\u9501\u7b49\u3002\u90fd\u662f\u5728\u505a\u64cd\u4f5c\u4e4b\u524d\u5148\u4e0a\u9501\u3002 \u4e50\u89c2\u9501(Optimistic Lock)\uff0c\u987e\u540d\u60a3\u4e49\uff0c\u5c31\u662f\u5f88\u4e50\u89c2\uff0c \u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u8ba4\u4e3a\u522b\u4eba\u4e0d\u4f1a\u4fee\u6539\uff0c \u6240\u4ee5\u4e0d\u4f1a\u4e0a\u9501\uff0c \u4f46\u662f\u5728\u66f4\u65b0\u7684\u65f6\u5019\u4f1a\u5224\u65ad\u4e00\u4e0b\u5728\u6b64\u671f\u95f4\u522b\u4eba\u6709\u6ca1\u6709\u53bb\u66f4\u65b0\u8fd9\u4e2a\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u7248\u672c\u53f7\u7b49\u673a\u5236\u3002\u4e50\u89c2\u9501\u9002\u7528\u4e8e\u591a\u8bfb\u7684\u5e94\u7528\u7c7b\u578b\uff0c\u8fd9\u7965\u53ef\u4ee5\u63d0\u9ad8\u541e\u5410\u91cf\u3002 Redis\u5c31\u662f\u5229\u7528\u8fd9\u79cdCheck-and-Set\u673a\u5236\u5b9e\u73b0\u4e8b\u52a1\u7684\u3002 Watch key1 [key2 ...] \u5728\u6267\u884cMULTI\u4e4b\u524d\u5148\u6267\u884c Watch key1[key2 ...] \u53ef\u4ee5\u76d1\u89c6\u4e00\u4e2a(\u6216\u591a\u4e2a)key, \u5982\u679c\u5728\u4e8b\u52a1\u6267\u884c\u4e4b\u524d\u8fd9\u4e2a(\u6216\u8fd9\u4e9b)key\u88ab\u5176\u4ed6\u547d\u4ee4\u6539\u52a8\uff0c\u90a3\u4e48\u4e8b\u52a1\u5c06\u88ab\u4e2d\u65ad\u3002 Unwatch \u53d6\u6d88 Watch \u547d\u4ee4\u5bf9\u6240\u6709key\u7684\u76d1\u89c6 \u5982\u679c\u5728\u6267\u884c Watch \u4e4b\u540e\uff0c Exec \u6216\u8005 Discard \u547d\u4ee4\u5148\u88ab\u6267\u884c\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u518d\u6267\u884c Unwatch \u4e86\u3002","title":"Transactions"},{"location":"redis/09_transaction.html#transactions","text":"MULTI, EXEC, DISCARD and WATCH are the foundation of transactions in Redis. They allow the execution of a group of commands in a single step, with two important guarantees: All the commands in a transaction are serialized and executed sequentially. Either all of the commands or none are processed(processed does not mean success) , so a Redis transaction is also atomic. Errors inside a transaction does not rollback .","title":"Transactions"},{"location":"redis/09_transaction.html#related-commands","text":"DISCARD EXEC MULTI UNWATCH WATCH","title":"Related commands"},{"location":"redis/09_transaction.html#no-roll-back","text":"","title":"No roll back"},{"location":"redis/09_transaction.html#redis","text":"Redis\u7684\u4e8b\u52a1\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u9694\u79bb\u64cd\u4f5c\uff0c\u4e8b\u52a1\u4e2d\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u5e8f\u5217\u5316\uff0c\u6309\u987a\u5e8f\u6267\u884c\u3002\u5728\u6267\u884c\u4e8b\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u4f1a\u88ab\u5176\u4ed6\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684\u547d\u4ee4\u8bf7\u6c42\u6240\u6253\u65ad Redis\u4e8b\u52a1\u7684\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u4e32\u8054\u591a\u4e2a\u547d\u4ee4\u9632\u6b62\u63d2\u961f","title":"Redis\u7684\u4e8b\u52a1\u5b9a\u4e49"},{"location":"redis/09_transaction.html#multi-exec-discard","text":"\u4ece\u8f93\u5165Multi\u547d\u4ee4\u5f00\u59cb\uff0c\u8f93\u5165\u7684\u547d\u4ee4\u90fd\u4f1a\u4f9d\u6b21\u8fdb\u5165\u961f\u5217\u4e2d\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c\uff0c\u77e5\u9053\u8f93\u5165Exec\u540e\uff0cRedis\u4f1a\u4f9d\u6b21\u6267\u884c\u961f\u5217\u4e2d\u7684\u547d\u4ee4 \u7ec4\u961f\u7684\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u901a\u8fc7Discard\u6765\u653e\u5f03\u7ec4\u961f","title":"Multi, Exec, Discard"},{"location":"redis/09_transaction.html#_1","text":"\u7ec4\u961f\u4e2d\u67d0\u4e2a\u547d\u4ee4\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u6267\u884c\u65f6\u6574\u4e2a\u961f\u5217\u90fd\u4f1a\u88ab\u53d6\u6d88\u3002 \u5982\u679c\u6267\u884c\u9636\u6bb5\u67d0\u4e2a\u547d\u4ee4\u62a5\u51fa\u9519\u8bef\uff0c\u5219\u53ea\u6709\u62a5\u9519\u547d\u4ee4\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u5176\u4ed6\u547d\u4ee4\u90fd\u4f1a\u6267\u884c\uff0c\u4e0d\u4f1a\u56de\u6eda\u3002","title":"\u4e8b\u52a1\u7684\u9519\u8bef\u5904\u7406"},{"location":"redis/09_transaction.html#optimistic-lock-vs-pessimistic-lock","text":"\u60b2\u89c2\u9501(Pessimistic Lock)\uff0c \u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5f88\u60b2\u89c2\uff0c \u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u8ba4\u4e3a\u522b\u4eba\u4f1a\u4fee\u6539\uff0c \u6240\u4ee5\u6bcf\u6b21\u5728\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u4e0a\u9501\uff0c \u8fd9\u6837\u522b\u4eba\u60f3\u62ff\u8fd9\u4e2a\u6570\u636e\u5c31\u4f1ablock\u76f4\u5230\u5b83\u62ff\u5230\u9501\u3002\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cc\u8fb9\u5c31\u7528\u5230\u4e86\u5f88\u591a\u8fd9\u79cd\u9501\u673a\u5236\uff0c \u6bd4\u5982\u884c\u9501\uff0c\u8868\u9501\uff0c\u8bfb\u9501\uff0c\u5199\u9501\u7b49\u3002\u90fd\u662f\u5728\u505a\u64cd\u4f5c\u4e4b\u524d\u5148\u4e0a\u9501\u3002 \u4e50\u89c2\u9501(Optimistic Lock)\uff0c\u987e\u540d\u60a3\u4e49\uff0c\u5c31\u662f\u5f88\u4e50\u89c2\uff0c \u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u8ba4\u4e3a\u522b\u4eba\u4e0d\u4f1a\u4fee\u6539\uff0c \u6240\u4ee5\u4e0d\u4f1a\u4e0a\u9501\uff0c \u4f46\u662f\u5728\u66f4\u65b0\u7684\u65f6\u5019\u4f1a\u5224\u65ad\u4e00\u4e0b\u5728\u6b64\u671f\u95f4\u522b\u4eba\u6709\u6ca1\u6709\u53bb\u66f4\u65b0\u8fd9\u4e2a\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u7248\u672c\u53f7\u7b49\u673a\u5236\u3002\u4e50\u89c2\u9501\u9002\u7528\u4e8e\u591a\u8bfb\u7684\u5e94\u7528\u7c7b\u578b\uff0c\u8fd9\u7965\u53ef\u4ee5\u63d0\u9ad8\u541e\u5410\u91cf\u3002 Redis\u5c31\u662f\u5229\u7528\u8fd9\u79cdCheck-and-Set\u673a\u5236\u5b9e\u73b0\u4e8b\u52a1\u7684\u3002","title":"Optimistic lock vs Pessimistic lock"},{"location":"redis/09_transaction.html#watch-key1-key2","text":"\u5728\u6267\u884cMULTI\u4e4b\u524d\u5148\u6267\u884c Watch key1[key2 ...] \u53ef\u4ee5\u76d1\u89c6\u4e00\u4e2a(\u6216\u591a\u4e2a)key, \u5982\u679c\u5728\u4e8b\u52a1\u6267\u884c\u4e4b\u524d\u8fd9\u4e2a(\u6216\u8fd9\u4e9b)key\u88ab\u5176\u4ed6\u547d\u4ee4\u6539\u52a8\uff0c\u90a3\u4e48\u4e8b\u52a1\u5c06\u88ab\u4e2d\u65ad\u3002","title":"Watch key1 [key2 ...]"},{"location":"redis/09_transaction.html#unwatch","text":"\u53d6\u6d88 Watch \u547d\u4ee4\u5bf9\u6240\u6709key\u7684\u76d1\u89c6 \u5982\u679c\u5728\u6267\u884c Watch \u4e4b\u540e\uff0c Exec \u6216\u8005 Discard \u547d\u4ee4\u5148\u88ab\u6267\u884c\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u518d\u6267\u884c Unwatch \u4e86\u3002","title":"Unwatch"},{"location":"redis/10_persistance_rdb.html","text":"Redis Persistence - RDB Redis Persistence RDB (Redis DataBase) AOF (Append Of File) RDB \u5728\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u5185\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u96c6\u5feb\u7167(Snapshot)\u5199\u5165\u78c1\u76d8, \u6062\u590d\u65f6\u5c06\u5feb\u7167\u76f4\u63a5\u8bfb\u5230\u5185\u5b58\u91cc\u3002 \u5907\u4efd\u662f\u5982\u4f55\u6267\u884c\u7684 Redis\u4f1a\u5355\u72ec\u521b\u5efa (fork) \u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u8fdb\u884c\u6301\u4e45\u5316\uff0c \u4f1a\u5148\u5c06\u6570\u636e\u5199\u5165\u5230\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\uff0c \u5f85\u6301\u4e45\u5316\u8fc7\u7a0b\u90fd\u7ed3\u675f\u4e86\uff0c \u518d\u7528\u8fd9\u4e2a\u4e34\u65f6\u6587\u4ef6\u66ff\u6362\u4e0a\u6b21\u6301\u4e45\u5316\u597d\u7684\u6587\u4ef6\u3002 \u6574\u4e2a\u8fc7\u7a0b\u4e2d\uff0c \u4e3b\u8fdb\u7a0b\u662f\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u7684\u3002 \u8fd9\u5c31\u786e\u4fdd\u4e86\u6781\u9ad8\u7684\u6027\u80fd\u3002\u5982\u6817\u9700\u8981\u8fdb\u884c\u5927\u89c4\u6a21\u7684\u6570\u636e\u6062\u590d\uff0c \u4f46\u5bf9\u4e8e\u6570\u636e\u6062\u590d\u7684\u5b8c\u6574\u6027\u4e0d\u662f\u975e\u5e38\u654f\u611f\uff0c \u90a3RDB\u65b9\u5f0f\u8981\u6bd4APF\u65b9\u5f0f\u66f4\u52a0\u7684\u9ad8\u6548\u3002 RDB\u7684\u7f3a\u70b9\u662f\u6700\u540e\u4e00\u6b21\u6301\u4e45\u5316\u540e\u7684\u6570\u636e\u53ef\u80fd\u4e22\u5931\u3002 \u5173\u4e8efork \u5728Linux\u7a0b\u5e8f\u4e2d fork \u4f1a\u4ea7\u751f\u4e00\u4e2a\u548c\u7236\u8fdb\u7a0b\u5b8c\u5168\u76f8\u540c\u7684\u5b50\u8fdb\u7a0b\u3002 \u4f46\u5b50\u8fdb\u7a0b\u5728\u6b64\u540e\u591a\u4f1a\u6267\u884c\u7cfb\u7edf\u8c03\u7528\uff0c \u51fa\u4e8e\u6548\u7387\u8003\u8651\uff0c Linux\u4e2d\u5f15\u5165\u4e86 \"\u5199\u65f6\u590d\u5236\" (copy on write)\u6280\u672f\uff0c \u4e00\u80a1\u5029\u51b5\u7236\u8fdb\u7a0b\u548c\u5b50\u8ff8\u7a0b\u4f1a\u5171\u7528\u540c\u4e00\u6bb5\u7269\u7406\u5185\u5b58\uff0c \u53ea\u6709\u8fdb\u7a0b\u7a7a\u95f4\u7684\u5404\u6bb5\u7684\u5185\u5bb9\u800d\u53d1\u751f\u53d8\u5316\u65f6\uff0c \u624d\u4f1a\u5c06\u7236\u8fdb\u7a0b\u7684\u5185\u5bb9\u590d\u5236\u4e00\u4efd\u7ed9\u5b50\u8fdb\u7a0b \u3002 RDB\u7684\u4fdd\u5b58\u6587\u4ef6(path and file name) redis.conf 1 2 3 4 dbfilename dump.rdb ... dir ./ ... RDB Persistence policy Interval and Changes 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # Save the DB on disk: # # save <seconds> <changes> # # Will save the DB if both the given number of seconds and the given # number of write operations against the DB occurred. # # In the example below the behavior will be to save: # after 900 sec (15 min) if at least 1 key changed # after 300 sec (5 min) if at least 10 keys changed # after 60 sec if at least 10000 keys changed # # Note: you can disable saving completely by commenting out all \"save\" lines. # # It is also possible to remove all the previously configured save # points by adding a save directive with a single empty string argument # like in the following example: # # save \"\" save 900 1 save 300 10 save 60 10000 Manaul persist snapshot using command save - blocking bgsave - nonblocking, background stop-writes-on-bgsave-error yes \uff1a \u5f53redis\u65e0\u6cd5\u5199\u5165\u78c1\u76d8\u8bdd\uff0c\u76f4\u63a5\u5173\u6389redis\u7684\u5199\u64cd\u4f5c rdbcompression yes : \u6587\u4ef6\u538b\u7f29 rdbchecksum yes : \u4f7f\u7528CRC64\u7b97\u6cd5\u8fdb\u884c\u6570\u636e\u6821\u9a8c\uff0c \u4f46\u662f\u8fd9\u6837\u505a\u4f1a\u589e\u52a0\u5927\u7ea610%\u7684\u6027\u80fd\u6d88\u8017\uff0c \u5982\u679c\u5e0c\u671b\u83b7\u53d6\u5230\u6700\u5927\u7684\u6027\u80fd\uff0c \u53ef\u4ee5\u5173\u95ed\u6b64\u529f\u80fd\u3002 RDB backup \u5148\u901a\u8fc7 config get dir \u547d\u4ee4\u67e5\u8be2rdb\u6587\u4ef6\u7684\u76ee\u5f55 \u5c06 *.rdb \u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u522b\u7684\u5730\u65b9 RDB recovery Shutdown Redis copy backup file to redis working folder start redis, data will be loaded RDB \u7684\u4f18\u70b9 \u8282\u7701\u78c1\u76d8\u7a7a\u95f4 \u6062\u590d\u5feb\u901f RDB \u7684\u7f3a\u70b9 \u867d\u7136Redis\u5728 fork \u65f6\u4f7f\u7528\u4e86\u5199\u65f6\u62f7\u8d1d\u6280\u672f\uff0c\u4f46\u662f\u5982\u679c\u6570\u636e\u91cf\u5e9e\u5927\u65f6\uff0c\u8fd8\u662f\u6bd4\u8f83\u6d88\u8017\u6027\u80fd\u3002 \u5982\u679c\u5728\u5907\u4efd\u5468\u671f\u4e2d\u95f4redis down\u673a\uff0c\u53ef\u80fd\u4e22\u5931\u6570\u636e","title":"Redis Persistence - RDB"},{"location":"redis/10_persistance_rdb.html#redis-persistence-rdb","text":"","title":"Redis Persistence - RDB"},{"location":"redis/10_persistance_rdb.html#redis-persistence","text":"RDB (Redis DataBase) AOF (Append Of File)","title":"Redis Persistence"},{"location":"redis/10_persistance_rdb.html#rdb","text":"\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u5185\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u96c6\u5feb\u7167(Snapshot)\u5199\u5165\u78c1\u76d8, \u6062\u590d\u65f6\u5c06\u5feb\u7167\u76f4\u63a5\u8bfb\u5230\u5185\u5b58\u91cc\u3002","title":"RDB"},{"location":"redis/10_persistance_rdb.html#_1","text":"Redis\u4f1a\u5355\u72ec\u521b\u5efa (fork) \u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u8fdb\u884c\u6301\u4e45\u5316\uff0c \u4f1a\u5148\u5c06\u6570\u636e\u5199\u5165\u5230\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\uff0c \u5f85\u6301\u4e45\u5316\u8fc7\u7a0b\u90fd\u7ed3\u675f\u4e86\uff0c \u518d\u7528\u8fd9\u4e2a\u4e34\u65f6\u6587\u4ef6\u66ff\u6362\u4e0a\u6b21\u6301\u4e45\u5316\u597d\u7684\u6587\u4ef6\u3002 \u6574\u4e2a\u8fc7\u7a0b\u4e2d\uff0c \u4e3b\u8fdb\u7a0b\u662f\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u7684\u3002 \u8fd9\u5c31\u786e\u4fdd\u4e86\u6781\u9ad8\u7684\u6027\u80fd\u3002\u5982\u6817\u9700\u8981\u8fdb\u884c\u5927\u89c4\u6a21\u7684\u6570\u636e\u6062\u590d\uff0c \u4f46\u5bf9\u4e8e\u6570\u636e\u6062\u590d\u7684\u5b8c\u6574\u6027\u4e0d\u662f\u975e\u5e38\u654f\u611f\uff0c \u90a3RDB\u65b9\u5f0f\u8981\u6bd4APF\u65b9\u5f0f\u66f4\u52a0\u7684\u9ad8\u6548\u3002 RDB\u7684\u7f3a\u70b9\u662f\u6700\u540e\u4e00\u6b21\u6301\u4e45\u5316\u540e\u7684\u6570\u636e\u53ef\u80fd\u4e22\u5931\u3002","title":"\u5907\u4efd\u662f\u5982\u4f55\u6267\u884c\u7684"},{"location":"redis/10_persistance_rdb.html#fork","text":"\u5728Linux\u7a0b\u5e8f\u4e2d fork \u4f1a\u4ea7\u751f\u4e00\u4e2a\u548c\u7236\u8fdb\u7a0b\u5b8c\u5168\u76f8\u540c\u7684\u5b50\u8fdb\u7a0b\u3002 \u4f46\u5b50\u8fdb\u7a0b\u5728\u6b64\u540e\u591a\u4f1a\u6267\u884c\u7cfb\u7edf\u8c03\u7528\uff0c \u51fa\u4e8e\u6548\u7387\u8003\u8651\uff0c Linux\u4e2d\u5f15\u5165\u4e86 \"\u5199\u65f6\u590d\u5236\" (copy on write)\u6280\u672f\uff0c \u4e00\u80a1\u5029\u51b5\u7236\u8fdb\u7a0b\u548c\u5b50\u8ff8\u7a0b\u4f1a\u5171\u7528\u540c\u4e00\u6bb5\u7269\u7406\u5185\u5b58\uff0c \u53ea\u6709\u8fdb\u7a0b\u7a7a\u95f4\u7684\u5404\u6bb5\u7684\u5185\u5bb9\u800d\u53d1\u751f\u53d8\u5316\u65f6\uff0c \u624d\u4f1a\u5c06\u7236\u8fdb\u7a0b\u7684\u5185\u5bb9\u590d\u5236\u4e00\u4efd\u7ed9\u5b50\u8fdb\u7a0b \u3002","title":"\u5173\u4e8efork"},{"location":"redis/10_persistance_rdb.html#rdbpath-and-file-name","text":"redis.conf 1 2 3 4 dbfilename dump.rdb ... dir ./ ...","title":"RDB\u7684\u4fdd\u5b58\u6587\u4ef6(path and file name)"},{"location":"redis/10_persistance_rdb.html#rdb-persistence-policy","text":"Interval and Changes 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # Save the DB on disk: # # save <seconds> <changes> # # Will save the DB if both the given number of seconds and the given # number of write operations against the DB occurred. # # In the example below the behavior will be to save: # after 900 sec (15 min) if at least 1 key changed # after 300 sec (5 min) if at least 10 keys changed # after 60 sec if at least 10000 keys changed # # Note: you can disable saving completely by commenting out all \"save\" lines. # # It is also possible to remove all the previously configured save # points by adding a save directive with a single empty string argument # like in the following example: # # save \"\" save 900 1 save 300 10 save 60 10000 Manaul persist snapshot using command save - blocking bgsave - nonblocking, background stop-writes-on-bgsave-error yes \uff1a \u5f53redis\u65e0\u6cd5\u5199\u5165\u78c1\u76d8\u8bdd\uff0c\u76f4\u63a5\u5173\u6389redis\u7684\u5199\u64cd\u4f5c rdbcompression yes : \u6587\u4ef6\u538b\u7f29 rdbchecksum yes : \u4f7f\u7528CRC64\u7b97\u6cd5\u8fdb\u884c\u6570\u636e\u6821\u9a8c\uff0c \u4f46\u662f\u8fd9\u6837\u505a\u4f1a\u589e\u52a0\u5927\u7ea610%\u7684\u6027\u80fd\u6d88\u8017\uff0c \u5982\u679c\u5e0c\u671b\u83b7\u53d6\u5230\u6700\u5927\u7684\u6027\u80fd\uff0c \u53ef\u4ee5\u5173\u95ed\u6b64\u529f\u80fd\u3002","title":"RDB Persistence policy"},{"location":"redis/10_persistance_rdb.html#rdb-backup","text":"\u5148\u901a\u8fc7 config get dir \u547d\u4ee4\u67e5\u8be2rdb\u6587\u4ef6\u7684\u76ee\u5f55 \u5c06 *.rdb \u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u522b\u7684\u5730\u65b9","title":"RDB backup"},{"location":"redis/10_persistance_rdb.html#rdb-recovery","text":"Shutdown Redis copy backup file to redis working folder start redis, data will be loaded","title":"RDB recovery"},{"location":"redis/10_persistance_rdb.html#rdb_1","text":"\u8282\u7701\u78c1\u76d8\u7a7a\u95f4 \u6062\u590d\u5feb\u901f","title":"RDB \u7684\u4f18\u70b9"},{"location":"redis/10_persistance_rdb.html#rdb_2","text":"\u867d\u7136Redis\u5728 fork \u65f6\u4f7f\u7528\u4e86\u5199\u65f6\u62f7\u8d1d\u6280\u672f\uff0c\u4f46\u662f\u5982\u679c\u6570\u636e\u91cf\u5e9e\u5927\u65f6\uff0c\u8fd8\u662f\u6bd4\u8f83\u6d88\u8017\u6027\u80fd\u3002 \u5982\u679c\u5728\u5907\u4efd\u5468\u671f\u4e2d\u95f4redis down\u673a\uff0c\u53ef\u80fd\u4e22\u5931\u6570\u636e","title":"RDB \u7684\u7f3a\u70b9"},{"location":"redis/11_persistence_aof.html","text":"Redis Persistence - AOF AOF \u4ee5\u66f0\u5fd7\u7684\u5f62\u5f0f\u6765\u8bb0\u5f55\u6bcf\u4e2a\u5199\u64cd\u4f5c\uff0c \u5c06Redis\u6267\u884c\u8fc7\u7684\u6240\u6709\u5199\u6307\u4ee4\u8bb0\u5f55\u4e0b\u6765(\u8bfb\u64cd\u4f5c\u4e0d\u8bb0\u5f55)\uff0c \u53ea\u8bb8\u8ffd\u52a0\u6587\u4ef6\u4f46\u4e0d\u53ef\u4ee5\u6539\u5199\u6587\u4ef6\uff0c Redis\u542f\u52a8\u4e4b\u521d\u4f1a\u8bfb\u53d6\u8be5\u6587\u4ef6\u91cd\u65b0\u6784\u5efa\u6570\u636e\u3002 AOF\u9ed8\u8ba4\u4e0d\u5f00\u542f\uff0c\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e 1 2 3 4 ... appendonly yes # The name of the append only file (default: \"appendonly.aof\") appendfilename \"appendonly.aof\" AOF\u6587\u4ef6\u6545\u969c\u5907\u4efd AOF\u7684\u5907\u673a\u5236\u548c\u6027\u80fd\u867d\u7136\u548cRDB\u4e0d\u540c\uff0c\u4f46\u662f\u5907\u4efd\u548c\u6062\u590d\u64cd\u4f5c\u540cRDB\u4e00\u6837\uff0c\u90fd\u662f\u62f7\u8d1d\u5907\u4efd\u6587\u4ef6\uff0c\u9700\u8981\u6062\u590d\u65f6\u518d\u62f7\u8d1d\u5230Redis\u5de5\u4f5c\u76ee\u5f55\u4e0b\uff0c\u542f\u52a8\u7cfb\u7edf\u5373\u52a0\u8f7d\u3002 AOF\u548cRDB\u540c\u65f6\u542f\u52a8\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u8bfb\u53d6AOF\u7684\u6570\u636e AOF\u6587\u4ef6\u68c0\u67e5\uff0c\u6062\u590d \u5982\u679cAOF\u6587\u4ef6\u635f\u574f\uff0c\u53ef\u4ee5\u901a\u8fc7redis\u63d0\u4f9b\u7684\u5916\u90e8\u5de5\u5177\u8fdb\u884c\u6062\u590d 1 redis-check-aof --fix appendonly.aof RDB have the same utility: redis-check-rdb AOF\u540c\u6b65\u9891\u7387\u8bbe\u7f6e(config\u6587\u4ef6\u914d\u7f6e) always \uff1a \u6bcf\u6b21\u5199\u5165\u90fd\u4f1a\u540c\u6b65 everysec \uff1a \u6bcf\u79d2 no \uff1a \u4e0d\u4e3b\u52a8\u540c\u6b65\uff0c\u628a\u540c\u6b65\u65f6\u673a\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406 Rewrite AOF\u91c7\u7528\u6587\u4ef6\u8ffd\u52a0\u65b9\u5f0f\uff0c \u6587\u4ef6\u4f1a\u8d8a\u6765\u8d8a\u5927\u3002 \u4e3a\u907f\u514d\u51fa\u73b0\u6b64\u79cd\u60c5\u51b5\uff0c\u65b0\u589e\u4e86\u91cd\u5199\u673a\u5236\uff0c \u5f53AOF\u6587\u4ef6\u7684\u5927\u5c0f\u8d85\u8fc7\u6240\u8bbe\u5b9a\u7684\u9608\u503c\u65f6\uff0c Redis\u5c31\u4f1a\u542f\u52a8AOF\u6587\u4ef6\u7684\u5185\u5bb9\u538b\u7f29, \u53ea\u4fdd\u7559\u53ef\u4ee5\u6062\u590d\u6570\u636e\u7684\u6700\u5c0f\u4ee4\u96c6\u3002 \u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 bgrewriteaof \u3002 Redis\u5982\u4f55\u5b9e\u73b0\u91cd\u5199? AOF\u6587\u4ef6\u6301\u7eed\u589e\u957f\u800c\u8fc7\u5927\u65f6\uff0c \u4f1a fork \u51fa\u4e00\u4e2a\u65b0\u8fdb\u7a0b\u6765\u5c06\u6587\u4ef6\u91cd\u5199(\u4e5f\u662f\u5148\u5199\u5165\u4e34\u65f6\u6587\u4ef6\uff0c\u518drename), \u904d\u5386\u65b0\u8fdb\u7a0b\u7684\u5185\u5b58\u4e2d\u6570\u636e\uff0c \u6bcf\u6761\u8bb0\u5f55\u6709\u4e00\u6761\u7684set\u8bed\u53e5\u3002 \u91cd\u5199AOF\u6587\u4ef6\u5e76\u4e0d\u8bfb\u53d6\u65e7\u7684AOF\u6587\u4ef6\uff0c\u800c\u662f\u5c06\u5185\u5b58\u6570\u636e\u5e93\u7684\u5185\u5bb9\u7528\u547d\u4ee4\u65b9\u5f0f\u91cd\u5199\u4e00\u904d\u3002 \u4f55\u65f6\u91cd\u5199(config\u6587\u4ef6\u914d\u7f6e) \u91cd\u5199\u867d\u7136\u53ef\u4ee5\u8282\u7ea6\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4 \u51cf\u5c11\u2032\u6062\u590d\u65f6\u95f4\u3002 \u4f46\u662f\u6bcf\u6b21\u91cd\u5199\u8fd8\u662f\u6709\u4e00\u5b9a\u7684\u8d1f\u62c5\u7684\u3002 \u56e0\u6b64\u8bbe\u5b9aRedis\u8981\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u624d\u4f1a\u8fdb\u884c\u91cd\u5199\u3002 1 2 auto-aof-rewrite-percentage 100 auto-aof-rewrite-min-size 64mb \u7cfb\u7edf\u8f7d\u5165\u65f6\u6216\u8005\u4e0a\u6b21\u91cd\u5199\u5b8c\u6bd5\u65f6\uff0c Redis\u4f1a\u8bb0\u5f55\u6b64\u65f6AOF\u6587\u4ef6\u5927\u5c0f\uff0c\u8bbe\u4e3a base_size \uff0c\u5982\u679c\u5f53\u524dAOF\u6587\u4ef6\u5927\u5c0f >=base_Size+base_Size*100% (\u9ed8\u8ba4)\u4e14\u5f53\u524d\u5927\u5c0f >=64mb (\u9ed8\u8ba4)\u7684\u60c5\u51b5\u4e0b\uff0credis\u4f1a\u8fdb\u884cAOF\u91cd\u5199\u3002 AOF\u7684\u4f18\u70b9 \u5907\u4efd\u673a\u5236\u7a33\u5065\uff0c \u4e22\u5931\u6570\u636e\u6982\u7387\u4f4e \u53ef\u8bfb\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c \u53ef\u4ee5\u5904\u7406\u8bef\u64cd\u4f5c AOF\u7f3a\u70b9 \u6bd4RDB\u5360\u7528\u66f4\u591a\u7684\u78c1\u76d8\u7a7a\u95f4 \u6062\u590d\u5907\u4efd\u901f\u5ea6\u6162 \u6bcf\u6b21\u5199\u90fd\u540c\u6b65\u7684\u8bdd\uff0c\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u635f\u5931 Has some known issues \u7528\u54ea\u4e2a\u597d \u5b98\u65b9\u63a8\u8350\u4e24\u4e2a\u90fd\u542f\u7528\u3002 \u5982\u679c\u5bf9\u6570\u636e\u4e0d\u654f\u611f\uff0c \u53ef\u4ee5\u5355\u72ec\u7528RDB\u3002 \u4e0d\u5efa\u8bae\u5355\u72ec\u4f7f\u7528AOF, for there is known issues. \u5982\u679c\u7eaf\u505a\u7f13\u5b58\uff0c \u53ef\u4ee5\u90fd\u4e0d\u7528\u3002","title":"Redis Persistence - AOF"},{"location":"redis/11_persistence_aof.html#redis-persistence-aof","text":"","title":"Redis Persistence - AOF"},{"location":"redis/11_persistence_aof.html#aof","text":"\u4ee5\u66f0\u5fd7\u7684\u5f62\u5f0f\u6765\u8bb0\u5f55\u6bcf\u4e2a\u5199\u64cd\u4f5c\uff0c \u5c06Redis\u6267\u884c\u8fc7\u7684\u6240\u6709\u5199\u6307\u4ee4\u8bb0\u5f55\u4e0b\u6765(\u8bfb\u64cd\u4f5c\u4e0d\u8bb0\u5f55)\uff0c \u53ea\u8bb8\u8ffd\u52a0\u6587\u4ef6\u4f46\u4e0d\u53ef\u4ee5\u6539\u5199\u6587\u4ef6\uff0c Redis\u542f\u52a8\u4e4b\u521d\u4f1a\u8bfb\u53d6\u8be5\u6587\u4ef6\u91cd\u65b0\u6784\u5efa\u6570\u636e\u3002 AOF\u9ed8\u8ba4\u4e0d\u5f00\u542f\uff0c\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e 1 2 3 4 ... appendonly yes # The name of the append only file (default: \"appendonly.aof\") appendfilename \"appendonly.aof\"","title":"AOF"},{"location":"redis/11_persistence_aof.html#aof_1","text":"AOF\u7684\u5907\u673a\u5236\u548c\u6027\u80fd\u867d\u7136\u548cRDB\u4e0d\u540c\uff0c\u4f46\u662f\u5907\u4efd\u548c\u6062\u590d\u64cd\u4f5c\u540cRDB\u4e00\u6837\uff0c\u90fd\u662f\u62f7\u8d1d\u5907\u4efd\u6587\u4ef6\uff0c\u9700\u8981\u6062\u590d\u65f6\u518d\u62f7\u8d1d\u5230Redis\u5de5\u4f5c\u76ee\u5f55\u4e0b\uff0c\u542f\u52a8\u7cfb\u7edf\u5373\u52a0\u8f7d\u3002 AOF\u548cRDB\u540c\u65f6\u542f\u52a8\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u8bfb\u53d6AOF\u7684\u6570\u636e","title":"AOF\u6587\u4ef6\u6545\u969c\u5907\u4efd"},{"location":"redis/11_persistence_aof.html#aof_2","text":"\u5982\u679cAOF\u6587\u4ef6\u635f\u574f\uff0c\u53ef\u4ee5\u901a\u8fc7redis\u63d0\u4f9b\u7684\u5916\u90e8\u5de5\u5177\u8fdb\u884c\u6062\u590d 1 redis-check-aof --fix appendonly.aof RDB have the same utility: redis-check-rdb","title":"AOF\u6587\u4ef6\u68c0\u67e5\uff0c\u6062\u590d"},{"location":"redis/11_persistence_aof.html#aofconfig","text":"always \uff1a \u6bcf\u6b21\u5199\u5165\u90fd\u4f1a\u540c\u6b65 everysec \uff1a \u6bcf\u79d2 no \uff1a \u4e0d\u4e3b\u52a8\u540c\u6b65\uff0c\u628a\u540c\u6b65\u65f6\u673a\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406","title":"AOF\u540c\u6b65\u9891\u7387\u8bbe\u7f6e(config\u6587\u4ef6\u914d\u7f6e)"},{"location":"redis/11_persistence_aof.html#rewrite","text":"AOF\u91c7\u7528\u6587\u4ef6\u8ffd\u52a0\u65b9\u5f0f\uff0c \u6587\u4ef6\u4f1a\u8d8a\u6765\u8d8a\u5927\u3002 \u4e3a\u907f\u514d\u51fa\u73b0\u6b64\u79cd\u60c5\u51b5\uff0c\u65b0\u589e\u4e86\u91cd\u5199\u673a\u5236\uff0c \u5f53AOF\u6587\u4ef6\u7684\u5927\u5c0f\u8d85\u8fc7\u6240\u8bbe\u5b9a\u7684\u9608\u503c\u65f6\uff0c Redis\u5c31\u4f1a\u542f\u52a8AOF\u6587\u4ef6\u7684\u5185\u5bb9\u538b\u7f29, \u53ea\u4fdd\u7559\u53ef\u4ee5\u6062\u590d\u6570\u636e\u7684\u6700\u5c0f\u4ee4\u96c6\u3002 \u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 bgrewriteaof \u3002","title":"Rewrite"},{"location":"redis/11_persistence_aof.html#redis","text":"AOF\u6587\u4ef6\u6301\u7eed\u589e\u957f\u800c\u8fc7\u5927\u65f6\uff0c \u4f1a fork \u51fa\u4e00\u4e2a\u65b0\u8fdb\u7a0b\u6765\u5c06\u6587\u4ef6\u91cd\u5199(\u4e5f\u662f\u5148\u5199\u5165\u4e34\u65f6\u6587\u4ef6\uff0c\u518drename), \u904d\u5386\u65b0\u8fdb\u7a0b\u7684\u5185\u5b58\u4e2d\u6570\u636e\uff0c \u6bcf\u6761\u8bb0\u5f55\u6709\u4e00\u6761\u7684set\u8bed\u53e5\u3002 \u91cd\u5199AOF\u6587\u4ef6\u5e76\u4e0d\u8bfb\u53d6\u65e7\u7684AOF\u6587\u4ef6\uff0c\u800c\u662f\u5c06\u5185\u5b58\u6570\u636e\u5e93\u7684\u5185\u5bb9\u7528\u547d\u4ee4\u65b9\u5f0f\u91cd\u5199\u4e00\u904d\u3002","title":"Redis\u5982\u4f55\u5b9e\u73b0\u91cd\u5199?"},{"location":"redis/11_persistence_aof.html#config","text":"\u91cd\u5199\u867d\u7136\u53ef\u4ee5\u8282\u7ea6\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4 \u51cf\u5c11\u2032\u6062\u590d\u65f6\u95f4\u3002 \u4f46\u662f\u6bcf\u6b21\u91cd\u5199\u8fd8\u662f\u6709\u4e00\u5b9a\u7684\u8d1f\u62c5\u7684\u3002 \u56e0\u6b64\u8bbe\u5b9aRedis\u8981\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u624d\u4f1a\u8fdb\u884c\u91cd\u5199\u3002 1 2 auto-aof-rewrite-percentage 100 auto-aof-rewrite-min-size 64mb \u7cfb\u7edf\u8f7d\u5165\u65f6\u6216\u8005\u4e0a\u6b21\u91cd\u5199\u5b8c\u6bd5\u65f6\uff0c Redis\u4f1a\u8bb0\u5f55\u6b64\u65f6AOF\u6587\u4ef6\u5927\u5c0f\uff0c\u8bbe\u4e3a base_size \uff0c\u5982\u679c\u5f53\u524dAOF\u6587\u4ef6\u5927\u5c0f >=base_Size+base_Size*100% (\u9ed8\u8ba4)\u4e14\u5f53\u524d\u5927\u5c0f >=64mb (\u9ed8\u8ba4)\u7684\u60c5\u51b5\u4e0b\uff0credis\u4f1a\u8fdb\u884cAOF\u91cd\u5199\u3002","title":"\u4f55\u65f6\u91cd\u5199(config\u6587\u4ef6\u914d\u7f6e)"},{"location":"redis/11_persistence_aof.html#aof_3","text":"\u5907\u4efd\u673a\u5236\u7a33\u5065\uff0c \u4e22\u5931\u6570\u636e\u6982\u7387\u4f4e \u53ef\u8bfb\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c \u53ef\u4ee5\u5904\u7406\u8bef\u64cd\u4f5c","title":"AOF\u7684\u4f18\u70b9"},{"location":"redis/11_persistence_aof.html#aof_4","text":"\u6bd4RDB\u5360\u7528\u66f4\u591a\u7684\u78c1\u76d8\u7a7a\u95f4 \u6062\u590d\u5907\u4efd\u901f\u5ea6\u6162 \u6bcf\u6b21\u5199\u90fd\u540c\u6b65\u7684\u8bdd\uff0c\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u635f\u5931 Has some known issues","title":"AOF\u7f3a\u70b9"},{"location":"redis/11_persistence_aof.html#_1","text":"\u5b98\u65b9\u63a8\u8350\u4e24\u4e2a\u90fd\u542f\u7528\u3002 \u5982\u679c\u5bf9\u6570\u636e\u4e0d\u654f\u611f\uff0c \u53ef\u4ee5\u5355\u72ec\u7528RDB\u3002 \u4e0d\u5efa\u8bae\u5355\u72ec\u4f7f\u7528AOF, for there is known issues. \u5982\u679c\u7eaf\u505a\u7f13\u5b58\uff0c \u53ef\u4ee5\u90fd\u4e0d\u7528\u3002","title":"\u7528\u54ea\u4e2a\u597d"},{"location":"redis/12_replication.html","text":"Redis Replication What is replication \u4e3b\u4ece\u590d\u5236\uff0c\u5c31\u662f\u4e3b\u673a\u6570\u636e\u66f4\u65b0\u540e\u6839\u636e\u914d\u7f6e\u548c\u7b56\u7565\uff0c\u81ea\u52a8\u540c\u6b65\u5230\u5907\u673a\u7684master/slave\u673a\u5236\u3002Master\u4ee5\u5199\u4e3a\u4e3b\uff0cSlave\u4ee5\u8bfb\u4e3a\u4e3b\u3002 \u7528\u5904 \u8bfb\u5199\u5206\u79bb\uff0c\u6027\u80fd\u6269\u5c55 \u5bb9\u707e\u5feb\u901f\u6062\u590d Commands info replication show replication information replicaof <ip> <port> \u6210\u4e3a\u67d0\u4e2a\u5b9e\u4f8b\u7684\u4ece\u670d\u52a1\u5668 Config: replica-read-only 1 if `yes`, write via slave is not allowed, this will protect slave from untrusted write. This is recommended. \u590d\u5236\u539f\u7406 \u6bcf\u4ece\u673a\u8054\u901a\u540e\u2032\uff0c\u90fd\u4f1a\u7ed9\u4e3b\u673a\u53d1\u9001Sync\u547d\u4ee4 \u4e3b\u673a\u7acb\u523b\u8fdb\u884c\u5b58\u76d8\u64cd\u4f5c\uff0c\u53d1\u9001RDB\u6587\u4ef6\u7ed9\u4ece\u673a \u4ece\u673a\u6536\u5230RDB\u6587\u4ef6\u540e\uff0c\u8fdb\u884c\u5168\u76d8\u52a0\u8f7d \u4e4b\u540e\u6bcf\u6b21\u4e3b\u673a\u7684\u5199\u64cd\u4f5c\uff0c\u90fd\u4f1a\u7acb\u523b\u53d1\u9001\u7ed9\u4ece\u673a\uff0c\u4ece\u673a\u6267\u884c\u76f8\u540c\u7684\u547d\u4ee4 Chained Replica \u4e0a\u4e00\u4e2aSlave\u53ef\u4ee5\u662f\u4e0b\u4e00\u4e2aSlave\u7684Master\u3002Slave\u540c\u7965\u53ef\u4ee5\u63a5\u6536\u5176\u4ed6Slaves\u7684\u8fde\u63a5\u548c\u540c\u6b65\u8bf7\u6c42\uff0c\u90a3\u4e48\u8be5Slave\u4f5c\u4e3a\u94fe\u6761\u4e2d\u4e0b\u4e00\u4e2a\u7684master\uff0c \u53ef\u4ee5\u6709\u6548\u51cf\u8f7bMaster\u7684\u538b\u529b\uff0c\u53bb\u4e2d\u5fc3\u5316\u964d\u4f4e\u98ce\u9669\u3002 \u7528 replicaof <ip> <port> \u4e2d\u9014\u53d8\u66f4\u8f6c\u5411\uff0c\u4f1a\u6e05\u9664\u6570\u636e\uff0c\u91cd\u65b0\u5efa\u7acb\u62f7\u8d1d\u6700\u65b0\u7684\u3002 \u98ce\u9669\u662f\u4e2d\u95f4\u4e00\u4e2aSlave down\u673a\uff0c\u540e\u7eedSlave\u65e0\u6cd5\u62f7\u8d1d Some points any slave down and start again, it by default become a standalone master. Need re-run replicaof to join the replication again. master down, none of slave will promote to master. When master back the relation remain. Manual change slave to master(\u53cd\u5ba2\u4e3a\u4e3b) \u5f53\u4e00\u4e2amaster\u5b95\u673a\u540e\uff0c\u540e\u9762\u7684slave\u53ef\u4ee5\u7acb\u523b\u5347\u7ea7\u4e3amaster,\u5176\u540e\u9762\u7684slave\u4e0d\u7528\u505a\u4efb\u4f55\u4fee\u6539\u3002 \u7528 replicaof no one \u5c06\u4ece\u673a\u53d8\u4e3a\u4e3b\u673a\u3002 Sentinel(\u54e8\u5175\u6a21\u5f0f) \u53cd\u5ba2\u4e3a\u4e3b\u7684\u81ea\u52a8\u7248\uff0c\u80fd\u591f\u540e\u53f0\u76d1\u63a7\u4e3b\u673a\u662f\u5426\u6545\u969c\uff0c\u5982\u679c\u4e3b\u673a\u6545\u969c\uff0c\u6839\u636e\u6295\u7968\u6570\u5c06\u4ece\u673a\u53d8\u4e3a\u4e3b\u673a\u3002 \u914d\u7f6e\u54e8\u5175 1 master, 2 slaves, not chained. create conf/sentinel.conf 1 sentinel monitor mymaster 127.0.0.1 6379 1 \u5176\u4e2dmymaster\u4e3a\u76d1\u63a7\u5bf9\u8c61\u8d77\u7684\u670d\u52a1\u5668\u540d\u79f0, 1\u4f4d\u81f3\u5c11\u6709\u591a\u5c11\u4e2a\u54e8\u5175\u540c\u610f\u8fc1\u79fb\u7684\u6570\u91cf\u3002 \u542f\u52a8\u54e8\u5175 1 redis-sentinel conf/sentinel.conf Slave promote rule: \u4f18\u5148\u7ea7\u9760\u524d\u7684 redis.conf\u4e2d replica-priority \u503c, less (not 0) = higer priority 0 means never promote \u504f\u79fb\u91cf\u5927\u7684(\u6570\u636e\u6700\u65b0) \u670d\u52a1runid (a generated guid for service instance)\u6700\u5c0f\u7684","title":"Redis Replication"},{"location":"redis/12_replication.html#redis-replication","text":"","title":"Redis Replication"},{"location":"redis/12_replication.html#what-is-replication","text":"\u4e3b\u4ece\u590d\u5236\uff0c\u5c31\u662f\u4e3b\u673a\u6570\u636e\u66f4\u65b0\u540e\u6839\u636e\u914d\u7f6e\u548c\u7b56\u7565\uff0c\u81ea\u52a8\u540c\u6b65\u5230\u5907\u673a\u7684master/slave\u673a\u5236\u3002Master\u4ee5\u5199\u4e3a\u4e3b\uff0cSlave\u4ee5\u8bfb\u4e3a\u4e3b\u3002","title":"What is replication"},{"location":"redis/12_replication.html#_1","text":"\u8bfb\u5199\u5206\u79bb\uff0c\u6027\u80fd\u6269\u5c55 \u5bb9\u707e\u5feb\u901f\u6062\u590d","title":"\u7528\u5904"},{"location":"redis/12_replication.html#commands","text":"info replication show replication information replicaof <ip> <port> \u6210\u4e3a\u67d0\u4e2a\u5b9e\u4f8b\u7684\u4ece\u670d\u52a1\u5668","title":"Commands"},{"location":"redis/12_replication.html#config-replica-read-only","text":"1 if `yes`, write via slave is not allowed, this will protect slave from untrusted write. This is recommended.","title":"Config: replica-read-only"},{"location":"redis/12_replication.html#_2","text":"\u6bcf\u4ece\u673a\u8054\u901a\u540e\u2032\uff0c\u90fd\u4f1a\u7ed9\u4e3b\u673a\u53d1\u9001Sync\u547d\u4ee4 \u4e3b\u673a\u7acb\u523b\u8fdb\u884c\u5b58\u76d8\u64cd\u4f5c\uff0c\u53d1\u9001RDB\u6587\u4ef6\u7ed9\u4ece\u673a \u4ece\u673a\u6536\u5230RDB\u6587\u4ef6\u540e\uff0c\u8fdb\u884c\u5168\u76d8\u52a0\u8f7d \u4e4b\u540e\u6bcf\u6b21\u4e3b\u673a\u7684\u5199\u64cd\u4f5c\uff0c\u90fd\u4f1a\u7acb\u523b\u53d1\u9001\u7ed9\u4ece\u673a\uff0c\u4ece\u673a\u6267\u884c\u76f8\u540c\u7684\u547d\u4ee4","title":"\u590d\u5236\u539f\u7406"},{"location":"redis/12_replication.html#chained-replica","text":"\u4e0a\u4e00\u4e2aSlave\u53ef\u4ee5\u662f\u4e0b\u4e00\u4e2aSlave\u7684Master\u3002Slave\u540c\u7965\u53ef\u4ee5\u63a5\u6536\u5176\u4ed6Slaves\u7684\u8fde\u63a5\u548c\u540c\u6b65\u8bf7\u6c42\uff0c\u90a3\u4e48\u8be5Slave\u4f5c\u4e3a\u94fe\u6761\u4e2d\u4e0b\u4e00\u4e2a\u7684master\uff0c \u53ef\u4ee5\u6709\u6548\u51cf\u8f7bMaster\u7684\u538b\u529b\uff0c\u53bb\u4e2d\u5fc3\u5316\u964d\u4f4e\u98ce\u9669\u3002 \u7528 replicaof <ip> <port> \u4e2d\u9014\u53d8\u66f4\u8f6c\u5411\uff0c\u4f1a\u6e05\u9664\u6570\u636e\uff0c\u91cd\u65b0\u5efa\u7acb\u62f7\u8d1d\u6700\u65b0\u7684\u3002 \u98ce\u9669\u662f\u4e2d\u95f4\u4e00\u4e2aSlave down\u673a\uff0c\u540e\u7eedSlave\u65e0\u6cd5\u62f7\u8d1d","title":"Chained Replica"},{"location":"redis/12_replication.html#some-points","text":"any slave down and start again, it by default become a standalone master. Need re-run replicaof to join the replication again. master down, none of slave will promote to master. When master back the relation remain.","title":"Some points"},{"location":"redis/12_replication.html#manual-change-slave-to-master","text":"\u5f53\u4e00\u4e2amaster\u5b95\u673a\u540e\uff0c\u540e\u9762\u7684slave\u53ef\u4ee5\u7acb\u523b\u5347\u7ea7\u4e3amaster,\u5176\u540e\u9762\u7684slave\u4e0d\u7528\u505a\u4efb\u4f55\u4fee\u6539\u3002 \u7528 replicaof no one \u5c06\u4ece\u673a\u53d8\u4e3a\u4e3b\u673a\u3002","title":"Manual change slave to master(\u53cd\u5ba2\u4e3a\u4e3b)"},{"location":"redis/12_replication.html#sentinel","text":"\u53cd\u5ba2\u4e3a\u4e3b\u7684\u81ea\u52a8\u7248\uff0c\u80fd\u591f\u540e\u53f0\u76d1\u63a7\u4e3b\u673a\u662f\u5426\u6545\u969c\uff0c\u5982\u679c\u4e3b\u673a\u6545\u969c\uff0c\u6839\u636e\u6295\u7968\u6570\u5c06\u4ece\u673a\u53d8\u4e3a\u4e3b\u673a\u3002","title":"Sentinel(\u54e8\u5175\u6a21\u5f0f)"},{"location":"redis/12_replication.html#_3","text":"1 master, 2 slaves, not chained. create conf/sentinel.conf 1 sentinel monitor mymaster 127.0.0.1 6379 1 \u5176\u4e2dmymaster\u4e3a\u76d1\u63a7\u5bf9\u8c61\u8d77\u7684\u670d\u52a1\u5668\u540d\u79f0, 1\u4f4d\u81f3\u5c11\u6709\u591a\u5c11\u4e2a\u54e8\u5175\u540c\u610f\u8fc1\u79fb\u7684\u6570\u91cf\u3002","title":"\u914d\u7f6e\u54e8\u5175"},{"location":"redis/12_replication.html#_4","text":"1 redis-sentinel conf/sentinel.conf","title":"\u542f\u52a8\u54e8\u5175"},{"location":"redis/12_replication.html#slave-promote-rule","text":"\u4f18\u5148\u7ea7\u9760\u524d\u7684 redis.conf\u4e2d replica-priority \u503c, less (not 0) = higer priority 0 means never promote \u504f\u79fb\u91cf\u5927\u7684(\u6570\u636e\u6700\u65b0) \u670d\u52a1runid (a generated guid for service instance)\u6700\u5c0f\u7684","title":"Slave promote rule:"},{"location":"redis/13_cluster.html","text":"Redis Cluster \u4ec0\u4e48\u662f\u96c6\u7fa4 Redis\u96c6\u7fa4\u5b9e\u73b0\u4e86\u5bf9Redis\u7684\u6c34\u5e73\u6269\u5bb9\uff0c\u5373\u542f\u52a8N\u4e2aRedis\u8282\u70b9\uff0c\u5c06\u6574\u4e2a\u6570\u636e\u5e93\u5206\u5e03\u5b58\u50a8\u5728\u8fd9N\u4e2a\u8282\u70b9\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u603b\u6570\u636e\u76841/N\u3002 Redis\u96c6\u7fa4\u901a\u8fc7\u5206\u533a(partition)\u6765\u63d0\u4f9b\u4e00\u5b9a\u7a0b\u5ea6\u7684\u53ef\u7528\u6027(availablity):\u5373\u4f7f\u96c6\u7fa4\u4e2d\u6709\u4e00\u90e8\u5206\u8282\u70b9\u5931\u6548\u6216\u8005\u65e0\u6cd5\u8fdb\u884c\u901a\u8baf\uff0c\u96c6\u7fa4\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\u8bf7\u6c42\u3002 \u901a\u8fc7 cluster nodes \u547d\u4ee4\u67e5\u770b\u96c6\u7fa4\u4fe1\u606f \u6bcf\u4e2a\u8282\u70b9\uff0c\u53ef\u4ee5\u6709Replicaiton, \u5e76\u6709\u5185\u7f6e\u7684\u54e8\u5175\u673a\u5236(\u81ea\u52a8failover) \u4e00\u4e2a\u96c6\u7fa4\u81f3\u5c113\u4e2a\u4e3b\u8282\u70b9\u3002 \u6bcf\u4e2a\u4e3b\u8282\u70b9\u81f3\u5c11\u4e00\u4e2areplication \u5206\u914d\u539f\u5219\u5c3d\u91cf\u4fdd\u8bc1\u6bcf\u4e2a\u4e3b\u6570\u636e\u5e93\u884c\u5728\u4e0d\u540c\u7684IP\u5730\u5740\uff0c\u6bcf\u4e2a\u4ece\u5e93\u548c\u4e3b\u5e93\u4e0d\u5728\u4e00\u4e2aIP\u5730\u5740\u4e0a\u3002 \u4ec0\u4e48\u662fslots \u4e00\u4e2a Redis \u96c6\u7fa4\u5305\u542b 16384 \u4e2a\u63d2\u69fd (hash slot)\uff0c \u6570\u636e\u5e93\u4e2d\u7684\u6bcf\u4e2a\u952e\u503c\u90fd\u5c5e\u4e8e\u8fd916384\u4e2a\u63d2\u69fd\u7684\u5176\u4e2d\u4e00\u4e2a\uff0c \u96c6\u7fa4\u4f7f\u7528\u516c\u5f0f CRC16(key) % 16384 \u6765\u8ba1\u7b97\u952e key \u5c5e\u4e8e\u90a3\u4e2a\u63d2\u69fd\uff0c\u2032 \u5176\u4e2d CRC16(key) \u8bed\u53e5\u7528\u4e8e\u8ba1\u7b97\u952e key \u7684 CRC16 \u6821\u9a8c\u548c \u3002 \u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u4e00\u90e8\u5206\u63d2\u69fd\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4e00\u4e2a\u96c6\u7fa4\u53ef\u4ee5\u67093\u4e2a\u4e3b\u8282\u70b9\u2032 \u5176\u4e2d: \u8282\u70b9A\u8d1f\u8d23\u5904\u74060\u53f7\u81f3 5500\u53f7\u63d2\u69fd\u3002 \u8282\u70b9 B \u8d1f\u8d23\u5904\u7406 5501 \u53f7\u81f3 11000 \u53f7\u63d2\u69fd\u3002 \u8282\u70b9C\u8d1f\u8d23\u5904\u7406 11001 \u53f7\u81f316383\u53f7\u63d2\u69fd\u3002 Hash Source Code \u5728\u96c6\u7fa4\u4e2dset/insert\u503c \u5728redis-cli\u6bcf\u6b21\u5f55\u5165\uff0c\u67e5\u8be2\u952e\u503c\uff0credis\u90fd\u4f1a\u8ba1\u7b97\u51fa\u8be5key\u5e94\u8be5\u9001\u5f80\u7684\u63d2\u6f15, \u5982\u679c\u4e0d\u662f\u8be5\u5ba2\u6237\u7aef\u5bf9\u5e94\u7684\u670d\u52a1\u5668\u63d2\u69fd\uff0credis\u4f1a\u62a5\u9519\u5e76\u544a\u77e5\u5e94\u524d\u5f80\u7684redis\u5b9e\u4f8b\u5730\u5740\u548c\u7aef\u53e3\u3002 redis-cli\u63d0\u4f9b\u4e86 -c \u53c2\u6570\u5b9e\u73b0\u81ea\u52a8\u91cd\u5b9a\u5411\u3002 \u4f8b\u5982 redis-cli -c -p6379 \u767b\u5165\u540e, \u518d\u5f55\u5165\u3001 \u67e5\u8be2\u952e\u503c\u53ef\u4ee5\u81ea\u52a8\u91cd\u5b9a\u5411\u3002 \u4e0d\u5728\u4e00\u4e2asolt\u4e0b\u7684\u952e\u503c\uff0c\u662f\u4e0d\u80fd\u4f7f\u7528mget, mset\u7b49\u591a\u952e\u64cd\u4f5c\u7684 \u53ef\u4ee5\u901a\u8fc7{}\u6765\u5b9a\u4e49\u7ec4\u7684\u6982\u5ff5\uff0c\u4ece\u800c\u662fkey\u4e2d{}\u5185\u76f8\u540c\u5185\u5bb9\u7684\u952e\u503c\u5bf9\u5e94\u5230\u540c\u4e00\u4e2aslot\u4e2d\u53bb\u3002 \u67e5\u8be2\u96c6\u7fa4\u4e2d\u7684\u503c CLUSTER KEYSLOT <key> \u8ba1\u7b97\u952e key \u5e94\u8be5\u88ab\u653e\u7f6e\u5728\u90a3\u4e2a\u69fd\u4e0a\u3002 CLUSTER COUNTKEYSINSLOT <slot> \u8fd4\u56de\u69fdslot\u76ee\u524d\u5305\u542b\u7684\u952e\u503c\u5bf9\u7684\u6570\u91cf\u3002 CLUSTER GETKEYINSLOT <slot> <count> \u8fd4\u56decount\u4e2aslot\u69fd\u4e2d\u7684\u952e Configuration cluster-require-full-coverage : If this is set to yes, as it is by default, the cluster stops accepting writes if some percentage of the key space is not covered by any node. If the option is set to no, the cluster will still serve queries even if only requests about a subset of keys can be processed.","title":"Redis Cluster"},{"location":"redis/13_cluster.html#redis-cluster","text":"","title":"Redis Cluster"},{"location":"redis/13_cluster.html#_1","text":"Redis\u96c6\u7fa4\u5b9e\u73b0\u4e86\u5bf9Redis\u7684\u6c34\u5e73\u6269\u5bb9\uff0c\u5373\u542f\u52a8N\u4e2aRedis\u8282\u70b9\uff0c\u5c06\u6574\u4e2a\u6570\u636e\u5e93\u5206\u5e03\u5b58\u50a8\u5728\u8fd9N\u4e2a\u8282\u70b9\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u603b\u6570\u636e\u76841/N\u3002 Redis\u96c6\u7fa4\u901a\u8fc7\u5206\u533a(partition)\u6765\u63d0\u4f9b\u4e00\u5b9a\u7a0b\u5ea6\u7684\u53ef\u7528\u6027(availablity):\u5373\u4f7f\u96c6\u7fa4\u4e2d\u6709\u4e00\u90e8\u5206\u8282\u70b9\u5931\u6548\u6216\u8005\u65e0\u6cd5\u8fdb\u884c\u901a\u8baf\uff0c\u96c6\u7fa4\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\u8bf7\u6c42\u3002 \u901a\u8fc7 cluster nodes \u547d\u4ee4\u67e5\u770b\u96c6\u7fa4\u4fe1\u606f \u6bcf\u4e2a\u8282\u70b9\uff0c\u53ef\u4ee5\u6709Replicaiton, \u5e76\u6709\u5185\u7f6e\u7684\u54e8\u5175\u673a\u5236(\u81ea\u52a8failover) \u4e00\u4e2a\u96c6\u7fa4\u81f3\u5c113\u4e2a\u4e3b\u8282\u70b9\u3002 \u6bcf\u4e2a\u4e3b\u8282\u70b9\u81f3\u5c11\u4e00\u4e2areplication \u5206\u914d\u539f\u5219\u5c3d\u91cf\u4fdd\u8bc1\u6bcf\u4e2a\u4e3b\u6570\u636e\u5e93\u884c\u5728\u4e0d\u540c\u7684IP\u5730\u5740\uff0c\u6bcf\u4e2a\u4ece\u5e93\u548c\u4e3b\u5e93\u4e0d\u5728\u4e00\u4e2aIP\u5730\u5740\u4e0a\u3002","title":"\u4ec0\u4e48\u662f\u96c6\u7fa4"},{"location":"redis/13_cluster.html#slots","text":"\u4e00\u4e2a Redis \u96c6\u7fa4\u5305\u542b 16384 \u4e2a\u63d2\u69fd (hash slot)\uff0c \u6570\u636e\u5e93\u4e2d\u7684\u6bcf\u4e2a\u952e\u503c\u90fd\u5c5e\u4e8e\u8fd916384\u4e2a\u63d2\u69fd\u7684\u5176\u4e2d\u4e00\u4e2a\uff0c \u96c6\u7fa4\u4f7f\u7528\u516c\u5f0f CRC16(key) % 16384 \u6765\u8ba1\u7b97\u952e key \u5c5e\u4e8e\u90a3\u4e2a\u63d2\u69fd\uff0c\u2032 \u5176\u4e2d CRC16(key) \u8bed\u53e5\u7528\u4e8e\u8ba1\u7b97\u952e key \u7684 CRC16 \u6821\u9a8c\u548c \u3002 \u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u4e00\u90e8\u5206\u63d2\u69fd\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4e00\u4e2a\u96c6\u7fa4\u53ef\u4ee5\u67093\u4e2a\u4e3b\u8282\u70b9\u2032 \u5176\u4e2d: \u8282\u70b9A\u8d1f\u8d23\u5904\u74060\u53f7\u81f3 5500\u53f7\u63d2\u69fd\u3002 \u8282\u70b9 B \u8d1f\u8d23\u5904\u7406 5501 \u53f7\u81f3 11000 \u53f7\u63d2\u69fd\u3002 \u8282\u70b9C\u8d1f\u8d23\u5904\u7406 11001 \u53f7\u81f316383\u53f7\u63d2\u69fd\u3002","title":"\u4ec0\u4e48\u662fslots"},{"location":"redis/13_cluster.html#hash-source-code","text":"","title":"Hash Source Code"},{"location":"redis/13_cluster.html#setinsert","text":"\u5728redis-cli\u6bcf\u6b21\u5f55\u5165\uff0c\u67e5\u8be2\u952e\u503c\uff0credis\u90fd\u4f1a\u8ba1\u7b97\u51fa\u8be5key\u5e94\u8be5\u9001\u5f80\u7684\u63d2\u6f15, \u5982\u679c\u4e0d\u662f\u8be5\u5ba2\u6237\u7aef\u5bf9\u5e94\u7684\u670d\u52a1\u5668\u63d2\u69fd\uff0credis\u4f1a\u62a5\u9519\u5e76\u544a\u77e5\u5e94\u524d\u5f80\u7684redis\u5b9e\u4f8b\u5730\u5740\u548c\u7aef\u53e3\u3002 redis-cli\u63d0\u4f9b\u4e86 -c \u53c2\u6570\u5b9e\u73b0\u81ea\u52a8\u91cd\u5b9a\u5411\u3002 \u4f8b\u5982 redis-cli -c -p6379 \u767b\u5165\u540e, \u518d\u5f55\u5165\u3001 \u67e5\u8be2\u952e\u503c\u53ef\u4ee5\u81ea\u52a8\u91cd\u5b9a\u5411\u3002 \u4e0d\u5728\u4e00\u4e2asolt\u4e0b\u7684\u952e\u503c\uff0c\u662f\u4e0d\u80fd\u4f7f\u7528mget, mset\u7b49\u591a\u952e\u64cd\u4f5c\u7684 \u53ef\u4ee5\u901a\u8fc7{}\u6765\u5b9a\u4e49\u7ec4\u7684\u6982\u5ff5\uff0c\u4ece\u800c\u662fkey\u4e2d{}\u5185\u76f8\u540c\u5185\u5bb9\u7684\u952e\u503c\u5bf9\u5e94\u5230\u540c\u4e00\u4e2aslot\u4e2d\u53bb\u3002","title":"\u5728\u96c6\u7fa4\u4e2dset/insert\u503c"},{"location":"redis/13_cluster.html#_2","text":"CLUSTER KEYSLOT <key> \u8ba1\u7b97\u952e key \u5e94\u8be5\u88ab\u653e\u7f6e\u5728\u90a3\u4e2a\u69fd\u4e0a\u3002 CLUSTER COUNTKEYSINSLOT <slot> \u8fd4\u56de\u69fdslot\u76ee\u524d\u5305\u542b\u7684\u952e\u503c\u5bf9\u7684\u6570\u91cf\u3002 CLUSTER GETKEYINSLOT <slot> <count> \u8fd4\u56decount\u4e2aslot\u69fd\u4e2d\u7684\u952e","title":"\u67e5\u8be2\u96c6\u7fa4\u4e2d\u7684\u503c"},{"location":"redis/13_cluster.html#configuration","text":"cluster-require-full-coverage : If this is set to yes, as it is by default, the cluster stops accepting writes if some percentage of the key space is not covered by any node. If the option is set to no, the cluster will still serve queries even if only requests about a subset of keys can be processed.","title":"Configuration"}]}